(this.webpackJsonpzenpub=this.webpackJsonpzenpub||[]).push([[1],{192:function(e,n,t){"use strict";var r=t(271);t.d(n,"getOpType",(function(){return r.a})),t.d(n,"getOperationNameAndType",(function(){return r.b}));t(272)},271:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return c}));var r=t(193),a=t(207),o=t(205);t(89).ApolloLink;var i=function(e){var n=e.query.definitions.find((function(n){return"OperationDefinition"===n.kind&&!!n.name&&n.name.value===e.operationName}));return n&&n.operation},c=function(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind})).reduce((function(e,n){if(!e){var t=n.selectionSet.selections.find((function(e){return"Field"===e.kind}))||null,r=n.operation;e=t&&[t.name.value,r]}return e}),null)||[]}},272:function(e,n){},340:function(e,n,t){e.exports=t.p+"static/media/collectionPlaceholder.43589a77.png"},403:function(e,n,t){e.exports=t(715)},497:function(e,n,t){},500:function(e,n,t){var r={"./en_GB/messages.po":[719,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=500,e.exports=a},501:function(e,n,t){var r={"./en_GB/messages.js":[720,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=501,e.exports=a},645:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAACOCAYAAAD0I+WQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGNFJREFUeNrsne2VHDUThcd+/d/OYJ2B7QgMEawdge0IFiIAIlgcgU0EiyMAIliIYCECIAK/88xBnNmhpZZKpW6p595z6hjsmZ5utVRXVaqPB7v7eLyXr/bydi9Pd4IgCIJwH7/v5ce9fL+XP8JfPjj6wOVePu7licZKEARBmMFf/xgfPxyTyeU/TCMIgiAIJXgLoUAmj/8xW+5ZJC9fvtx98cUXGiZBEAThgF9//XX36dOnKQvlOWTyzV6+DX/7+PHj3c8//7x7/vy5Rk4QBEG4h99//3336tWr3W+//Xb81x8hk7vd0WH77e2tiEQQBEFIEgo88ffff/9rnTw8JpLLy0sRiSAIgpDE06dPD9bJEZ48PP4/EYkgCIKQSyjHeKghEQRBEGohMhEEQRBEJoIgCILIRBAEQRCZCIIgCILIRBAEQRCZCIIgCCITQRAEQWQiCIIgCODROTwklS6pJcOff/311+FPwH+fFCv7FxS8PK4IECoo8yeZn6fZn4IgCCKTDQGCoOoxAmn88ssvputQwOz4u+G/v/vuu3tkA7kEWer5vv/+e81cQRBWBTr2FJ+DfPPNN59HxN3d3efr6+vPz549+3z8PEvL5eXl5w8fPnz+888/mz7vTz/99HlPZqs+q0QikZzImGSCwkZxr00gc8TSkkB7fXaJRCIyGcIKubq6GmZnfnFxcRjXFtYK14S0NIklEonIpIBE3rx5M+xAQ36tSGXkcZFIJCKTxdxZ3NdWBrwVqWCtaTJLJBKRyQRubm42e9CM+4vn8wRnNJrQEolEZHJkjbx8+fIsXgDPiQtPhCKRSEaW7jLgf/zxx0NCoDU/ZDTwnOSr8NweePv27e7q6kpB8IIgLIqukha/+uqr3fv375tc++Li4qC0keMM9lSyYUjKIXs+ZNAjf/zxh+u9kSD5+vXr3Zs3bw4JiU+ePKm6HtcgufGHH37QDBcEYTGs7ubCreWdM8GZBIfSnEt4H3ZzPa7L9fkdz/tmHLzcXgoblkgkZ3Nmcnt766aQA4FwzaWfwTP3het4PEMLkpZIJJLuyASF6aGAOcRumW1eegDuFTzg8UxYOSq9IpFINksmHkSC0qZOVY/gvjxIxYNQcMlpokskks2RSS2R4M7qlUSmFHmtG8+DULaU+CmRSEQm1UQyamXjWmXuQSg6P5GMIugILPsgctX2L4uGBhNWSyguobCl2CvC3cePH+81rBoJ33777e7Vq1eHPJBYQ64U3r17d/iT71tBLgvjZxn/GuyJtGrOlIZjE2I91byM8O6ScOm9EouGjoe+NqXfy0EIRS/NtSL8PTY/CHP3yt2yjksK9Afi3lkjzNGp8PjQq4h5jCw9j4VOQoOJLLLuLihk2LpHyJJh0DWFGWvde/R9WXrH4mXR5o5bbIz4ey8reCnruaTNAjv4Jdyc1nHZOdaq21rNvi3IIhnw7CisFsle+R0sktpEvl7Ac/A8eyVh+j47t9B22AISQ7HyRgO7VcZtTwiHXey5gN067xtra2tgHvJsWO2l65vP8739JuNgkQnrYxEyQYGVunZQGDc3N4fvblVJsBBKFSOEzHchaCtQyqOCTQmujnMilPDOcC9tBZAjRDLljizdZHCdETdIIpNCUNqjtKwHigKFwS58y2AhWBQjxFxzdsLvjrzTDVbKuYG1tBWLxPP9BWv/3DYYvaHpATw7hq+//tpEJKMetFsJpfRg/tOnTwflYrXc+O7ah5jhoDk2LinXBxsNlJIlmGFNhHpvUziuGRcbE1w63rXhlkRY3ymEg/Zjd244mE+NDWvBGgAg+KDJwaGllIdXGZG5jHAONTnMTSUVhtBEyqTw+dYBAJZMdT5fU8drqQNM6+8z/qn5ECu33/MB/C7jED0111JzdoQD+LkQdwJEYusAfTKnH7xr5Uk6yDOxdP5rmYjoUeaEwokt79GSg5NSIC0j7JYgkznCZLy2RiZhnlnWVe9kgqJPISdab27DqY6jG4vmwjwtLSVPdFNNbH4MoT8KeRq1cfa4lr788st/D4FbubxKwDNZ/c+4kXoPcMANF3u+rbpCmWcp1+CoSM213LNV5gPrLxaAsvVz1p7xcOlJMwWaOdUcKMf8rlyTPiHePmYUOKTSQhGjIEvDhrkPa3QX3+394LIFcY+Kmii+tRFT9DwTYb4eG4wWG1IhD+4H8LzkEguAcEfvKJWQ19L6cBbrCysM68czDybkFuRadywuxrBkQZ5aJz0fXG4lxygXsUg75vWoHUgJlogFF1gCQUIDOGHDZFKi0NgRe7WrPXYDLFkyhMUd3F6eSo/FwjVzCZHPQ0KWuH2+1zOZnNNuM3TbrF1bI71Diw7A26DIrQ2TCZO9xKXkndnOTgVTeulwVxQ+i6UmMz02Pi9evMi2Thh/y/kJBHR5eZn01a+5o425QL3HewmQwR9DKhya99qqpfXa1qXcmNuA25kJirzEXYXy8j4s43pr5R3wu95nKCiXkiKJHGBaTX/vM6taYLWyS09ZfCMqITYdMYk9J+8mFPrcomWigo0ik/+YqrmTAkXhncEMka3tT2bn6K3gsDZKag9Zz58g4qVrHPFsRJNOCaQ4Z7luJSM8Z5y2WJtrVOtSaEwmJf5cdvCe7i3OSXrxJ9fWzapVmjUKdqSwSp5z5EzwEuCGrCkO2jN0iC4y+Y9Vkruw2f16K36u14upzDh475hR8rlF/lJhkzlEOAKYb6VlenoBlmtM5nbpvJ+a3jA94lzKJolMMlGivLyJpLTh0VK7Zu8dV8m4WSPkQu2n3i0ScodGBflJMSHYIpRWT1n1IxY0jCVbnlvYt8hkxkzNjQJKdYJbQsmegkXJTu/u7u6ev77WnVBjHcTAAWaudcL7sGZK9+jqCucnuHtGtUhK5g4hr7FgDpTvKBZkDpkAS2l91i6RcVOicvTroDo0uGQX7G2VoGSsu3AmcCzZkMWK26HG4qmp6Jtyc+QGGfBslt+HtJYKQYUg5kiXd+wVoTdSvgrvIOYuHdE1lApMYQNTGjzDGMTep6ydjZNJ6PHsCWsJdXYuc1FXtU17ODvBB+658Bm/3FweK5ksaZlY+pznbjI8UDsHahGbP2vflwWp98ycK7U4U/N01CoBo+Nh7aLNdXG1MM0tVklOPwUvhdSigVOusmdBWZ9h9I5+qYNs8ptqLZmlii1ubYcdW6+QY0lgQWpjqlDjQcmkRJm3IBNLxnZOWHLw0a9Bdp7jaM15Gb18SUqh5I4fhBqzAJZQWKlaVqMiFeWIxZ171sF1UpUChAHJJFdZcfDu7ee1WiU5rh8mq0eoMe4o711sScSVlUxGD9ec88/PBVig1FLzq8Um4XS9pJTiqOVHsJZT986/UUE8Bd5dbEPgtQkUbHjUatGeLuAld5+p+8ixSjzzREJLXk/wHDmH5OdqmYRouti48/c8I585HiMsAf4+9b5qgj7AnDsnlFbx3kix87cEwPAdz4KKbOZia5e1GQqW8m6OPxfeS8pa89oECnaYOi3SpW+X2YGrRSteS9fEm5ubJh0iU8L1vFHSMdAKzw6Ma7QNnuvq17LVsWfH0lMwh3cNum6WPG9tJ0k6KvbQpVTSSafFXMsA11ILt4nVMkkBl5R3WGwL/3qJ5XCuri5cjN6h2bzLNcue8/sj5picgpB7T3dUaIQnq2RdmMkkV0m1cJmg9EsnTk6EUov6Xq3CFHMjrqxnNlsoc5HK1bDM9zXdfxAJv78VhUkVZA9iZH4v0QhPaEgmuUqqhVKyKMi5yBgW61ySIlaWJbu2RShp7rhaf3srYankL2CRWschtJSl3Mkaipz7RulSamVrO2/WG/PYaj1j3fB9EUkfeFQzydeyTCyuozkyyXGJ8Bmeu3Ty8h3vMM9cMqk5hPdy6cTuYal8DULIEcq4Qyyp3iHH98xBNwqrVInzXDURV8zvcI2SuQbxeUd6Tb2j2uc7Bs8HUWNph8CI1Frht3kv51Q1evNkkqvQW8TKW5LxUsqXhTHnjgrVji2usBZKc6QcBJRFLzvhYH3yPmNjWOuaPP6dJREU85Lj6AXGPIx77N2wjkQgGyST3N1aL2SS2onm5p7MXWdJMsm1TKwBAFtLmDsFSkmKSe9G8IPpzCRXmbeq3ukZIYUbY86VgAkeIsF6OZjOJTWrn33rZCIIQgdkkqvMezrEjZ3d5Litem0PO2JfC0EQRCabQ84hHoe2tdZIq/IX6lInCMJZkEnP4aUh5HNu59+rVVKCpaKmBEEQmZzdzjmnjg9ks4V8C5GJIAhDk0nPVsmcxUF4onc5DkEQBJHJhnbEkMScVbKlUtZqYyoIgsikwT3NJVwRCjx6GfZj6KBeEITWeHRuD5zjuvK2Slopc52F+IBACzYP4T3xJ2OLOxQhFF59xQVhHsV9GO7u7rLq2z979qxJTwdLLxN6gOT0AZnrP1LSS2TXuL/FrnFPk13jfiY5fVvo38E7oT/Jzrn/An01+I3c/j0fPnww30fO71h66bAWPXqwxOTy8tJ1Lewc+tx43U/snbTss7NTP5P7yM2OblXN05qdnRMKPPcZSymXEdGD1YO1QOUBgiW4n/3izy69nwKVGW5vbw8WaK47k3MnChFyH9fX100SRktLsi/RJz51T4xdbgvppeYLeWHCOmgezdVC+VoWUE4xx5xQYEsplxYH4Ln3YVW+PbrQUBa8R5S5FSgbxq7G9YirlPvwLhfEPZUo59aNsiDMuYZyvTXrYuOhyhCDkUmukmrRadCCuXLquaHA3hWLeyLpUcB7urm5MRGJ13lY6MPhvTOfU97Wz7aylHojk9BHXhiITHJ32y1KibSItMpVMr1YJrnjaiWyViVgPJXuhw8fsj9/eXnpHljBe6W3hudOOFc5r+3iOvYSeLgeve+7t3sSmTgoqRaWibdyRtHkEpTleVpYJq37ySxh+YQmS1OSqzR4d3NA2c8RCb8JQTG3Hjx4cBDeW2iIlnq3nu2ec11drS0CyCp33vbYl35LeWIjwRR1RJTNLuOEf7+QV41k2jlFxJREse0WiGjLjSrKjVbyiJjbOUftEEk0d/8574QorFSUFr8zN4dT18h5HyXvISeq6/b2Nvt6luik6+vr7OszhrsOorlKr6Norg6iuUp222Sat7BOvMzY/cTJ3r1bXD8trJKSjnPW3+/hrItWu3QOTO38eXepCB52+amdM9YIvzM3h9+9e3dwacXgaZ3M7fR5ptaJqLF7mLJYseZ6jKLCquwp2kxursQizvUVt/C/eywm7r+k/lZKmSxJJrnjyUKyuARRGNamWi1A8ETKbZF6h6lDag5qS5IRUbAx9x//5nV2Mufqan3wjutwat6wiYm9h9b3ZHWHy901AJmA3HOGFi/U4xAeZZKrbFEiczvYVvdpJRPrb/d4+A5hxBQ5yjemyFO7/NKoHwg29R2LQo09U+pasWfyCueOXZ/NVIpMerQCWAM552rCIGRC8qJ33kKtkuaAseTg0BJuiIJrYZnkWkjWMeolnPtUkaeee2qcU+PPtSx9xlMbI8t4x64Xm5sxFxfvzGONpXJLQovr2O+sbZ3E7ku5JwOQScnkaRGWWZM0VkIkTFILmbRYXCjBXBfUliyTORKdetYUkVufEQKKKS1L5BzPNGWdxFxdKUXf0iqBrEJFi9h7WLtlQ8x65b14nmkJDciEl5Sr0Fu4umpCEkvOEvgdyxlCCzLJHceaPIReixqW7rxTz19jfcXuw0reMeU8NX9ic8pynleypo7nXWwOluiDFkh1T4Vo1rw3kYmjQmdH500oNWSCpTGXS8G/8xsW5ZpTisKixHLPbbwVWw8orfWWIpOaPBpvyy025qfzO1Q3nvq+xWU3tQFJuQWP30OMUNe2Tt6/fx/dKOgwvnMyWdvVZQ1JZEGwMGMLmXtlYc31PkmZ3N4ocbVZibb3zPe1iKkl2CDkuLrWskpQzqdkVWJNLY3YczCeV1dX0vq9kkmJacsO31tZ1VgnKJTXr18fSAliCcL/k1dQs9vzzgpG2eSScU0eQs+WiSd6O5DNOYdYi0ymNjGxucjaWTt6inUd23jhBtNhfKdkUroL996xo/xrExg5D4HogtTmWGAteddNYnHk3pd1jKd2oFtFTZRdi5pYc/kbMbdpSUBGCrHckhhZpVxdPZRXgTRiCZZyd3VMJiUJW0xC75fZU5VQxsH7fkqjyayLufdFVnqAmrKCawgh9t2a0Fw2MVPfD5b/mi4uiJcN26nExpd7XXv3D8HGnon7UyHITsnEYp14FhLsyRea0xPFMra5u0+sIuvv9+7iKg31Tc0xq2USOwSvJZPU+KMUW5JJKlgklNqfktSmpQfrhLOoGOGxcWpRzVtk4qTwcncjKEbvuG+ut3boH7sdbzcei6Ek8976+14RQS2RUlBTETxYwZYM8xRS36s9D0y5umJRXB4urhaKv5dKwrESOFh8reubiUyMgOVLFBkhfJ6H8cEXupZ5zaG3984+hCaXkJl1gfTu4uLZYhYBRBJTqrF3Mlcg0qIka99/7ByCe53aRbd2cdVakT3kdbBBUrOswcik1DoJOy5vdxcEtTSh8HssbG+zmUVeYi1Yrb2S/JU1MNePxPpvpWU2cKWmXFwe4ca5BMG6sYatH6Okb8mo1gmFQntsQy0ycbRO2E16x6UvTShYJPye94JE0ZUoeHbZ1kTFnq0SLBIsj9ih91zIdOxgO8zX3LnC+KZ2uF5u29xddGurhHGNnZWcSqqSci/osYHXFmFqjpVqlJPbuCkIzYC8QfMgGlPtGjaDoYEUz9vi3neNGnxNvS+aP7UcpxhoOMUYngrNqpiLOQ2gchoZcc25Blt7spj8LnN5rjFWzvuKNWKaakKW89xTDb0szZ5i85dn9li/qcZj3s2x5hq6zb1HNceqFl8yKenCaHnRpeCZvJUl1yvpRFdKJKX3W/Pellg4rVBCujnzC8WKQg6S280wZ9NSQiZzm6tYZ8NSMoFALSSwK+immiKlpcmE+8zZ/IlMOiKT0sm4q2wxm9NulwVaSyrsUhmjFtaI1arj8zW/19oqaUUmpWPFc5a0us1FzKKpIZO5dxpT0KVkwqbPqz117FogNseWJpNcL4jIZOG2vTl++NJzC85PWvTSwN8eCjvuJ/3hIDU30gSfPZ/fL9SD771FHknwUXPmURqeW+M7L8mq7wkhka5krHhOxtdzfuGH9zgEPwXPlbpPj/MSzvo8c1dS3+mpC6N3FKnQ8Myk1t3VageZslqOXRtBWlkfsV225Xyn5n0tZZV4WyYebstaFyVzJmcXbLVMUjvomIur1DJJ7dAtczHl6oq5I9ewTBCeT5bJQG6uACatZWKmzOYtwXJGknOo7OWe6YFMGCPmZqkLcE6hlJ7TocitZFZKJjHlnDqDKCGTWMCGxcWV4+qaendrkcnchkJkYpMHgVHAfhCbdCTDJWGJwd8vnE2H9OEasDTewn2Iy83qbsOF8uLFi0XDe61o3agLd0+oFh2yosO4Mk64H/mztBLBKXCrTr2vVMLl1HdKPw+YK6cuwdg74Xmt+TKMZSyEe+q+Y/cwdb8530uNzdQaioXzz/2+sIKby8Olkoo4GRnW3Y+HG7B1yLREIpGbqzt3TnBJWPMoegPEWupvz3Ul5ADzXpNeIpEMSybWA/njHXmrXJSlwPPXHB7XPj+EvNShu0QiEZk0RUlmbezgeTQrhfu15N14EoncWxKJZFNk4kEo4V6XDN+1urQ8Qlk9iEQRKhKJZHNk4kUoKOkeScWLRLyIpMa9KJFIJF2TCSAu3kPhBlJZ2/0VCgZ6PZNHro3OSSQSyebJpDbKa0o4m2A3v5S1wu/we57nESR4eVQBsGbWSyQSyXBk0lLpQSyEwnqXZ8GiYqxqQnx3C5S1rz30l0gkklx51EPWJFm7ZK/SWItCbF4gY/k4azm0teX3QiMpMnansnbJgg1NlUIDIO6xZUa2ZwUCMut77p4oCML2sLpl4pmLMaLg1vIsv2+phyaRSCTDu7mm3F7n4qJB8Xue73hEyUkkEskmyOTYSvGsFNuTcEbk3QxMRCKRSEQmC+Rs9OLSalEWRq4tiUQiMskklSV7cIxCImDkcZFIJNuQRfqZeIIIK1oCj9Jylh4TRKm17MuiNqSCICwN9PBx2+pHoz0AYbwQHgqa5lKQirWZTyvQeIe+1xBICEFuiSV+QxAEIbWJfTTqg5ArgrJGgrUCuaxFLBAISh0SQaxdEAVBEEbEoy08RLBWEIgFxgzSsv1mSIKEPGQdCIIgMtkQIJZgsYCQyQ6xhP8u7fEcek6HPuGIyEMQBGHDZDJFLnPK/9T3FyuxIgiCIJwpmeRAVoYgCEIdHmoIBEEQBJGJIAiCIDIRBEEQRCaCIAiCIDIRBEEQRCaCIAiCyEQQBEEQmQiCIAiCyEQQBEEQmQiCIAgiE0EQBGEbuNdp8eLiQgUOBUEQhFmcVl+/RyaCIAiCUG2ZCIIgCIIF/9vL070811AIgiAIRvz6fwEGAIs0HCMzUWd4AAAAAElFTkSuQmCC"},646:function(e,n,t){e.exports=t.p+"static/media/by.04d377d9.png"},647:function(e,n,t){e.exports=t.p+"static/media/by-sa.331e6b36.png"},664:function(e,n,t){},715:function(e,n,t){"use strict";t.r(n);var r=t(18),a=t.n(r),o=t(1),i=t(26),c=(t(776),t(5)),l=t(9),u=t(66),m=t(42),s=t(89),d=t(192),f=function(e,n){var t=n.map((function(e){return e.message})).join("\n");return"Ooops, something went wrong with ".concat(e,": \n").concat(t)},v=function(e){return"".concat(e," success")},p=function(e,n){return Object(m.c)(e,n)},g=function(e){return Object(u.a)({},"MN_CTX_FLD",e)},b=new s.ApolloLink((function(e,n){var t=Object(d.getOperationNameAndType)(e.query),r=Object(l.a)(t,2)[1],a=e.getContext().MN_CTX_FLD,o="query"===r||!(null===a||void 0===a?void 0:a.ctx)&&!(null===a||void 0===a?void 0:a.successMsg);return n(e).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){if(n.errors&&!e.noShowError){var t=e.errorMsg?e.errorMsg(n.errors):f(e.ctx||"this operation",n.errors);p(t,{type:"error"})}else if(!n.errors&&n.data&&!e.noShowSuccess){var r=e.successMsg?e.successMsg(n.data):v(e.ctx||"");p(r,{type:"success"})}return n}}(Object(c.a)({noShowSuccess:o,ctx:e.operationName},e.getContext().MN_CTX_FLD)))})),h=t(0),x=t.n(h),E=t(67),y=t(54),O=t.n(y),j=(t(413),t(37)),k=t(17),w=t(49),C=t(121),I=t(400),F=t(147),T=t(380),S=t(778),P=t(109),M=t(22),_=t(268),L=t(401),U=(t(375),t(7)),A=t.n(U);function R(){var e=Object(o.a)(["\n    fragment SettingsPageMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  location\n  summary\n  displayUsername\n  website\n  extraInfo\n}\n    "]);return R=function(){return e},e}var B=A()(R());function z(){var e=Object(o.a)(["\n    fragment SidebarMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  preferredUsername\n  displayUsername\n}\n    "]);return z=function(){return e},e}function N(){var e=Object(o.a)(["\n    fragment SidebarFollowedCommunity on Community {\n  id\n  isLocal\n  canonicalUrl\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  name\n}\n    "]);return N=function(){return e},e}var D=A()(N()),$=A()(z()),q=t(8);function W(){var e=Object(o.a)(["\n    mutation meUpdateMyProfile($profile: UpdateProfileInput!, $icon: UploadInput, $image: UploadInput) {\n  updateProfile(profile: $profile, icon: $icon, image: $image) {\n    user {\n      ...SettingsPageMeUser\n    }\n  }\n}\n    ",""]);return W=function(){return e},e}function Q(){var e=Object(o.a)(["\n    mutation meLogout {\n  deleteSession\n}\n    "]);return Q=function(){return e},e}function V(){var e=Object(o.a)(["\n    query me {\n  me {\n    ...UseMeData\n  }\n}\n    ",""]);return V=function(){return e},e}function H(){var e=Object(o.a)(["\n    fragment UseMeData on Me {\n  isInstanceAdmin\n  email\n  isConfirmed\n  wantsEmailDigest\n  wantsNotifications\n  user {\n    id\n    ...SettingsPageMeUser\n    ...SidebarMeUser\n  }\n}\n    ","\n",""]);return H=function(){return e},e}var J=A()(H(),B,$),K=A()(V(),J);var Z=A()(Q());var G=A()(W(),B);function Y(){var e=Object(o.a)(["\n    query anonUsernameAvailable($username: String!) {\n  usernameAvailable(username: $username)\n}\n    "]);return Y=function(){return e},e}function X(){var e=Object(o.a)(["\n    mutation anonSignUp($registration: RegistrationInput!) {\n  createUser(user: $registration) {\n    ...UseMeData\n  }\n}\n    ",""]);return X=function(){return e},e}function ee(){var e=Object(o.a)(["\n    mutation anonConfirmEmail($token: String!) {\n  confirmEmail(token: $token) {\n    ...AuthData\n  }\n}\n    ",""]);return ee=function(){return e},e}function ne(){var e=Object(o.a)(["\n    mutation anonLogin($email: String!, $password: String!) {\n  createSession(email: $email, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return ne=function(){return e},e}function te(){var e=Object(o.a)(["\n    mutation anonResetPasswordRequest($email: String!) {\n  resetPasswordRequest(email: $email)\n}\n    "]);return te=function(){return e},e}function re(){var e=Object(o.a)(["\n    mutation anonResetPassword($password: String!, $token: String!) {\n  resetPassword(token: $token, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return re=function(){return e},e}function ae(){var e=Object(o.a)(["\n    fragment AuthData on AuthPayload {\n  me {\n    ...UseMeData\n  }\n  token\n}\n    ",""]);return ae=function(){return e},e}var oe=A()(ae(),J),ie=A()(re(),oe);var ce=A()(te());var le=A()(ne(),oe);var ue=A()(ee(),oe);var me=A()(X(),J);var se=A()(Y());var de,fe,ve,pe=t(11),ge=t(378),be=t.n(ge),he=t(379),xe=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_PHOENIX_SOCKET_ENDPOINT,Ee=parseInt("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_DEFAULT_PAGE_SIZE))||15,ye=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_INVITE_ONLY_TEXT||"Please note, signups on this instance are currently invite-only.",Oe="https://pbs.twimg.com/profile_images/1176826011293556738/9jzWwP_g.png",je="This is a test instance. Your data is not secure or private.",ke="This site uses cookies.",we="Information you post on this site may be publicly available and will be copied onto other servers in the federated network.",Ce=!1,Ie="https://moodle.net/terms/users.md",Fe="https://moodle.net/terms/cookies.md",Te="https://moodle.net/terms/indexing.md",Se=!0,Pe="https://moodle.net/terms/privacy.md",Me="This site uses cookies and follows GDPR rules. Contact the instance operators if you want your data exported or deleted.",_e=[{code:"en_GB",desc:"English, British",rtl:!1},{code:"en_US",desc:"English, USA",rtl:!1},{code:"es_MX",desc:"Espa\xf1ol, M\xe9jico",rtl:!1},{code:"es_ES",desc:"Espa\xf1ol, Espa\xf1a",rtl:!1},{code:"fr_FR",desc:"Fran\xe7ais, France",rtl:!1},{code:"eu",desc:"Euskara",rtl:!1},{code:"ar_SA",desc:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629, \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",rtl:!0}],Le=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_API_ID,Ue=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_API_KEY,Ae=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_ENV,Re=Le&&Ue?{appId:Le,apiKey:Ue,indexName:Ae}:null,Be=!Le||!Ue,ze=/^[a-zA-Z][a-zA-Z0-9-]{2,}$/,Ne=/^.+\..+$/,De=["CC0-1.0","CC-BY-4.0","CC-BY-SA-4.0"],$e="rgb(245, 246, 247)",qe="#fff",We="#05244F",Qe="#02e379",Ve="#D1D3D8",He="#2db783",Je="#ff5a5f",Ke="#ffebb3",Ze="#FFFFFF",Ge="#F8F8F8",Ye="#F3F3F3",Xe="#EEEEEE",en="#D1D3D8",nn="#999999",tn="#666666",rn="#444444",an="#333333",on="1px solid #F3F3F3",cn={primary:'"Barlow", "Open Sans", sans-serif'},ln={s1:"12px",s2:"14px",s3:"16px",m1:"20px",m2:"24px",m3:"28px",l1:"32px",l2:"40px",l3:"48px",code:"90px"},un=t(362).GraphQLError,mn=t(89),sn=mn.ApolloLink,dn=mn.Observable,fn=t(717),vn=fn.selectURI,pn=fn.selectHttpOptionsAndBody,gn=fn.fallbackHttpConfig,bn=fn.serializeFetchParameter,hn=fn.createSignalIfSupported,xn=fn.parseAndCheckHttpResponse,En=t(716).extractFiles,yn=function(e,n,t){var r,a=n.trim().split(".");for(r=0;r<a.length-1;r++)e=e[a[r]];e[a[r]]=t},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.uri,t=void 0===n?"/graphql":n,r=e.fetch,a=void 0===r?fetch:r,o=e.fetchOptions,i=e.credentials,l=e.headers,u=e.includeExtensions,m={http:{includeExtensions:u},options:o,credentials:i,headers:l};return new sn((function(e){var n=vn(e,t),r=e.getContext(),o=r.clientAwareness,i=(o=void 0===o?{}:o).name,l=o.version,u=r.headers,s={http:r.http,options:r.fetchOptions,credentials:r.credentials,headers:Object(c.a)(Object(c.a)(Object(c.a)({},i&&{"apollographql-client-name":i}),l&&{"apollographql-client-version":l}),u)},d=pn(e,gn,m,s),f=d.options,v=d.body,p=En(v),g=p.clone,b=p.files;if(b.size){delete f.headers["content-type"];var h=new FormData;h.append("operationName",g.operationName),h.append("query",g.query);var x=0;b.forEach((function(e){e.forEach((function(e){return yn(g,e,String(++x))}))})),h.append("variables",JSON.stringify(g.variables)),x=0,b.forEach((function(e,n){h.append(++x,n,n.name)})),f.body=h}else f.body=bn(g,"Payload");return new dn((function(t){var r;if(!f.signal){var o=hn().controller;o&&(r=o,f.signal=r.signal)}return a(n,f).then((function(n){return e.setContext({response:n}),n})).then(xn(e)).then((function(e){t.next(e),t.complete()})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.next({errors:[new un(String(e))]}))})),function(){r&&r.abort()}}))}))};!function(e){e.Created="CREATED",e.Updated="UPDATED"}(de||(de={})),function(e){e.Organization="Organization",e.Person="Person"}(fe||(fe={})),function(e){e.Day="day",e.Hour="hour",e.Minute="minute",e.Month="month",e.Second="second",e.Week="week",e.Year="year"}(ve||(ve={}));var jn={__schema:{types:[{kind:"INTERFACE",name:"Agent",possibleTypes:[{name:"Organization"},{name:"Person"}]},{kind:"UNION",name:"AnyContext",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Comment"},{name:"Community"},{name:"Flag"},{name:"Follow"},{name:"Intent"},{name:"Like"},{name:"Organisation"},{name:"Resource"},{name:"SpatialThing"},{name:"Taggable"},{name:"User"}]},{kind:"UNION",name:"AccountingScope",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Community"},{name:"Organisation"},{name:"Organization"},{name:"Person"},{name:"Taggable"},{name:"User"}]},{kind:"UNION",name:"EventOrCommitment",possibleTypes:[{name:"Commitment"},{name:"EconomicEvent"}]},{kind:"UNION",name:"ProductionFlowItem",possibleTypes:[{name:"EconomicResource"},{name:"Process"}]}]}};function kn(e){return wn.apply(this,arguments)}function wn(){return(wn=Object(i.a)(a.a.mark((function e(n){var t,r,o,i,l,u,m,f,v,p,g,b,h,x,E,y,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.localKVStore,r=n.appLinks,o=t.get("AUTH_TOKEN"),i=new T.b({introspectionQueryResultData:jn}),l=new S.a({fragmentMatcher:i,cacheRedirects:{Query:{activity:function(e,n,t){return(0,t.getCacheKey)({__typename:"Activity",id:n.activityId})},collection:function(e,n,t){return(0,t.getCacheKey)({__typename:"Collection",id:n.collectionId})},community:function(e,n,t){return(0,t.getCacheKey)({__typename:"Community",id:n.communityId})},comment:function(e,n,t){return(0,t.getCacheKey)({__typename:"Comment",id:n.commentId})},user:function(e,n,t){return(0,t.getCacheKey)({__typename:"User",id:n.userId})},thread:function(e,n,t){return(0,t.getCacheKey)({__typename:"Thread",id:n.threadId})},resource:function(e,n,t){return(0,t.getCacheKey)({__typename:"Resource",id:n.resourceId})}}},dataIdFromObject:function(e){switch(e.__typename){case"User":return"userId"in e?e.userId:e.id;default:return Object(S.b)(e)}}}),u=function(e){e?(o=e,t.set("AUTH_TOKEN",e)):m()},m=function(){o=void 0,t.del("AUTH_TOKEN")},f=new s.ApolloLink((function(e,n){var t=e.operationName;return"meLogout"===t&&m(),n(e).map((function(e){var n,r,a,o,i,c;"anonLogin"!==t&&"anonResetPassword"!==t&&"anonConfirmEmail"!==t||u((null===(n=e.data)||void 0===n||null===(r=n.createSession)||void 0===r?void 0:r.token)||(null===(a=e.data)||void 0===a||null===(o=a.confirmEmail)||void 0===o?void 0:o.token)||(null===(i=e.data)||void 0===i||null===(c=i.resetPassword)||void 0===c?void 0:c.token));return e}))})),v=Object(_.a)((function(e,n){var t=n.headers;return{headers:Object(c.a)(Object(c.a)({},t),{},{authorization:o?"Bearer ".concat(o):null})}})),p=Object(L.a)((function(e){var n=e.operation,t=e.response,r=e.graphQLErrors,a=e.networkError;if(console.error("errorLink on operation",e),a){var o="statusCode"in a?be.a.getStatusText(a.statusCode):a.message;return M.a.of({errors:[new pe.a("network error:".concat(o))]})}if(r){var i=r.find((function(e){return/Failed to fetch/gi.test(e.message)||/JSON.parse/gi.test(e.message)||/ServerParseError/gi.test(e.message)}));return M.a.of({errors:i?[new pe.a("Unexpected error")]:r})}if(null===t||void 0===t?void 0:t.errors)return M.a.of({data:t.data,errors:t.errors});var c=JSON.stringify(t,null,2),l="unknown error:\noperation:".concat(n,"\nresponse:").concat(c);return M.a.of({errors:[new pe.a(l)]})})),g=Object(_.a)((function(e,n){var t=n.headers;return Object(c.a)(Object(c.a)({},n),{},{clientAwareness:void 0,headers:Object(c.a)({},t)})})),b=["anonSignUp","anonLogin","anonConfirmEmail","anonResetPassword","anonResetPasswordRequest"],h=new s.ApolloLink((function(e,n){if(!o&&("mutation"===Object(d.getOpType)(e)&&!b.includes(e.operationName)))return M.a.of({errors:[new pe.a("You should log in for performing this operation!")]});return n(e)})),x=s.ApolloLink.from([null].concat(Object(w.a)(r),[h,p,v,g,f,On({uri:""})]).filter(Boolean)),E=Object(I.a)(C.b(new he.Socket(xe))),y=s.ApolloLink.split((function(e){return Object(F.c)(e.query)}),E,x),O=new P.a({cache:l,link:y,defaultOptions:{watchQuery:{fetchPolicy:"cache-first",errorPolicy:"ignore"},query:{fetchPolicy:"cache-first",errorPolicy:"all"},mutate:{errorPolicy:"all"}}}),e.abrupt("return",{client:O});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cn={breakpoints:["40em","52em","64em"],colors:{app:$e,appInverse:qe,primary:We,secondary:Qe,tertiary:Ve,positive:He,negative:Je,warning:Ke,lightest:Ze,lighter:Ge,light:Ye,mediumlight:Xe,medium:en,mediumdark:nn,dark:tn,darker:rn,darkest:an,border:on},variants:{negative:{bg:Je,color:Ye},positive:{bg:He,color:Ye},warning:{bg:Ke,color:rn},avatar:{borderRadius:"100% !important"}},text:{subhead:{fontFamily:cn.primary,fontSize:ln.s3,color:tn,textTransform:"capitalize",letterSpacing:"0.5px",fontWeight:"600"},suptitle:{fontFamily:cn.primary,fontSize:ln.s1,color:tn,textTransform:"uppercase",letterSpacing:"1px",fontWeight:"700"},link:{fontFamily:cn.primary,fontSize:ln.s2,color:tn,letterSpacing:".5px",fontWeight:"600"},text:{fontFamily:cn.primary,fontSize:ln.s2,color:tn,letterSpacing:".5px",fontWeight:"500"},heading:{fontFamily:cn.primary,fontSize:ln.m3,color:tn,letterSpacing:"1px",fontWeight:"800"}},buttons:{primary:{fontWeight:"600",height:"40px",px:4,backgroundColor:We,borderRadius:"4px",fontSize:ln.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},danger:{fontWeight:"600",height:"40px",px:4,backgroundColor:Je,color:Ge,borderRadius:"4px",fontSize:ln.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},outline:{fontWeight:"600",height:"40px",px:4,backgroundColor:"transparent",borderRadius:"4px",fontSize:ln.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",color:tn,border:"1px solid ".concat(We)}},space:["0px","4px","8px","16px","32px","64px","128px","256px"],fontFamily:cn.primary},In=function(e){var n=e.children,t=e.theme,r=void 0===t?Cn:t;return x.a.createElement(j.ThemeProvider,{theme:r},n)},Fn=t(39),Tn=j.default,Sn=(j.css,j.createGlobalStyle,j.keyframes,j.ThemeProvider,j.withTheme,Tn),Pn=t(2);function Mn(){var e=Object(o.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return Mn=function(){return e},e}function _n(){var e=Object(o.a)(["\n  color: ",";\n  text-transform: capitalize;\n"]);return _n=function(){return e},e}function Ln(){var e=Object(o.a)(["\n  flex: auto;\n  align-items: center;\n"]);return Ln=function(){return e},e}var Un=function(e){var n=e.name;return x.a.createElement(Bn,null,x.a.createElement(An,null,x.a.createElement(Rn,{ml:2,variant:"suptitle"},n)))},An=Sn(Pn.Flex)(Ln()),Rn=Sn(Pn.Text)(_n(),(function(e){return e.theme.colors.darker})),Bn=Sn(Pn.Flex)(Mn(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function zn(){var e=Object(o.a)(["\ncolor: ","\nfont-size: ",";\na {\n  color: ","\n  text-decoration: none;\n}\n  "]);return zn=function(){return e},e}function Nn(){var e=Object(o.a)(["\n  padding: 16px;\n"]);return Nn=function(){return e},e}function Dn(){var e=Object(o.a)(["\n  text-transform: capitalize;\n  border-bottom: ",";\n  padding: 16px;\n  color: ",";\n  font-size: ",";\n  font-weight: 600;\n"]);return Dn=function(){return e},e}function $n(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return $n=function(){return e},e}function qn(){var e=Object(o.a)(["\n  position: sticky;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n"]);return qn=function(){return e},e}function Wn(){var e=Object(o.a)(["\n   display: none;\n  "]);return Wn=function(){return e},e}function Qn(){var e=Object(o.a)(["\n  width: 290px;\n"]);return Qn=function(){return e},e}function Vn(){var e=Object(o.a)(["\n  width: 240px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-left: 8px;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return Vn=function(){return e},e}var Hn=Sn(Pn.Flex)(Vn(),(function(e){return e.theme.fontFamily}),k.a.lessThan("1095px")(Qn()),k.a.lessThan("1005px")(Wn())),Jn=(Sn(Pn.Flex)(qn()),Sn(Pn.Box)($n(),(function(e){return e.theme.colors.appInverse}))),Kn=Sn(Pn.Text)(Dn(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.darker}),ln.s1),Zn=Sn(Pn.Box)(Nn()),Gn=Sn(Pn.Text)(zn(),(function(e){return e.theme.colors.dark}),ln.s2,(function(e){return e.theme.colors.dark})),Yn=t(4);t(497);function Xn(){var e=Object(o.a)(["\n  background-color: ",";\n"]);return Xn=function(){return e},e}var et=Sn(Pn.Box)(Xn(),(function(e){return"primary"===e.color?"#ffffffeb":e.theme.colors.primary}));var nt=function(e){var n=Object.assign({},e);return h.createElement("div",Object.assign({className:"spinner"},n),h.createElement(et,{color:n.variant,className:"bounce1"}),h.createElement(et,{color:n.variant,className:"bounce2"}),h.createElement(et,{color:n.variant,className:"bounce3"}))},tt=t(21);function rt(){var e=Object(o.a)(["\n  ",";\n  width: ",";\n  border-radius: ",";\n  padding: ",";\n  opacity: ",";\n  cursor: ",";\n  &:hover && not:['disabled'] {\n    background: ","\n"]);return rt=function(){return e},e}var at=Sn(Pn.Button)(rt(),Object(tt.e)("background, 0.2s"),(function(e){return!0===e.isIcon?"40px":"auto"}),(function(e){return!0===e.isIcon?"100%":"4px"}),(function(e){return!0===e.isIcon?"0px":"auto"}),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"pointer"}),(function(e){switch(e.variant){case"primary":case"danger":return Object(tt.b)("0.1",e.theme.colors.primary);default:Object(tt.d)("0.3",e.theme.colors.primary)}})),ot=function(e){return x.a.createElement(at,Object.assign({},e,{isSubmitting:e.isSubmitting,disabled:e.isDisabled,isIcon:e.isIcon,variant:e.variant}),e.isSubmitting?x.a.createElement(nt,{variant:e.variant}):e.children)};function it(){var e=Object(o.a)(["\n  background: ",";\n  button {\n    width: 100%;\n  }\n"]);return it=function(){return e},e}var ct=function(e){return x.a.createElement(lt,{p:2},x.a.createElement(ot,{isSubmitting:e.LoadMoreFormik.isSubmitting,isDisabled:e.LoadMoreFormik.isSubmitting,onClick:e.LoadMoreFormik.submitForm,variant:"outline"},x.a.createElement(Yn.Trans,{id:"Load more"})))},lt=Sn(Pn.Box)(it(),(function(e){return e.theme.colors.appInverse}));function ut(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 16px;\n  row-gap: 16px;\n  margin: 16px;\n  margin-bottom: 24px !important;\n"]);return ut=function(){return e},e}function mt(){var e=Object(o.a)(["\n  border-bottom: ",";\n"]);return mt=function(){return e},e}function st(){var e=Object(o.a)(["\n  background: ",";\n\n  &.replies > div {\n    margin-bottom: 0;\n    border-bottom: ",";\n  }\n  > div {\n    &:last-of-type {\n      margin-bottom: 4px;\n      border-bottom: 0;\n    }\n  }\n"]);return st=function(){return e},e}function dt(){var e=Object(o.a)(["\n  border-bottom: ",";\n  border-top: ",";\n  height: 60px;\n  // margin-top: 16px;\n  padding: 12px 8px;\n  background: ",";\n  a {\n    font-weight: 600;\n    text-decoration: none;\n    margin-right: 8px;\n    color: ",";\n    letterspacing: 1px;\n    padding: 0px 8px;\n    line-height: 34px;\n    white-space: nowrap;\n    &.active,\n    &:hover {\n      color: ",";\n      background: ",";\n      border-radius: 4px;\n    }\n  }\n"]);return dt=function(){return e},e}function ft(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  & ul {\n    display: block;\n\n    & li {\n      display: inline-block;\n\n      & h5 {\n        font-weight: 500;\n      }\n    }\n  }\n  & h4 {\n    margin: 0;\n    font-weight: 400 !important;\n    color: #151b26;\n    line-height: 40px;\n  }\n"]);return ft=function(){return e},e}function vt(){var e=Object(o.a)(["\n  width: 100%;\n  margin: 0 auto;\n  height: 100%;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  display: flex;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  // background: ",";\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n"]);return vt=function(){return e},e}function pt(){var e=Object(o.a)(["\n  //   width: 100%;\n  // "]);return pt=function(){return e},e}function gt(){var e=Object(o.a)(["\n  width: 600px;\n  align-items: flex-start;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: auto;\n  flex-direction: column;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  // ",";\n"]);return gt=function(){return e},e}function bt(){var e=Object(o.a)(["\n  align-items: stretch;\n  flex-grow: 1;\n  flex-direction: row;\n  width: 100%;\n"]);return bt=function(){return e},e}function ht(){var e=Object(o.a)(["\n  > div:last-of-type {\n    border-bottom: none;\n  }\n"]);return ht=function(){return e},e}var xt=Sn(Pn.Box)(ht()),Et=Sn(Pn.Flex)(bt()),yt=Sn(Pn.Flex)(gt(),k.a.lessThan("large")(pt())),Ot=Sn(Pn.Flex)(vt(),(function(e){return e.theme.colors.appInverse})),jt=Sn(Pn.Flex)(ft()),kt=Sn(Pn.Flex)(dt(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.darker}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),wt=Sn(Pn.Box)(st(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Ct=Sn(Pn.Box)(mt(),(function(e){return e.theme.colors.border})),It=Sn(Pn.Box)(ut()),Ft=function(e){var n=e.CollectionsBoxes,t=e.LoadMoreFormik;return h.createElement(h.Fragment,null,h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(Un,{name:"All Collections"}),h.createElement(wt,null,h.createElement(It,null,n)),t&&h.createElement(ct,{LoadMoreFormik:t})))),h.createElement(Hn,null)))};function Tt(){var e=Object(o.a)(["\n    fragment CommunityPreview on Community {\n  ...CommunityInfo\n  id\n  summary\n  myFlag {\n    id\n  }\n  collectionCount\n  followerCount\n  threads {\n    totalCount\n  }\n}\n    ",""]);return Tt=function(){return e},e}function St(){var e=Object(o.a)(["\n    fragment CommunityInfo on Community {\n  id\n  name\n  creator {\n    id\n  }\n  icon {\n    id\n    url\n  }\n  isLocal\n  myFollow {\n    id\n  }\n  canonicalUrl\n  displayUsername\n  preferredUsername\n}\n    "]);return St=function(){return e},e}var Pt=A()(St()),Mt=A()(Tt(),Pt);function _t(){var e=Object(o.a)(["\n    fragment CollectionPreview on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  isLocal\n  canonicalUrl\n  name\n  summary\n  resourceCount\n  displayUsername\n  myFlag {\n    id\n  }\n  myFollow {\n    id\n  }\n  preferredUsername\n  community {\n    id\n    ...CommunityInfo\n  }\n}\n    ",""]);return _t=function(){return e},e}var Lt=A()(_t(),Pt);function Ut(){var e=Object(o.a)(["\n    fragment FullPageInfo on PageInfo {\n  endCursor\n  hasNextPage\n  hasPreviousPage\n  startCursor\n}\n    "]);return Ut=function(){return e},e}var At=A()(Ut());function Rt(){var e=Object(o.a)(['\n    query allCollections($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collections(limit: $limit, before: $before, after: $after) @connection(key: "allCollections") {\n    edges {\n      ...CollectionPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return Rt=function(){return e},e}var Bt=A()(Rt(),Lt,At);var zt=function(e,n){return{query:Bt,variables:e,context:n}},Nt=t(19),Dt=function(e,n){var t=Object(h.useMemo)((function(){return $t(e,n)}),[e,n]),r=function(e){var n=Object(Nt.a)({initialValues:{},onSubmit:Object(h.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.next():void 0}),[e])}),t=Object(Nt.a)({initialValues:{},onSubmit:Object(h.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.previous():void 0}),[e])});return Object(h.useMemo)((function(){return[e.ready&&e.pageInfo.hasNextPage?n:null,e.ready&&e.pageInfo.hasPreviousPage?t:null]}),[n,t,e])}(t);return Object(h.useMemo)((function(){return Object(c.a)(Object(c.a)({},t),{},{formiks:r})}),[r,t])},$t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(!e)return{ready:!1,edges:[]};var t=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasNextPage&&n({cursor:{after:e.pageInfo.endCursor,before:void 0},update:qt,isNext:!0}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasPreviousPage&&n({cursor:{before:e.pageInfo.startCursor,after:void 0},update:Wt,isNext:!1}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=Object(c.a)(Object(c.a)({},e),{},{next:t,previous:r,ready:!!e});return o},qt=function(e){var n=e.fetched,t=e.prev;return Object(c.a)(Object(c.a)({},n),{},{edges:t.edges.concat(n.edges),totalCount:n.totalCount,pageInfo:Object(c.a)(Object(c.a)({},t.pageInfo),{},{endCursor:n.pageInfo.endCursor,hasNextPage:n.pageInfo.hasNextPage})})},Wt=function(e){var n=e.fetched,t=e.prev;return Object(c.a)(Object(c.a)({},n),{},{edges:n.edges.concat(t.edges),totalCount:n.totalCount,pageInfo:Object(c.a)(Object(c.a)({},t.pageInfo),{},{startCursor:n.pageInfo.startCursor,hasPreviousPage:n.pageInfo.hasPreviousPage})})},Qt=function(){var e,n,t=(n={variables:{limit:Ee}},q.d(Bt,n)),r=Dt(null===(e=t.data)||void 0===e?void 0:e.collections,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.collections)&&e.collections?Object(c.a)(Object(c.a)({},t),{},{collections:r({prev:e.collections,fetched:t.collections})}):e}})}));return Object(h.useMemo)((function(){return{allCollectionsPage:r}}),[r])},Vt=t(734),Ht=t(15);function Jt(){var e=Object(o.a)(["\n  text-decoration: none;\n"]);return Jt=function(){return e},e}var Kt=function(e){var n=e.link,t=e.children;return n.external?x.a.createElement("a",{href:n.url,rel:"noopener noreferrer",target:"_blank"},t):x.a.createElement(Zt,{to:n.url},t)},Zt=Sn(Ht.b)(Jt());function Gt(){var e=Object(o.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return Gt=function(){return e},e}function Yt(){var e=Object(o.a)(["\n  border-radius: 4px;\n  border: ",";\n  background: ",";\n  text-decoration: none;\n  position: relative;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none !important;\n    &:hover {\n      text-decoration: none !important;\n    }\n  }\n"]);return Yt=function(){return e},e}function Xt(){var e=Object(o.a)(["\n  align-items: center;\n\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 2px 8px;\n  text-align: center;\n  font-size: ",";\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    background: ",";\n    border-color: ",";\n    div {\n      color: ",";\n    }\n  }\n"]);return Xt=function(){return e},e}function er(){var e=Object(o.a)(['\n  border-radius: 4px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  min-width: 48px;\n  height: 48px;\n  padding: 15%;\n  background-color: transparent;\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return er=function(){return e},e}function nr(){var e=Object(o.a)(["\n  color: ",";\n"]);return nr=function(){return e},e}function tr(){var e=Object(o.a)(["\n  color: ",";\n  svg {\n    margin: 0;\n  }\n"]);return tr=function(){return e},e}function rr(){var e=Object(o.a)(["\n  // color: red;\n  // a {\n  //   position: absolute;\n  //   top: 0;\n  //   left: 0;\n  //   right: 0;\n  //   bottom: 0;\n  //   z-index: 1;\n  // }\n"]);return rr=function(){return e},e}function ar(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return ar=function(){return e},e}function or(){var e=Object(o.a)([""]);return or=function(){return e},e}function ir(){var e=Object(o.a)(["\n  flex: 1;\n"]);return ir=function(){return e},e}function cr(){var e=Object(o.a)(["\n  margin: 8px;\n"]);return cr=function(){return e},e}function lr(){var e=Object(o.a)(["\n  height: 150px;\n  background: ",';\n  border-radius: 4px;\n  grid-area: big;\n\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return lr=function(){return e},e}function ur(){var e=Object(o.a)(['\n  display: grid;\n  // grid-template-rows: 150px 90px;\n  grid-template-rows: 150px;\n  grid-template-areas: \'big big big\';\n  // grid-template-areas: "big big big"\n  //                       "small small small ";\n  column-gap: 4px;\n  row-gap: 4px;\n']);return ur=function(){return e},e}function mr(){var e=Object(o.a)(["\n  max-width: 300px;\n  position: relative;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid #ececec;\n"]);return mr=function(){return e},e}function sr(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n  margin-top: 4px;\n  font-size: ",";\n  ",";\n"]);return sr=function(){return e},e}function dr(){var e=Object(o.a)(["\n  color: ",";\n  align-items: center;\n  position: relative;\n  z-index: 99999999;\n"]);return dr=function(){return e},e}function fr(){var e=Object(o.a)(["\n  padding: 8px;\n  background-color: ",";\n  font-weight: 700;\n  text-transform: uppercase;\n  color: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return fr=function(){return e},e}var vr=function(e){var n=e.link,t=e.icon,r=e.name,a=(e.summary,e.displayUsername,e.totalResources),o=e.isFollowing,i=e.toggleFollowFormik,c=e.hideActions,l=e.isSearch;return h.createElement(hr,null,l&&h.createElement(pr,{variant:"text"},h.createElement(Yn.Trans,{id:"Collection"})),h.createElement(wr,{link:n},h.createElement(xr,null,h.createElement(Er,{src:t})),h.createElement(yr,null,h.createElement(br,null,r),h.createElement(gr,null,h.createElement(Or,{variant:"text"},a||0," ",h.createElement(Yn.Trans,{id:"Resources"})),h.createElement(jr,null,c?null:h.createElement(Cr,{bordered:!0,isFollowing:!!o,onClick:function(e){e.preventDefault(),i.submitForm()}},h.createElement(kr,{ml:1,variant:"suptitle",sx:{textTransform:"capitalize"}},o?h.createElement(Yn.Trans,{id:"Following"}):h.createElement(Yn.Trans,{id:"follow"}))))))))},pr=Sn(Pn.Text)(fr(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.dark})),gr=Sn(Pn.Flex)(dr(),(function(e){return e.theme.colors.mediumdark})),br=Sn(Pn.Heading)(sr(),(function(e){return e.theme.colors.darker}),ln.m1,Object(tt.c)("250px")),hr=Sn(Pn.Box)(mr()),xr=Sn(Pn.Box)(ur()),Er=Sn(Pn.Box)(lr(),(function(e){return e.theme.colors.medium}),(function(e){return e.src})),yr=Sn(Pn.Box)(cr()),Or=Sn(Pn.Text)(ir()),jr=Sn(Pn.Box)(or()),kr=Sn(Pn.Text)(ar(),(function(e){return e.theme.colors.darker})),wr=Sn(Kt)(rr()),Cr=(Sn(Pn.Flex)(tr(),(function(e){return e.theme.colors.dark})),Sn(Pn.Text)(nr(),(function(e){return e.theme.colors.dark})),Sn(Pn.Box)(er(),(function(e){return e.src})),Sn(Pn.Flex)(Xt(),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.darker}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),ln.s1,(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.theme.colors.lightest})));Sn(Pn.Flex)(Yt(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(tt.b)("0.05",e.theme.colors.appInverse)})),Sn(Pn.Box)(Gt());function Ir(){var e=Object(o.a)(['\n    query myCollectionFollows {\n  me @connection(key: "myCollectionFollows") {\n    ...MyCollectionFollowsData\n  }\n}\n    ',""]);return Ir=function(){return e},e}function Fr(){var e=Object(o.a)(["\n    fragment MyCollectionFollowsData on Me {\n  user {\n    id\n    collectionFollows {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...MyFollowedCollectionData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Fr=function(){return e},e}function Tr(){var e=Object(o.a)(["\n    fragment MyFollowedCollectionData on Collection {\n  ...CollectionPreview\n}\n    ",""]);return Tr=function(){return e},e}var Sr=A()(Tr(),Lt),Pr=A()(Fr(),At,Sr),Mr=A()(Ir(),Pr);var _r=function(e,n){return{query:Mr,variables:e,context:n}};function Lr(){var e=Object(o.a)(['\n    query myCommunityFollows($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  me @connection(key: "myCommunityFollows") {\n    ...MyCommunityFollowsData\n  }\n}\n    ',""]);return Lr=function(){return e},e}function Ur(){var e=Object(o.a)(["\n    fragment MyCommunityFollowsData on Me {\n  user {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...MyFollowedCommunityData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Ur=function(){return e},e}function Ar(){var e=Object(o.a)(["\n    fragment MyFollowedCommunityData on Community {\n  ...SidebarFollowedCommunity\n  ...CommunityPreview\n}\n    ","\n",""]);return Ar=function(){return e},e}var Rr=A()(Ar(),D,Mt),Br=A()(Ur(),At,Rr),zr=A()(Lr(),Br);var Nr=function(e,n){return{query:zr,variables:e,context:n}},Dr=function(e){return"#"===e};function $r(){var e=Object(o.a)(["\n    mutation unfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Follow {\n      context {\n        ... on Collection {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on Community {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on User {\n          userId: id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n      }\n    }\n  }\n}\n    "]);return $r=function(){return e},e}function qr(){var e=Object(o.a)(["\n    mutation follow($contextId: String!) {\n  createFollow(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on Community {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on User {\n        userId: id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n    }\n  }\n}\n    "]);return qr=function(){return e},e}var Wr=A()(qr());var Qr=A()($r());function Vr(){var e=Object(o.a)(["\n    fragment UserPreview on User {\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  userId: id\n  userName: name\n  displayUsername\n  summary\n  canonicalUrl\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n}\n    "]);return Vr=function(){return e},e}var Hr=A()(Vr());function Jr(){var e=Object(o.a)(['\n    query collectionFollowers($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionFollowers", filter: ["collectionId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CollectionFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Jr=function(){return e},e}function Kr(){var e=Object(o.a)(["\n    fragment CollectionFollower on User {\n  ...UserPreview\n}\n    ",""]);return Kr=function(){return e},e}var Zr=A()(Kr(),Hr),Gr=A()(Jr(),At,Zr);var Yr=function(e,n){return{query:Gr,variables:e,context:n}};function Xr(){var e=Object(o.a)(['\n    query communityFollowers($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityFollowers", filter: ["communityId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CommunityFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Xr=function(){return e},e}function ea(){var e=Object(o.a)(["\n    fragment CommunityFollower on User {\n  ...UserPreview\n}\n    ",""]);return ea=function(){return e},e}var na=A()(ea(),Hr),ta=A()(Xr(),At,na);var ra=function(e,n){return{query:ta,variables:e,context:n}},aa=function(e,n){if(!!!e.extraInfo)return Object(c.a)(Object(c.a)({},e),{},{extraInfo:void 0});var t=null===n||void 0===n?void 0:n.extraInfo,r=JSON.stringify(Object(c.a)(Object(c.a)({},t),e.extraInfo));return Object(c.a)(Object(c.a)({},e),{},{extraInfo:r})},oa=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ia=function(e){return"string"===typeof e&&oa.test(e)},ca=function(e,n){return!e||ia(e)&&e===n?void 0:e instanceof File||ia(e)?la(e):void 0},la=function(e){return ia(e)?{url:e}:{upload:e}},ua=function(){var e,n,t=(n={context:g({noShowError:!0})},q.d(K,n)),r=function(e){return q.c(Z,e)}(),o=Object(l.a)(r,2),c=o[0],u=o[1],m=function(e){return q.c(G,e)}(),s=Object(l.a)(m,2),d=s[0],f=s[1],v=Object(Fn.h)().push,p=null===(e=t.data)||void 0===e?void 0:e.me,b=t.loading,x=!!(null===p||void 0===p?void 0:p.isInstanceAdmin),E=Object(h.useCallback)(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.loading&&(null===p||void 0===p?void 0:p.user)){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",c({update:function(e){e.writeQuery({data:{__typename:"RootQueryType",me:null},query:K})}}).finally((function(){return v("/login")})));case 3:case"end":return e.stop()}}),e)}))),[u.loading,p,c,v]),y=Object(h.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,r,o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.icon,i=n.image,c=n.profile,!f.loading&&(null===p||void 0===p?void 0:p.user)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",d({variables:{profile:aa(c,p.user),icon:ca(o,null===(t=p.user.icon)||void 0===t?void 0:t.url),image:ca(i,null===(r=p.user.image)||void 0===r?void 0:r.url)},context:g({ctx:"Profile update"})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[d,p,f]);return Object(h.useMemo)((function(){return{me:p,isAdmin:x,logout:E,loading:b,updateProfile:y}}),[p,x,E,b,y])},ma=t(23),sa=t(140),da=t(386),fa=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="local"===e?localStorage:sessionStorage,r=function(e){return"".concat(n).concat(e)},a=function(n){return va(t.getItem(r(n)),e,r(n))},o=function(e,n){return t.setItem(r(e),pa(n))},i=function(e){var n=a(r(e));return t.removeItem(r(e)),n};return{get:a,set:o,del:i}}},va=function(e,n,t){if(null===e)return null;try{return JSON.parse(e)}catch(r){return console.warn("KVStore[".concat(n,"]#parse: could not parse ").concat(e," at key [").concat(t,"]")),null}},pa=function(e){return JSON.stringify(e)},ga=fa("local")("LOCALIZATION"),ba=ga.get("#locale"),ha=ba&&_e.find((function(e){return e.code===ba}))||_e[0],xa=Object(da.setupI18n)({locales:_e.map((function(e){return e.code}))}),Ea=Object(h.createContext)({current:ha,i18n:xa,available:_e,set:function(){}}),ya=function(e){var n=e.children,t=Object(h.useState)(ha),r=Object(l.a)(t,2),a=r[0],o=r[1],i=Object(h.useState)({}),m=Object(l.a)(i,2),s=m[0],d=m[1];Object(h.useEffect)((function(){ja(a.rtl),s[a.code]||Oa(a.code).then((function(e){return d(Object(c.a)(Object(c.a)({},s),{},Object(u.a)({},a.code,e)))})).catch((function(e){return console.error("Error loading Locale: ".concat(a.code),e)}))}),[s,a]);var f=Object(h.useCallback)((function(e){o(e);var n,t=e.code;sa.Settings.defaultLocale=t.split("_")[0],n=t,ga.set("#locale",n)}),[o]),v=Object(h.useMemo)((function(){return{current:a,available:_e,i18n:xa,set:f}}),[a,f]);return x.a.createElement(Yn.I18nProvider,{i18n:xa,language:a.code,catalogs:s},x.a.createElement(Ea.Provider,{value:v},n))},Oa=function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=4;break;case 4:return e.abrupt("return",t(501)("./".concat(n,"/messages.js")));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ja=function(e){var n=document.querySelector("html");if(n){var t=e?"rtl":"ltr";n.style.direction=t,n.classList.remove("--rtl","--ltr"),n.classList.add("--".concat(t))}};function ka(){var e=Object(o.a)(["\n  margin-top: 8px;\n  margin-bottom: 40px;\n  color: #000000a1;\n  font-weight: 500;\n"]);return ka=function(){return e},e}function wa(){var e=Object(o.a)(['\n  background: url("','");\n  width: 300px;\n  display: inline-block;\n  height: 100px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n']);return wa=function(){return e},e}function Ca(){var e=Object(o.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return Ca=function(){return e},e}var Ia=function(e){var n=x.a.useContext(Ea).i18n;return x.a.createElement(Fa,null,e.isHome?x.a.createElement(Ta,null):x.a.createElement(Ht.b,{to:"/"},x.a.createElement(Ta,null)),x.a.createElement(Sa,null,n._("Co-creating circular and regenerative resource flows in cities")),x.a.createElement(Sa,null,""))},Fa=Sn.div(Ca()),Ta=Sn.div(wa(),"https://pbs.twimg.com/profile_images/1176826011293556738/9jzWwP_g.png"),Sa=Sn.h5(ka());function Pa(){var e=Object(o.a)(["\n  width: 10px;\n  height: 10px;\n"]);return Pa=function(){return e},e}function Ma(){var e=Object(o.a)(["\n  margin: 0;\n  margin-bottom: 16px;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return Ma=function(){return e},e}function _a(){var e=Object(o.a)(["\n  text-align: center;\n  text-decoration: underline;\n  cursor: pointer;\n  a {\n    color: inherit;\n  }\n"]);return _a=function(){return e},e}function La(){var e=Object(o.a)(["\n  position: relative;\n  color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n  margin-top: 24px;\n  &:before {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    left: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n  &:after {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    right: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n"]);return La=function(){return e},e}function Ua(){var e=Object(o.a)(["\n  background: ",";\n  a {\n    text-decoration: none;\n    color: ",";\n    button {\n      color: "," !important;\n    }\n  }\n"]);return Ua=function(){return e},e}function Aa(){var e=Object(o.a)(["\n  .extra {\n    width: 100%;\n    margin-left: 0px;\n  }\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n"]);return Aa=function(){return e},e}function Ra(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n"]);return Ra=function(){return e},e}function Ba(){var e=Object(o.a)(["\n  grid-area: form;\n"]);return Ba=function(){return e},e}function za(){var e=Object(o.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding-bottom: 50px;\n"]);return za=function(){return e},e}function Na(){var e=Object(o.a)(["\n    grid-template-columns: 1fr;\n    grid-template-areas: 'header' 'image' 'form' 'footer';\n    padding: 16px\n  "]);return Na=function(){return e},e}function Da(){var e=Object(o.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  grid-template-areas: 'header header' 'form image' 'footer footer';\n  ",";\n"]);return Da=function(){return e},e}function $a(){var e=Object(o.a)([""]);return $a=function(){return e},e}function qa(){var e=Object(o.a)([""]);return qa=function(){return e},e}function Wa(){var e=Object(o.a)(['\n  background: url("','");\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  padding: 50%;\n  width: 400px;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n']);return Wa=function(){return e},e}var Qa={login:Object(Yn.i18nMark)("Sign in"),placeholders:{email:Object(Yn.i18nMark)("Enter your email"),password:Object(Yn.i18nMark)("Enter your password")}},Va=function(e){var n=e.formik,t=h.useContext(Ea).i18n;return h.createElement(h.Fragment,null,h.createElement(Ga,null,h.createElement(Za,null,h.createElement(Ia,{isHome:!0}),h.createElement(Ya,null,h.createElement(Xa,null,h.createElement(ao,null,h.createElement(Pn.Box,{p:3},h.createElement("form",{onSubmit:n.handleSubmit},h.createElement(ma.b,{placeholder:Qa.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),h.createElement(oo,null),h.createElement(ma.b,{type:"password",placeholder:Qa.placeholders.password,name:"password",value:n.values.password,onChange:n.handleChange}),h.createElement(ot,{mt:3,variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{width:"100%"}},h.createElement(Yn.Trans,{id:"Sign in"}))))),h.createElement(ro,{variant:"text",my:3,mt:2},h.createElement(Ht.b,{to:"/reset"},h.createElement(Yn.Trans,{id:"Trouble logging in?"})))),h.createElement(to,null,h.createElement(Yn.Trans,{id:"Or"})),h.createElement(no,{mt:3,p:3},h.createElement(Pn.Text,{variant:"heading"},h.createElement(Yn.Trans,{id:"Browse this instance"})),h.createElement(Pn.Text,{variant:"text",mt:2},t._("You don't need to sign up to preview what people are sharing and discussing publicly.")),h.createElement(Ht.b,{to:"/discover"},h.createElement(ot,{mt:3,variant:"outline"},h.createElement(Yn.Trans,{id:"Browse"}))))),h.createElement(eo,null,h.createElement(Ht.b,{to:"signup"},h.createElement(ot,{mb:2,style:{width:"100%",height:"50px"},variant:"outline"},h.createElement(Yn.Trans,{id:"Sign up"}))),h.createElement(Hn,{className:"extra"},h.createElement(Jn,null,h.createElement(Ha,null),h.createElement(Ja,{p:3},h.createElement(Ka,null,h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"Instance description"})),h.createElement(Pn.Text,{mt:2,variant:"text"},"Federated economic network for Reflow pilots")))))))))},Ha=Sn(Pn.Box)(Wa(),"https://reflowproject.eu/wp-content/uploads/2019/08/reflow-cocreation-1.png"),Ja=Sn(Pn.Box)(qa()),Ka=Sn(Pn.Box)($a()),Za=Sn.div(Da(),k.a.lessThan("medium")(Na())),Ga=Sn.div(za()),Ya=Sn.div(Ba()),Xa=Sn.div(Ra(),(function(e){return e.theme.colors.appInverse})),eo=Sn(Pn.Box)(Aa()),no=Sn(Pn.Box)(Ua(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),to=Sn.div(La()),ro=Sn(Pn.Text)(_a()),ao=Sn.div(Ma()),oo=Sn.div(Pa()),io=t(16),co=function(){var e,n=Object(q.a)(),t=q.c(le,e),r=Object(l.a)(t,2),a=r[0],o=r[1],i=function(e){return q.c(ie,e)}(),c=Object(l.a)(i,2),u=c[0],m=c[1],s=function(e){return q.c(ue,e)}(),d=Object(l.a)(s,2),f=d[0],v=d[1],p=function(e){return q.c(me,e)}(),b=Object(l.a)(p,2),x=b[0],E=b[1],y=function(e){return q.c(ce,e)}(),O=Object(l.a)(y,2),j=O[0],k=O[1];return Object(h.useMemo)((function(){return{login:function(e,n){if(!o.loading)return a({variables:{email:e,password:n},context:g({ctx:"Login"}),update:function(e,n){var t,r;return lo(e,null===(t=n.data)||void 0===t||null===(r=t.createSession)||void 0===r?void 0:r.me)}})},loginStatus:o,resetPwdReq:function(e){if(!k.loading)return j({variables:{email:e}})},resetPwdReqStatus:k,confirmEmail:function(e){if(!v.loading)return f({variables:{token:e},update:function(e,n){var t,r;return lo(e,null===(t=n.data)||void 0===t||null===(r=t.confirmEmail)||void 0===r?void 0:r.me)}})},confirmEmailStatus:v,signUp:function(e){if(!E.loading)return x({variables:{registration:e},update:function(e,n){var t;return lo(e,null===(t=n.data)||void 0===t?void 0:t.createUser)}})},signUpStatus:E,resetPwd:function(e){var n=e.password,t=e.token;if(!m.loading)return u({variables:{password:n,token:t},update:function(e,n){var t,r;return lo(e,null===(t=n.data)||void 0===t||null===(r=t.resetPassword)||void 0===r?void 0:r.me)}})},resetPwdStatus:m,usernameAvailable:function(e){return n.query({query:se,variables:{username:e}}).then((function(e){return e.data.usernameAvailable}))}}}),[E,x,f,v,a,o,u,m,j,k,n])},lo=function(e,n){e.writeQuery({query:K,data:{__typename:"RootQueryType",me:n?Object(c.a)(Object(c.a)({__typename:"Me"},n),{},{user:Object(c.a)({__typename:"User"},n.user)}):null}})},uo=t(387),mo=Object(h.createContext)({setTitle:function(e){return e}}),so=function(e){var n=e.children,t=Object(h.useContext)(Ea).i18n,r=Object(h.useState)(),a=Object(l.a)(r,2),o=a[0],i=a[1],u=Object(h.useCallback)((function(e,n){var r=!1===e?void 0:t._(Object(c.a)(Object(c.a)({},e),{},{values:n}));r!==o&&i(r)}),[t,o]),m=Object(h.useMemo)((function(){return{setTitle:u}}),[u]),s=o?"".concat("Reflow"," - ").concat(o):"Reflow";return x.a.createElement(mo.Provider,{value:m},x.a.createElement(uo.a,null,x.a.createElement("title",null,s)),n)},fo=function(e,n){var t=Object(h.useContext)(mo).setTitle;Object(h.useEffect)((function(){t(e,n)}),[t,e,n])},vo=io.object({email:io.string().max(50).required(),password:io.string().max(50).required()}),po={id:"Login"},go=function(){fo(po);var e=co().login,n=Object(Nt.a)({initialValues:{email:"",password:""},enableReinitialize:!0,onSubmit:function(n){var t=n.email,r=n.password;return e(t,r)},validationSchema:vo});return x.a.createElement(Va,{formik:n})},bo=Object(h.createContext)({isOpen:!0,toggleOpen:function(){return!0}}),ho=function(e){var n=e.children,t=Object(h.useReducer)((function(e){return!e}),!0),r=Object(l.a)(t,2),a=r[0],o=r[1],i=Object(h.useMemo)((function(){return{isOpen:a,toggleOpen:o}}),[a,o]);return x.a.createElement(bo.Provider,{value:i},n)};function xo(){var e=Object(o.a)(["\n    fragment ResourcePreview on Resource {\n  id\n  icon {\n    id\n    url\n  }\n  name\n  summary\n  canonicalUrl\n  payload: content {\n    id\n    mediaType\n    mirror {\n      url\n    }\n    upload {\n      size\n    }\n    url\n  }\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  likers {\n    totalCount\n  }\n  collection {\n    id\n    name\n    preferredUsername\n    canonicalUrl\n    icon {\n      id\n      url\n    }\n    summary\n    community {\n      id\n      ...CommunityInfo\n    }\n  }\n  license\n}\n    ",""]);return xo=function(){return e},e}var Eo=A()(xo(),Pt);function yo(){var e=Object(o.a)(["\n  fragment CommentPreviewThread on Thread {\n    id\n    isLocal\n    canonicalUrl\n    context {\n      ... on Collection {\n        ...CollectionPreview\n      }\n      ... on Resource {\n        ...ResourcePreview\n      }\n      ... on Community {\n        ...CommunityPreview\n      }\n    }\n  }\n  ","\n  ","\n",""]);return yo=function(){return e},e}function Oo(){var e=Object(o.a)(["\n  fragment CommentPreview on Comment {\n    ...CommentPreviewBase\n    id\n    inReplyTo {\n      ...CommentPreviewBase\n    }\n    likerCount\n    myLike {\n      id\n    }\n    myFlag {\n      id\n    }\n    thread {\n      id\n      comments(limit: 1) {\n        edges {\n          ...CommentPreviewBase\n        }\n      }\n      context {\n        ... on Flag {\n          id\n        }\n        ... on Community {\n          id\n          ...CommunityInfo\n        }\n        ... on Collection {\n          id\n          community {\n            id\n            ...CommunityInfo\n          }\n        }\n        ... on Resource { \n          id\n          collection {\n            id\n            community {\n              id\n              ...CommunityInfo\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n",""]);return Oo=function(){return e},e}function jo(){var e=Object(o.a)(["\n  fragment CommentPreviewBase on Comment {\n    id\n    isLocal\n    content\n    canonicalUrl\n    createdAt\n    creator {\n      icon {\n        id\n        url\n      }\n      image {\n        id\n        url\n      }\n      userId: id\n      userName: name\n      canonicalUrl\n    }\n  }\n"]);return jo=function(){return e},e}var ko=A()(jo()),wo=A()(Oo(),ko,Pt);A()(yo(),Lt,Eo,Mt);function Co(){var e=Object(o.a)(["\n    fragment FlagPreview on Flag {\n  id\n  message\n  isResolved\n  creator {\n    ...UserPreview\n  }\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Co=function(){return e},e}var Io=A()(Co(),Hr,Mt,Lt,Eo,wo);function Fo(){var e=Object(o.a)(["\n    fragment LikePreview on Like {\n  id\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Fo=function(){return e},e}var To=A()(Fo(),Mt,Lt,Eo,Hr,wo);function So(){var e=Object(o.a)(["\n    fragment FollowPreview on Follow {\n  id\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n  }\n}\n    ","\n","\n",""]);return So=function(){return e},e}var Po=A()(So(),Mt,Lt,Hr);function Mo(){var e=Object(o.a)(["\n    fragment ActivityPreview on Activity {\n  id\n  verb\n  createdAt\n  user {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n    ... on Flag {\n      ...FlagPreview\n    }\n    ... on Like {\n      ...LikePreview\n    }\n    ... on Follow {\n      ...FollowPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return Mo=function(){return e},e}var _o=A()(Mo(),Mt,Lt,Eo,Hr,wo,Io,To,Po);function Lo(){var e=Object(o.a)(['\n    query instanceOutboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  instance @connection(key: "instanceOutboxActivities") {\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...InstanceOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return Lo=function(){return e},e}function Uo(){var e=Object(o.a)(["\n    fragment InstanceOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return Uo=function(){return e},e}var Ao=A()(Uo(),_o),Ro=A()(Lo(),At,Ao);var Bo=function(e,n){return{query:Ro,variables:e,context:n}};function zo(){var e=Object(o.a)(['\n    query allCommunities($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  communities(limit: $limit, before: $before, after: $after) @connection(key: "allCommunities") {\n    edges {\n      ...CommunityPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return zo=function(){return e},e}var No=A()(zo(),Mt,At);function Do(){var e=Object(o.a)(["\n    fragment HeroCommunityMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return Do=function(){return e},e}function $o(){var e=Object(o.a)(["\n    fragment HeroCommunityData on Community {\n  id\n  displayUsername\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  followerCount\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return $o=function(){return e},e}var qo=A()($o());A()(Do());function Wo(){var e=Object(o.a)(["\n  fragment ThreadPreview on Thread {\n    id\n    lastActivity\n    createdAt\n    context {\n      ... on Community {\n        ...CommunityPreview\n      }\n      ... on Collection {\n        ...CollectionPreview\n      }\n      ... on Resource {\n        ...ResourcePreview\n      }\n      ... on Flag {\n        ...FlagPreview\n      }\n    }\n    comments(limit: 1) {\n      totalCount\n      edges {\n        ... on Comment {\n          ...CommentPreview\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Wo=function(){return e},e}var Qo=A()(Wo(),Mt,Lt,Eo,Io,wo);function Vo(){var e=Object(o.a)(["\n  fragment CommunityPageActivityBase on Activity {\n    id\n    ...ActivityPreview\n  }\n  ","\n"]);return Vo=function(){return e},e}function Ho(){var e=Object(o.a)(["\n  fragment CommunityPageCollectionBase on Collection {\n    id\n    ...CollectionPreview\n  }\n  ","\n"]);return Ho=function(){return e},e}function Jo(){var e=Object(o.a)(["\n  fragment CommunityPageThread on Thread {\n    id\n    ...ThreadPreview\n  }\n  ","\n"]);return Jo=function(){return e},e}function Ko(){var e=Object(o.a)(["\n  fragment CommunityPageData on Community {\n    id\n    myFollow {\n      id\n    }\n    ...HeroCommunityData\n  }\n  ","\n"]);return Ko=function(){return e},e}var Zo=A()(Ko(),qo),Go=A()(Jo(),Qo),Yo=A()(Ho(),Lt);A()(Vo(),_o);function Xo(){var e=Object(o.a)(["\n    mutation createCommunity($community: CommunityInput!, $icon: UploadInput) {\n  createCommunity(community: $community, icon: $icon) {\n    ...CommunityPageData\n  }\n}\n    ",""]);return Xo=function(){return e},e}var ei=A()(Xo(),Zo);var ni=function(){var e,n=q.c(ei,e),t=Object(l.a)(n,2),r=t[0],o=t[1],c=eC(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.community,i=n.icon,!o.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{icon:ca(i,null),community:{name:t.name,summary:t.summary,preferredUsername:t.preferredUsername}},refetchQueries:[Nr({}),Bo({limit:Ee}),(a={limit:Ee},c=void 0,{query:No,variables:a,context:c})]}));case 4:case"end":return e.stop()}var a,c}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,r]);return Object(h.useMemo)((function(){return{create:c}}),[c])},ti=t(399),ri=t(735),ai=t(736);function oi(){var e=Object(o.a)(["\n    display: block;\n    border-radius: 4px;\n    height: inherit;\n    background-size: cover;\n}\n"]);return oi=function(){return e},e}function ii(){var e=Object(o.a)(["\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  height: 120px;\n  &:after {\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    border-radius: 4px;\n    display: block;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  &:hover {\n    &:after {\n      background: rgba(0, 0, 0, 0.1);\n    }\n  }\n  svg {\n    width: 40px;\n  }\n"]);return ii=function(){return e},e}function ci(){var e=Object(o.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n"]);return ci=function(){return e},e}function li(){var e=Object(o.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n"]);return li=function(){return e},e}function ui(){var e=Object(o.a)(["\n  width: 40px;\n  height: 40px;\n  align-items: center;\n  border-radius: 100px;\n  position: absolute;\n  left: 50%;\n  margin-left: -20px;\n  top: 50%;\n  margin-top: -20px;\n  z-index: 9;\n"]);return ui=function(){return e},e}function mi(){var e=Object(o.a)(["\n  margin-bottom: 0px;\n  margin-top: 5px;\n  font-weight: bold;\n  text-align: center;\n  font-style: italic;\n"]);return mi=function(){return e},e}function si(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  box-sizing: border-box;\n  height: inherit;\n  margin: 0px;\n  &.active {\n    border: 1px dashed ",";\n  }\n  .;\n"]);return si=function(){return e},e}var di=function(e){var n=e.initialUrl,t=e.uploadType,r=e.onFileSelect,a=e.filePattern,o=Object(h.useState)(),i=Object(l.a)(o,2),c=i[0],u=i[1],m=Object(h.useState)(),s=Object(l.a)(m,2),d=s[0],f=s[1];Object(h.useEffect)((function(){return function(){c&&URL.revokeObjectURL(c)}}),[c]),Object(h.useEffect)((function(){u(n)}),[n]);var v=Object(ti.a)({accept:a,onDrop:function(e){var n=e[0];if(!n)return r(void 0),void f(void 0);r(n),f({file:n,localUrl:URL.createObjectURL(n)})}}),p=v.getRootProps,g=v.getInputProps,b=v.isDragActive;return x.a.createElement(x.a.Fragment,null,x.a.createElement(Pn.Box,Object.assign({sx:{height:"100%"}},p({className:"dropzone"})),x.a.createElement(fi,{className:b?"active":"none"},d||"resource"!==t?null:x.a.createElement(hi,{className:"thumb"},x.a.createElement(pi,null,x.a.createElement(ri.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"}))),"resource"!==t?x.a.createElement(hi,{className:"thumb"},x.a.createElement(pi,null,x.a.createElement(ai.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),x.a.createElement(xi,{style:{backgroundImage:'url("'.concat(d?d.localUrl:c,'")')}})):null,d&&"resource"===t?-1===d.file.type.indexOf("image")?x.a.createElement(bi,null,x.a.createElement(ri.a,{size:20}),d&&x.a.createElement(vi,null,d.file.name)):x.a.createElement(gi,null,x.a.createElement(hi,null,x.a.createElement(pi,null,x.a.createElement(ai.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),x.a.createElement(xi,{style:{backgroundImage:'url("'.concat(d.localUrl,'")')}})),x.a.createElement(vi,null,d&&d.file.name)):null,x.a.createElement("input",g()))))},fi=Sn.div(si(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),vi=Sn.p(mi()),pi=Sn(Pn.Flex)(ui()),gi=Sn.div(li()),bi=Sn.div(ci()),hi=Sn.div(ii()),xi=Sn(Pn.Box)(oi());function Ei(){var e=Object(o.a)(["\n  border-radius: 4px;\n  line-height: 26px;\n  padding: 8px 16px;\n  font-family: ",";\n  font-weight: 600;\n"]);return Ei=function(){return e},e}var yi=Sn(Pn.Box)(Ei(),(function(e){return e.theme.fontFamily})),Oi=function(e){var n=e.variant,t=e.children;return h.createElement(yi,{variant:n||"info"},t)},ji=t(193),ki=t(390),wi=t(207),Ci=t(205),Ii=t(737);function Fi(){var e=Object(o.a)(["\n    display: block;\n\n  "]);return Fi=function(){return e},e}function Ti(){var e=Object(o.a)(["\n    width: 100%;\n  "]);return Ti=function(){return e},e}function Si(){var e=Object(o.a)(["\n  ",";\n  border-bottom: 1px solid ",";\n  height: ",";\n  display: flex;\n  padding: 20px;\n  & textarea {\n    height: 120px;\n  }\n  & label {\n    width: 200px;\n    line-height: 40px;\n    ",";\n  }\n\n  ",";\n"]);return Si=function(){return e},e}function Pi(){var e=Object(o.a)(["\n  padding: 0 16px;\n  padding-top: 16px;\n  // border-bottom: 1px solid ",";\n  & h5 {\n    text-align: center !important;\n    margin: 0 !important;\n  }\n"]);return Pi=function(){return e},e}function Mi(){var e=Object(o.a)(["\n  flex: 1;\n  ",";\n  input {\n    height: 40px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n  }\n  textarea {\n    line-height: 20px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n    font-family: ",";\n  }\n"]);return Mi=function(){return e},e}function _i(){var e=Object(o.a)(["\n  float: right;\n  text-transform: uppercase;\n  background: #d0d9db;\n  padding: 2px 10px;\n  font-weight: 600;\n  margin-top: 4px;\n  color: #32302e;\n  letter-spacing: 1px;\n  margin-bottom: 10px;\n\n  &::after {\n    clear: both;\n    content: '';\n    display: table;\n  }\n"]);return _i=function(){return e},e}function Li(){var e=Object(o.a)(["\n  ",";\n  padding-top: 10px;\n  padding-right: 10px;\n  & button {\n    float: right;\n  }\n"]);return Li=function(){return e},e}function Ui(){var e=Object(o.a)(["\n  font-family: ",";\n"]);return Ui=function(){return e},e}function Ai(){var e=Object(o.a)(["\n  ",";\n  font-family: ",";\n"]);return Ai=function(){return e},e}function Ri(){var e=Object(o.a)(["\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  cursor: pointer;\n  background: ",";\n  width: 24px;\n  height: 24px;\n  border-radius: 40px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return Ri=function(){return e},e}function Bi(){var e=Object(o.a)(["\n  ",";\n  position: relative;\n"]);return Bi=function(){return e},e}function zi(){var e=Object(o.a)(["\n    width: auto;\n    margin: 0;\n    left: 8px;\n    right: 8px;\n  "]);return zi=function(){return e},e}function Ni(){var e=Object(o.a)(["\n  width: 700px;\n  box-shadow: 0 2px 8px 3px rgba(0, 0, 0, 0.3);\n  z-index: 9999999999;\n  background-color: #ffffff;\n  padding: 0;\n  margin: 40px auto;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -350px;\n  border-radius: 3px;\n  outline: none;\n  transform: translateY(-50%);\n\n  ",";\n"]);return Ni=function(){return e},e}function Di(){var e=Object(o.a)(["\n  margin-top: 4px;\n  z-index: 99999;\n  position: relative;\n"]);return Di=function(){return e},e}function $i(){var e=Object(o.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(51, 60, 69, 0.95);\n  z-index: 9999999999999;\n  height: 100%;\n  justify-content: center;\n  overflow: auto;\n  cursor: pointer;\n"]);return $i=function(){return e},e}var qi=Sn.div($i()),Wi=Sn.div(Di()),Qi=Sn.div(Ni(),k.a.lessThan("medium")(zi())),Vi=Sn.div(Bi(),Object(tt.a)()),Hi=Sn(Pn.Box)(Ri(),(function(e){return e.theme.colors.primary})),Ji=Sn.div(Ai(),Object(tt.a)(),(function(e){return e.theme.fontFamily})),Ki=Sn.div(Ui(),(function(e){return e.theme.fontFamily})),Zi=Sn(Pn.Box)(Li(),Object(tt.a)()),Gi=Sn.div(_i()),Yi=Sn.div(Mi(),Object(tt.a)(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.fontFamily})),Xi=Sn.div(Pi(),(function(e){return e.theme.colors.lighter})),ec=Sn.div(Si(),Object(tt.a)(),(function(e){return e.theme.colors.lighter}),(function(e){return e.big?"180px":"auto"}),k.a.lessThan("medium")(Ti()),k.a.lessThan("medium")(Fi())),nc=function(e){Object(wi.a)(t,e);var n=Object(Ci.a)(t);function t(){return Object(ji.a)(this,t),n.apply(this,arguments)}return Object(ki.a)(t,[{key:"componentDidMount",value:function(){t.el.style.display="block"}},{key:"componentWillUnmount",value:function(){t.el.style.display="none"}},{key:"render",value:function(){return O.a.createPortal(this.props.children,t.el)}}]),t}(x.a.Component);nc.el=function(){var e=document.createElement("div");return e.setAttribute("id","modalPortal"),e.style.display="none",document.body.appendChild(e),e}();var tc=function(e){var n=e.closeModal,t=e.children,r=Object(h.useCallback)((function(){return n()}),[n]);return x.a.createElement(nc,null,x.a.createElement(qi,{onClick:r}),x.a.createElement(Qi,null,x.a.createElement(Vi,null,x.a.createElement(Hi,{onClick:r},x.a.createElement(Ii.a,{color:"#fff",size:16}))),x.a.createElement(Ji,null,t)))};function rc(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return rc=function(){return e},e}function ac(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return ac=function(){return e},e}function oc(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return oc=function(){return e},e}function ic(){var e=Object(o.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return ic=function(){return e},e}function cc(){var e=Object(o.a)(["\n  color: ",";\n"]);return cc=function(){return e},e}function lc(){var e=Object(o.a)(["\n  color: ",";\n"]);return lc=function(){return e},e}function uc(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return uc=function(){return e},e}var mc,sc={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the community"),summary:Object(Yn.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the community")}},dc=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Ki,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Create a new community"}))),h.createElement(bc,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(gc,null,h.createElement(vc,{fontWeight:"bold"},h.createElement(fc,null,h.createElement(ma.b,{placeholder:sc.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,60-t.values.name.length),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(pc,{mt:2},h.createElement(fc,null,h.createElement(ma.d,{placeholder:sc.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,500-t.values.summary.length),t.errors.summary&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.summary)))))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},fc=Sn(Yi)(uc()),vc=Sn(Pn.Text)(lc(),(function(e){return e.theme.colors.mediumdark})),pc=Sn(Pn.Text)(cc(),(function(e){return e.theme.colors.mediumdark})),gc=Sn.div(ic(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(oc()),(function(e){return e.theme.colors.mediumdark})),bc=Sn(Pn.Flex)(ac(),k.a.lessThan("medium")(rc())),hc=["imageurl","need a file or an url",function(e){return!e||("string"===typeof e?ia(e):e instanceof File)}],xc=io.object({name:io.string().min(2).max(60).required(),summary:io.string().max(500),icon:(mc=io.mixed()).test.apply(mc,Object(w.a)(hc))}),Ec=function(e){var n=e.done,t=Object(Fn.h)(),r=ni().create,a=Object(Nt.a)({enableReinitialize:!0,validationSchema:xc,initialValues:{name:"",summary:"",icon:""},onSubmit:function(e){return r({community:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var r,a;n(),(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(a=r.createCommunity)||void 0===a?void 0:a.id)&&t.push("/communities/".concat(e.data.createCommunity.id))}))}});return x.a.createElement(dc,{cancel:n,formik:a})},yc=t(784),Oc=function(){return Be?null:x.a.createElement(yc.a,null)},jc=t(759),kc=t(754),wc=t(765);function Cc(){var e=Object(o.a)(["\n  font-family: ",";\n  border-radius: 4px;\n  height: ",";\n  min-width: ",";\n  background-color: ",';\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n  span {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    line-height: normal;\n    font-weight: 700;\n    ',";\n  }\n"]);return Cc=function(){return e},e}var Ic={default:"48px",s:"32px",m:"140px",l:"200px"},Fc=Sn(Pn.Box)(Cc(),(function(e){return e.theme.fontFamily}),(function(e){return Ic[e.size]}),(function(e){return Ic[e.size]}),(function(e){return e.bg?"transparent":e.theme.colors.light}),(function(e){return e.bg}),(function(e){return e.theme.colors.mediumdark})),Tc=function(e){var n=e.size,t=void 0===n?"default":n,r=e.src,a=e.initials;e.variant;return h.createElement(Fc,{size:t,bg:r},a&&!r?h.createElement("span",null,a.substr(0,2).toUpperCase()):null)},Sc=t(739),Pc=t(740),Mc=t(741),_c=t(742),Lc=t(743),Uc=t(744),Ac=t(745),Rc=t(746),Bc=t(747),zc=t(748),Nc=t(749),Dc=t(391),$c=t.n(Dc);function qc(){var e=Object(o.a)(["\n  align-items: center;\n  cursor: pointer;\n  padding: 16px;\n  min-width: 100%;\n  width: max-content;\n  flex: 1;\n  &:first-of-type {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n  }\n  &:hover {\n    div {\n      color: "," !important;\n    }\n    background: "," !important;\n  }\n"]);return qc=function(){return e},e}function Wc(){var e=Object(o.a)(["\n  text-align: left;\n  background: ",";\n  min-width: 210px;\n  display: block;\n  border-radius: 6px;\n  box-shadow: rgba(101, 119, 134, 0.2) 0px 0px 15px, rgba(101, 119, 134, 0.15) 0px 0px 3px 1px;\n  position: absolute;\n  top: ",";\n  bottom: ",";\n  left: ",";\n  right: ",";\n  z-index: 9999999999999999999999999999;\n"]);return Wc=function(){return e},e}var Qc=function(e){var n=e.orientation,t=e.close,r=e.children;return x.a.createElement($c.a,{onOutsideClick:t},x.a.createElement(Vc,{className:"dropdown",orientation:n},r))},Vc=Sn(Pn.Box)(Wc(),(function(e){return e.theme.colors.appInverse}),(function(e){return"top"===e.orientation?"8px":"auto"}),(function(e){return"bottom"===e.orientation?"4px":"auto"}),(function(e){return e.orientation,"0px"}),(function(e){return"bottom"===e.orientation?"0px":"auto"})),Hc=Sn(Pn.Flex)(qc(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.light}));function Jc(){var e=Object(o.a)(["\n  border: 1px solid ",";\n  border-radius: 4px;\n  height: 34px;\n  &:hover {\n    background: ",";\n  }\n  div {\n    letter-spacing: 0;\n  }\n"]);return Jc=function(){return e},e}function Kc(){var e=Object(o.a)(["\n  line-height: 50px;\n  height: 50px;\n  cursor: pointer;\n  align-items: center;\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n    .--rtl & {\n      margin-right: 0px;\n      margin-left: 8px;\n    }\n    & svg {\n      vertical-align: sub;\n    }\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return Kc=function(){return e},e}function Zc(){var e=Object(o.a)(["\n  padding: 8px;\n  border-bottom: ",";\n"]);return Zc=function(){return e},e}var Gc=Sn.div(Zc(),(function(e){return e.lined?"1px solid #dadada":null})),Yc=Sn(Pn.Flex)(Kc(),(function(e){return e.theme.colors.primary})),Xc=Sn(Yc)(Jc(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.light})),el=function(e){var n=e.logout,t=e.userLink,r=e.toggleDropdown,a=e.isAdmin,o=Object(Fn.h)().push;return h.createElement(Qc,{orientation:"top",close:r},h.createElement(Gc,{lined:!0},h.createElement(Yc,{variant:"link",onClick:function(){return o(t)}},h.createElement("span",null,h.createElement(Sc.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"My Profile"}))),h.createElement(Yc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/communities/user"},h.createElement("span",null,h.createElement(Pc.a,{size:16,color:"red"})),h.createElement(Yn.Trans,{id:"My Communities"})))),h.createElement(Yc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/inventory".concat(t)},h.createElement("span",null,h.createElement(Mc.a,{size:16,color:"#333"})),h.createElement(Yn.Trans,{id:"My Inventory"})))),h.createElement(Yc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/activity"},h.createElement("span",null,h.createElement(_c.a,{size:16,color:"red"})),h.createElement(Yn.Trans,{id:"My Activity"})))),h.createElement(Yc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/comments"},h.createElement("span",null,h.createElement(Lc.a,{size:16,color:"red"})),h.createElement(Yn.Trans,{id:"My comments"})))),h.createElement(Yc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/favorites"},h.createElement("span",null,h.createElement(Uc.a,{size:16,color:"red"})),h.createElement(Yn.Trans,{id:"My favorites"}))))),h.createElement(Gc,null,h.createElement(Yc,{variant:"link",onClick:function(){return o("/settings")}},h.createElement("span",null,h.createElement(Ac.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Settings"}))),a&&h.createElement(Xc,{variant:"link",onClick:function(){return o("/settings/instance")}},h.createElement(Pn.Text,{variant:"text",sx:{flex:1,textAlign:"center"}},h.createElement(Yn.Trans,{id:"Admin dashboard"}))),h.createElement(Yc,{variant:"link"},h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/terms",target:"_blank"},h.createElement("span",null,h.createElement(Rc.a,{size:16})),h.createElement(Yn.Trans,{id:"Code of Conduct"})))),h.createElement(Yc,{variant:"link",onClick:n},h.createElement("span",null,h.createElement(Bc.a,{size:16,strokeWidth:1,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Sign out"})))))},nl=function(e){var n=e.toggleDropdown,t=e.createCommunity,r=e.createIntent,a=e.createResource;return h.createElement(Qc,{orientation:"top",close:n},h.createElement(Gc,{lined:!0},h.createElement(Yc,{variant:"link",onClick:function(){return t()}},h.createElement("span",null,h.createElement(Pc.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"New Community"}))),h.createElement(Yc,{variant:"link",onClick:function(){return r()}},h.createElement("span",null,h.createElement(zc.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new intent"}))),h.createElement(Yc,{variant:"link",onClick:function(){return a()}},h.createElement("span",null,h.createElement(Nc.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new resource"}))),h.createElement(Yc,{variant:"link"},h.createElement("span",null,h.createElement(Vt.a,{size:16,color:"#ddd"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new event?"})))))};function tl(){var e=Object(o.a)(['\n    query communityOutboxActivities($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityOutboxActivities", filter: ["communityId"]) {\n    id\n    outbox(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return tl=function(){return e},e}function rl(){var e=Object(o.a)(["\n    fragment CommunityOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return rl=function(){return e},e}var al=A()(rl(),_o),ol=A()(tl(),At,al);var il=function(e,n){return{query:ol,variables:e,context:n}},cl=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(ol,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{communityId:e,limit:Ee}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.community)||void 0===t?void 0:t.outbox)&&(null===(a=e.community)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},o),{},{community:Object(c.a)(Object(c.a)({},o.community),{},{outbox:r({prev:e.community.outbox,fetched:o.community.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:o}}),[o])};function ll(){var e=Object(o.a)(['\n    query communityCollections($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityCollections", filter: ["communityId"]) {\n    id\n    collections(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityCollection\n      }\n    }\n  }\n}\n    ',"\n",""]);return ll=function(){return e},e}function ul(){var e=Object(o.a)(["\n    fragment CommunityCollection on Collection {\n  ...CollectionPreview\n  ...CommunityPageCollectionBase\n}\n    ","\n",""]);return ul=function(){return e},e}var ml=A()(ul(),Lt,Yo),sl=A()(ll(),At,ml);var dl=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(sl,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.collections,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,communityId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.community)||void 0===t?void 0:t.collections)&&(null===(a=e.community)||void 0===a?void 0:a.collections)?Object(c.a)(Object(c.a)({},o),{},{community:Object(c.a)(Object(c.a)({},o.community),{},{collections:r({prev:e.community.collections,fetched:o.community.collections})})}):e}})}));return Object(h.useMemo)((function(){return{collectionsPage:o}}),[o])};function fl(){var e=Object(o.a)(["\n    mutation createThread($contextId: String!, $comment: CommentInput!) {\n  createThread(comment: $comment, contextId: $contextId) {\n    thread {\n      id\n    }\n  }\n}\n    "]);return fl=function(){return e},e}var vl=A()(fl());function pl(){var e=Object(o.a)(['\n    query communityThreads($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityThreads", filter: ["communityId"]) {\n    id\n    threads(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityThread\n      }\n    }\n  }\n}\n    ',"\n",""]);return pl=function(){return e},e}function gl(){var e=Object(o.a)(["\n    fragment CommunityThread on Thread {\n  ...CommunityPageThread\n}\n    ",""]);return gl=function(){return e},e}var bl=A()(gl(),Go),hl=A()(pl(),At,bl);var xl=function(e,n){var t,r=q.c(vl,t),o=Object(l.a)(r,2),c=o[0],u=o[1].loading,m=eC(function(){var t=Object(i.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!u){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",c({variables:{contextId:e,comment:{content:r}},refetchQueries:[Bo({limit:Ee})].concat(Object(w.a)("Community"===n?[(a={communityId:e,limit:Ee},o=void 0,{query:hl,variables:a,context:o}),il({communityId:e,limit:Ee})]:[]))}).then((function(e){var n,t,r;return null===(n=e.data)||void 0===n||null===(t=n.createThread)||void 0===t||null===(r=t.thread)||void 0===r?void 0:r.id})));case 3:case"end":return t.stop()}var a,o}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,n,u]);return Object(h.useMemo)((function(){return{createThread:m}}),[m])};function El(){var e=Object(o.a)(["\n    mutation editCommunity($community: CommunityUpdateInput!, $communityId: String!, $icon: UploadInput) {\n  updateCommunity(community: $community, communityId: $communityId, icon: $icon) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return El=function(){return e},e}function yl(){var e=Object(o.a)(["\n    query editCommunityData($communityId: String!) {\n  community(communityId: $communityId) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return yl=function(){return e},e}function Ol(){var e=Object(o.a)(["\n    fragment EditCommunityQueryData on Community {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return Ol=function(){return e},e}var jl=A()(Ol()),kl=A()(yl(),jl);var wl=A()(El(),jl);var Cl=function(e){var n,t=q.c(wl,n),r=Object(l.a)(t,2),o=r[0],c=r[1],u=function(e){return q.d(kl,e)}({variables:{communityId:e}}),m=eC(function(){var n=Object(i.a)(a.a.mark((function n(t){var r,i,l,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.community,s=t.icon,!c.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",o({variables:{communityId:e,icon:ca(s,null===(r=u.data)||void 0===r||null===(i=r.community)||void 0===i||null===(l=i.icon)||void 0===l?void 0:l.url),community:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,c,o,u]);return Object(h.useMemo)((function(){var e,n=null===(e=u.data)||void 0===e?void 0:e.community;return{edit:m,community:n}}),[m,u])};function Il(){var e=Object(o.a)(["\n    query communityData($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPageData\n  }\n}\n    ",""]);return Il=function(){return e},e}var Fl=A()(Il(),Zo);var Tl=function(e){var n,t,r=ua().me,a=(t={variables:{communityId:e}},q.d(Fl,t)),o=xl(e,"Community").createThread,i=null===(n=a.data)||void 0===n?void 0:n.community,c=tC(i).toggleFollow,l=Cl(e).edit,u=!!r&&!!(null===i||void 0===i?void 0:i.creator)&&r.user.id===i.creator.id,m=!!(null===r||void 0===r?void 0:r.isInstanceAdmin)||u;return Object(h.useMemo)((function(){return{community:i,createThread:o,toggleJoin:c,edit:l,canModify:m,isCreator:u}}),[i,c,l,m,o,u])},Sl=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(hl,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.threads,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{communityId:e,limit:Ee}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.community)||void 0===t?void 0:t.threads)&&(null===(a=e.community)||void 0===a?void 0:a.threads)?Object(c.a)(Object(c.a)({},o),{},{community:Object(c.a)(Object(c.a)({},o.community),{},{threads:r({prev:e.community.threads,fetched:o.community.threads})})}):e}})}));return Object(h.useMemo)((function(){return{threadsPage:o}}),[o])},Pl=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(ta,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,communityId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.community)||void 0===t?void 0:t.followers)&&(null===(a=e.community)||void 0===a?void 0:a.followers)?Object(c.a)(Object(c.a)({},o),{},{community:Object(c.a)(Object(c.a)({},o.community),{},{followers:r({prev:e.community.followers,fetched:o.community.followers})})}):e}})}));return Object(h.useMemo)((function(){return{communityFollowersPage:o}}),[o])};function Ml(){var e=Object(o.a)(["\n    fragment HeroCollectionMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return Ml=function(){return e},e}function _l(){var e=Object(o.a)(["\n    fragment HeroCollectionData on Collection {\n  id\n  name\n  displayUsername\n  summary\n  icon {\n    id\n    url\n  }\n  community {\n    id\n    name\n    icon {\n      id\n      url\n    }\n    myFollow {\n      id\n    }\n  }\n  followerCount\n  followers {\n    totalCount\n  }\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return _l=function(){return e},e}var Ll=A()(_l());A()(Ml());function Ul(){var e=Object(o.a)(["\n    fragment CollectionPageActivity on Activity {\n  id\n  ...ActivityPreview\n}\n    ",""]);return Ul=function(){return e},e}function Al(){var e=Object(o.a)(["\n    fragment CollectionPageResource on Resource {\n  id\n  createdAt\n  ...ResourcePreview\n}\n    ",""]);return Al=function(){return e},e}function Rl(){var e=Object(o.a)(["\n    fragment CollectionPageData on Collection {\n  name\n  ...HeroCollectionData\n}\n    ",""]);return Rl=function(){return e},e}var Bl=A()(Rl(),Ll),zl=A()(Al(),Eo);A()(Ul(),_o);function Nl(){var e=Object(o.a)(["\n    mutation createCollection($collection: CollectionInput!, $contextId: String!, $icon: UploadInput) {\n  createCollection(collection: $collection, contextId: $contextId, icon: $icon) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return Nl=function(){return e},e}var Dl=A()(Nl(),Bl);var $l=function(e){var n,t=q.c(Dl,n),r=Object(l.a)(t,2),o=r[0],c=r[1],u=eC(function(){var n=Object(i.a)(a.a.mark((function n(t){var r,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.collection,i=t.icon,!c.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",o({variables:{contextId:e,icon:ca(i,null),collection:{name:r.name,summary:r.summary,preferredUsername:r.preferredUsername}},refetchQueries:[(a={communityId:e,limit:Ee},l=void 0,{query:sl,variables:a,context:l}),il({communityId:e,limit:Ee}),Bo({limit:Ee}),zt({limit:Ee}),_r({limit:Ee})]}));case 4:case"end":return n.stop()}var a,l}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,c,o]);return Object(h.useMemo)((function(){return{create:u}}),[u])};function ql(){var e=Object(o.a)(["\n  color: ",";\n"]);return ql=function(){return e},e}function Wl(){var e=Object(o.a)(["\n  color: ",";\n"]);return Wl=function(){return e},e}function Ql(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return Ql=function(){return e},e}function Vl(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return Vl=function(){return e},e}function Hl(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return Hl=function(){return e},e}function Jl(){var e=Object(o.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Jl=function(){return e},e}function Kl(){var e=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n\n  & > div {\n    width: calc((100% - 20px) / 2);\n  }\n"]);return Kl=function(){return e},e}function Zl(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n\n  .d-flex {\n    display: flex;\n    justify-content: space-between;\n\n    .item_col-6 {\n      width: calc(50% - 5px);\n    }\n  }\n"]);return Zl=function(){return e},e}var Gl,Yl,Xl=Sn(Yi)(Zl()),eu=Sn.div(Kl()),nu=Sn.div(Jl(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Hl()),(function(e){return e.theme.colors.mediumdark})),tu=Sn(Pn.Flex)(Vl(),k.a.lessThan("medium")(Ql())),ru=Sn(Pn.Text)(Wl(),(function(e){return e.theme.colors.mediumdark})),au=Sn(Pn.Text)(ql(),(function(e){return e.theme.colors.mediumdark})),ou={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the collection"),summary:Object(Yn.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the collection")}},iu=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Ki,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Create a new collection"}))),h.createElement(tu,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(nu,null,h.createElement(ru,{fontWeight:"bold"},h.createElement(Xl,null,h.createElement(ma.b,{placeholder:ou.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,60-t.values.name.length),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(au,{mt:2},h.createElement(Xl,null,h.createElement(ma.d,{placeholder:ou.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,500-t.values.summary.length),t.errors.summary&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.summary)))))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},cu=io.object({name:io.string().min(2).max(60).required(),summary:io.string().max(500),icon:(Gl=io.mixed()).test.apply(Gl,Object(w.a)(hc))}),lu=function(e){var n=e.communityId,t=e.done,r=Object(Fn.h)(),a=$l(n).create,o=Object(Nt.a)({initialValues:{name:"",summary:"",icon:""},enableReinitialize:!0,onSubmit:function(e){return a({collection:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var n,t;return(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.createCollection)||void 0===t?void 0:t.id)&&r.push("/collections/".concat(e.data.createCollection.id))})).catch((function(e){return console.log(e)}))},validationSchema:cu});return x.a.createElement(iu,{cancel:t,formik:o})},uu=t(120),mu=t(750),su=t(751);function du(){var e=Object(o.a)(["\n   padding: 8px;\n"]);return du=function(){return e},e}function fu(){var e=Object(o.a)(["\n  padding: 16px;\n  "," & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return fu=function(){return e},e}function vu(){var e=Object(o.a)(["\n//     display: none;\n// "]);return vu=function(){return e},e}function pu(){var e=Object(o.a)(["\n  margin-top: 24px;\n  height: 250px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-color: ",";\n  position: relative;\n  margin: 0 auto;\n  border-radius: 4px;\n  background-position: center center;\n//   ",";\n"]);return pu=function(){return e},e}function gu(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  background: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return gu=function(){return e},e}function bu(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return bu=function(){return e},e}function hu(){var e=Object(o.a)(["\n  align-items: center;\n"]);return hu=function(){return e},e}function xu(){var e=Object(o.a)(["\n"]);return xu=function(){return e},e}function Eu(){var e=Object(o.a)(["\n  color: ",";\n  ",";\n"]);return Eu=function(){return e},e}function yu(){var e=Object(o.a)(["\n  align-items: center;\n  justify-content: space-between;\n"]);return yu=function(){return e},e}function Ou(){var e=Object(o.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return Ou=function(){return e},e}function ju(){var e=Object(o.a)(["\n    border-top: 1px solid ",";\n    // svg {\n    //   stroke: ",";\n    // }\n    "]);return ju=function(){return e},e}function ku(){var e=Object(o.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return ku=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(Yl||(Yl={}));var wu=Sn(Pn.Box)(ku()),Cu=Sn(Hc)(ju(),(function(e){return Object(tt.b)("0.1",e.theme.colors.light)}),(function(e){return Object(tt.b)("0.1",e.theme.colors.primary)})),Iu=Sn(Pn.Box)(Ou(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),Fu=Sn(Pn.Flex)(yu()),Tu=Sn(Pn.Text)(Eu(),(function(e){return e.theme.colors.darker}),k.a.lessThan("medium")(xu())),Su=Sn(Pn.Flex)(hu()),Pu=Sn(Pn.Text)(bu(),(function(e){return e.theme.colors.mediumdark})),Mu=Sn(Pn.Box)(gu(),(function(e){return e.theme.colors.appInverse})),_u=Sn.div(pu(),(function(e){return e.theme.colors.medium}),k.a.lessThan("medium")(vu())),Lu=Sn.div(fu(),k.a.lessThan("medium")(du())),Uu=function(e){var n=e.community;return n.status===Yl.Loading?x.a.createElement(Pn.Text,null,"Loading..."):x.a.createElement(x.a.Fragment,null,x.a.createElement(Mu,{p:1},x.a.createElement(_u,{id:"header",style:{backgroundImage:'url("'.concat(n.icon,'")')}}),x.a.createElement(Lu,null,x.a.createElement(Tu,{variant:"heading",mt:0},n.name),x.a.createElement(Pu,null,"@",n.fullName),n.summary&&x.a.createElement(Pn.Box,{mt:2},x.a.createElement(uu.a,null,n.summary)),x.a.createElement(Fu,{mt:3},x.a.createElement(Su,null,x.a.createElement(ot,{mr:2,variant:n.following?"danger":"primary",isSubmitting:n.toggleJoinFormik.isSubmitting,isDisabled:n.toggleJoinFormik.isSubmitting||n.isCreator,onClick:n.toggleJoinFormik.submitForm},n.following?x.a.createElement(Yn.Trans,{id:"Leave"}):x.a.createElement(Yn.Trans,{id:"Join"})),x.a.createElement(Iu,{onClick:n.toggleDropdown},x.a.createElement(mu.a,{size:20}),n.isOpenDropdown&&x.a.createElement(wu,null,x.a.createElement(Qc,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&x.a.createElement(Hc,{onClick:n.edit},x.a.createElement(Ac.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Edit the community"}))),x.a.createElement(Hc,{onClick:n.flag},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},n.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this community"}):x.a.createElement(Yn.Trans,{id:"Flag this community"}))),n.isAdmin?x.a.createElement(Cu,{onClick:n.addToFeatured},x.a.createElement(Uc.a,{size:20,color:"rgb(211, 103, 5)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Add to featured list"}))):null))))))))};function Au(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return Au=function(){return e},e}function Ru(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return Ru=function(){return e},e}function Bu(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return Bu=function(){return e},e}function zu(){var e=Object(o.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return zu=function(){return e},e}function Nu(){var e=Object(o.a)(["\n  color: ",";\n"]);return Nu=function(){return e},e}function Du(){var e=Object(o.a)(["\n  color: ",";\n"]);return Du=function(){return e},e}function $u(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return $u=function(){return e},e}var qu,Wu={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the community"),summary:Object(Yn.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the community")}},Qu=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Ki,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(Zu,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(Ku,null,h.createElement(Hu,{fontWeight:"bold"},h.createElement(Vu,null,h.createElement(ma.b,{placeholder:Wu.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,60-t.values.name.length),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(Ju,{mt:2},h.createElement(Vu,null,h.createElement(ma.d,{placeholder:Wu.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,500-t.values.summary.length),t.errors.summary&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.summary)))))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},Vu=Sn(Yi)($u()),Hu=Sn(Pn.Text)(Du(),(function(e){return e.theme.colors.mediumdark})),Ju=Sn(Pn.Text)(Nu(),(function(e){return e.theme.colors.mediumdark})),Ku=Sn.div(zu(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Bu()),(function(e){return e.theme.colors.mediumdark})),Zu=Sn(Pn.Flex)(Ru(),k.a.lessThan("medium")(Au())),Gu=io.object({name:io.string().min(2).max(60).required(),summary:io.string().max(500),icon:(qu=io.mixed()).test.apply(qu,Object(w.a)(hc))}),Yu=function(e){var n=e.done,t=e.communityId,r=Cl(t),a=r.community,o=r.edit,i=Object(h.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),c=Object(Nt.a)({enableReinitialize:!0,onSubmit:function(e){return o({community:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:Gu,initialValues:i});return x.a.createElement(Qu,{cancel:n,formik:c})};function Xu(){var e=Object(o.a)(["\n    fragment DiscoverPageFeaturedCollectionInfo on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return Xu=function(){return e},e}function em(){var e=Object(o.a)(["\n    fragment DiscoverPageFeaturedCommunityInfo on Community {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return em=function(){return e},e}var nm=A()(em()),tm=A()(Xu());function rm(){var e=Object(o.a)(["\n    fragment CollectionFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCollectionInfo\n  }\n}\n    ",""]);return rm=function(){return e},e}var am=A()(rm(),tm);function om(){var e=Object(o.a)(['\n    query instanceFeaturedCollections {\n  instance {\n    featuredCollections @connection(key: "instanceFeaturedCollections") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return om=function(){return e},e}var im=A()(om(),At,am);var cm=function(e,n){return{query:im,variables:e,context:n}};function lm(){var e=Object(o.a)(["\n    fragment CommunityFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCommunityInfo\n  }\n}\n    ",""]);return lm=function(){return e},e}var um=A()(lm(),nm);function mm(){var e=Object(o.a)(['\n    query instanceFeaturedCommunities {\n  instance {\n    featuredCommunities @connection(key: "instanceFeaturedCommunities") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return mm=function(){return e},e}var sm=A()(mm(),At,um);function dm(){var e=Object(o.a)(["\n    mutation addFeatured($contextId: String!) {\n  createFeature(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n      }\n      ... on Community {\n        id\n      }\n    }\n  }\n}\n    "]);return dm=function(){return e},e}var fm=A()(dm());var vm=function(e){var n,t=q.c(fm,n),r=Object(l.a)(t,2),o=r[0],c=r[1].loading,u=eC(Object(i.a)(a.a.mark((function n(){var t,r,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isFeatured){n.next=5;break}if(t=e.actor,r=t.id,i=t.__typename,r&&i&&!c){n.next=4;break}return n.abrupt("return");case 4:return n.abrupt("return",o({variables:{contextId:r},refetchQueries:["Community"===i?(a={},l=void 0,{query:sm,variables:a,context:l}):cm({})]}));case 5:case"end":return n.stop()}var a,l}),n)}))),[e]);return Object(h.useMemo)((function(){return{toggleFeatured:u}}),[u])};function pm(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return pm=function(){return e},e}var gm=function(e){var n=e.cancel,t=e.isFeatured,r=e.itemName,a=e.itemType,o=e.formik;return t?h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Remove from Featured List"}))),h.createElement(ec,null,h.createElement(Yi,null,h.createElement(Pn.Text,null,"Are you sure you want to remove ",r," ",a," from the featured list of the Discover Page?"))),h.createElement(Zi,null,h.createElement(bm,{variant:"primary",isSubmitting:o.isSubmitting,isDisabled:o.isSubmitting,style:{marginLeft:"10px"},onClick:o.submitForm},h.createElement(Yn.Trans,{id:"Remove"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))):h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Add To Featured List"}))),h.createElement(ec,null,h.createElement(Yi,null,h.createElement(Pn.Text,null,"Are you sure you want to add ",r," ",a," to the featured list of the Discover Page?"))),h.createElement(Zi,null,h.createElement(bm,{variant:"primary",isSubmitting:o.isSubmitting,isDisabled:o.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:o.submitForm},h.createElement(Yn.Trans,{id:"Add"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},bm=Sn(ot)(pm()),hm=function(e){var n=e.ctx,t=e.featureId,r=e.done,a=Object(h.useMemo)((function(){return t?{isFeatured:!0,featureId:t,__typename:n.__typename}:{isFeatured:!1,actor:n}}),[n,t]),o=vm(a).toggleFeatured,i=Object(Nt.a)({initialValues:{},onSubmit:function(){return o().then(r)}}),c=Object(h.useMemo)((function(){return{isFeatured:!!t,itemName:n.name,itemType:n.__typename||"",formik:i,cancel:r}}),[n.__typename,n.name,r,t,i]);return c&&x.a.createElement(gm,c)};function xm(){var e=Object(o.a)(['\n    query allFlags($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  flags(limit: $limit, before: $before, after: $after) @connection(key: "allFlags") {\n    edges {\n      ...FlagPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return xm=function(){return e},e}var Em=A()(xm(),Io,At);var ym=function(e,n){return{query:Em,variables:e,context:n}};function Om(){var e=Object(o.a)(["\n    mutation unflag($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Flag {\n      context {\n        ... on Collection {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Comment {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Community {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Resource {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on User {\n          userId: id\n          myFlag {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return Om=function(){return e},e}function jm(){var e=Object(o.a)(["\n    mutation flag($contextId: String!, $message: String!) {\n  createFlag(contextId: $contextId, message: $message) {\n    context {\n      ... on Collection {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Comment {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Community {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Resource {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on User {\n        userId: id\n        myFlag {\n          id\n        }\n      }\n    }\n  }\n}\n    "]);return jm=function(){return e},e}var km=A()(jm());var wm=A()(Om());var Cm=function(e){var n,t=q.c(km,n),r=Object(l.a)(t,2),o=r[0],c=r[1],u=function(e){return q.c(wm,e)}(),m=Object(l.a)(u,2),s=m[0],d=m[1],f=c.loading||d.loading,v=eC(function(){var n=Object(i.a)(a.a.mark((function n(t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",o({variables:{contextId:e.id,message:t},optimisticResponse:Im(e.__typename,e.id),refetchQueries:[ym({})]}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,f]),p=eC(Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",Dr(e.myFlag.id)?void 0:s({variables:{contextId:e.myFlag.id},optimisticResponse:Fm(e.__typename,e.id)}));case 3:case"end":return n.stop()}}),n)}))),[e,f]);return Object(h.useMemo)((function(){return{flag:v,unflag:p}}),[v,p])},Im=function(e,n){return{__typename:"RootMutationType",createFlag:{__typename:"Flag",context:{__typename:e,id:n,myFlag:{__typename:"Flag",id:"#"}}}}},Fm=function(e,n){return{__typename:"RootMutationType",delete:{__typename:"Flag",context:{__typename:e,id:n,myFlag:null}}}};function Tm(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Tm=function(){return e},e}var Sm={placeholders:{flag:Object(Yn.i18nMark)("Please describe the reason for flagging the item")}},Pm=function(e){var n=e.cancel,t=e.flagFormik,r=e.isFlagged,a=e.unflagFormik,o=h.useContext(Ea).i18n;return r?h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,null,h.createElement(Yn.Trans,{id:"Unflag"}))),h.createElement(ec,null,h.createElement(Yi,null,h.createElement(Yn.Trans,{id:"Are you sure you want to unflag this item?"}))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:a.isSubmitting,isDisabled:a.isSubmitting,onClick:a.submitForm,style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Unflag"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))):h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,null,h.createElement(Yn.Trans,{id:"Report as inappropriate"}))),h.createElement(ec,{big:!0},h.createElement(Yi,null,h.createElement(ma.d,{placeholder:o._(Sm.placeholders.flag),name:"reason",value:t.values.reason,onChange:t.handleChange}),h.createElement(Gi,null,200-t.values.reason.length),t.errors.reason&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.reason)))),h.createElement(Zi,null,h.createElement(Mm,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Send"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},Mm=Sn(ot)(Tm()),_m=io.object({reason:io.string().max(200).required()}),Lm=function(e){var n=e.done,t=e.ctx,r=Cm(t),a=r.unflag,o=r.flag,i=Object(Nt.a)({onSubmit:function(){a(),n()},initialValues:{}}),c=Object(Nt.a)({enableReinitialize:!0,onSubmit:function(e){o(e.reason),n()},validationSchema:_m,initialValues:{reason:""}});return x.a.createElement(Pm,{cancel:n,isFlagged:!!t.myFlag,flagFormik:c,unflagFormik:i})},Um=function(e){var n=e.communityId,t=e.basePath,r=ua().isAdmin,a=Tl(n),o=a.toggleJoin,i=a.community,c=a.canModify,u=a.isCreator,m=Object(Nt.a)({initialValues:{},onSubmit:o}),s=nC(),d=x.a.useReducer((function(e){return!e}),!1),f=Object(l.a)(d,2),v=f[0],p=f[1],g=Object(h.useReducer)((function(e){return!(!c||s())&&!e}),!1),b=Object(l.a)(g,2),E=b[0],y=b[1],O=i&&E?x.a.createElement(tc,{closeModal:y},x.a.createElement(Yu,{communityId:i.id,done:y})):null,j=Object(h.useReducer)((function(e){return!s()&&!e}),!1),k=Object(l.a)(j,2),w=k[0],C=k[1],I=i&&w?x.a.createElement(tc,{closeModal:C},x.a.createElement(Lm,{done:C,ctx:i})):null,F=Object(h.useReducer)((function(e){return!(!r||s())&&!e}),!1),T=Object(l.a)(F,2),S=T[0],P=T[1],M=i&&S?x.a.createElement(tc,{closeModal:P},x.a.createElement(hm,{done:P,ctx:i,featureId:null})):null,_=Object(h.useMemo)((function(){var e;return i?{community:{basePath:t,status:Yl.Loaded,canModify:c,isAdmin:r,isCreator:u,following:!!i.myFollow,isFlagged:!!i.myFlag,icon:(null===(e=i.icon)||void 0===e?void 0:e.url)||"",name:i.name,fullName:i.displayUsername,totalMembers:i.followerCount||0,summary:i.summary||"",toggleJoinFormik:m,addToFeatured:P,edit:y,flag:C,isOpenDropdown:v,toggleDropdown:p}}:{community:{status:Yl.Loading}}}),[i,t,c,r,u,m,v]);return x.a.createElement(x.a.Fragment,null,O,I,M,x.a.createElement(Uu,_))};function Am(){var e=Object(o.a)(["\n    query activityPreview($activityId: String!) {\n  activity(activityId: $activityId) {\n    id\n    ...ActivityPreview\n  }\n}\n    ",""]);return Am=function(){return e},e}var Rm=A()(Am(),_o);var Bm=function e(n){return n&&"Category"!==n.__typename&&"Intent"!==n.__typename&&"Organisation"!==n.__typename&&"SpatialThing"!==n.__typename&&"Taggable"!==n.__typename?"Flag"===n.__typename||"Follow"===n.__typename||"Like"===n.__typename?n.context?"Flag"===n.context.__typename||"Comment"===n.context.__typename||"Follow"===n.context.__typename||"Like"===n.context.__typename||"Resource"===n.context.__typename?null:e(n.context):null:n:null},zm=function(e,n){if(!e)return"";var t=Bm(e);if(!t)return"";var r=t.__typename;return"Flag"===e.__typename?"Flagged a ".concat(r):"Like"===e.__typename?"Starred a ".concat(r):"Follow"===e.__typename?"Followed a ".concat(r):"Resource"===e.__typename?"Added a ".concat(r):"Comment"===e.__typename?e.inReplyTo?"Replied to a discussion":"Started a discussion":n===de.Created?"Created a ".concat(r):n===de.Updated?"Updated a ".concat(r):"Acted on a ".concat(r)};function Nm(){var e=Object(o.a)(["\n  align-self: flex-end;\n"]);return Nm=function(){return e},e}function Dm(){var e=Object(o.a)(["\n  height: 100%;\n  resize: none;\n  background: ",";\n  flex: 1;\n  border: 0 !important;\n  &:focus {\n    outline: none;\n  }\n  font-family: 'Barlow', 'Open Sans', sans-serif !important;\n"]);return Dm=function(){return e},e}function $m(){var e=Object(o.a)(["\n  position: relative;\n  width: 100%;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background: white;\n  flex: 1;\n"]);return $m=function(){return e},e}function qm(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  height: 200px;\n  flex-direction: column;\n"]);return qm=function(){return e},e}var Wm=Sn(Pn.Flex)(qm()),Qm=Sn(Pn.Flex)($m(),(function(e){return e.theme.colors.border})),Vm=Sn(ma.d)(Dm(),(function(e){return e.theme.colors.appInverse})),Hm=Sn(Pn.Flex)(Nm()),Jm=function(e){var n=e.submit,t=e.defaultValue,r=void 0===t?"":t,a=e.keepTextOnSubmit,o=void 0!==a&&a,i=e.placeholder,c=void 0===i?"":i,u=Object(h.useRef)(null),m=Object(h.useState)(r),s=Object(l.a)(m,2),d=s[0],f=s[1],v=Object(h.useCallback)((function(){d&&(n(d),o||f(""))}),[d,o,n]);Object(h.useEffect)((function(){u.current&&(u.current.value=d)}),[d]);var p=Object(h.useCallback)((function(){if(u.current){var e=u.current.value;f(e)}}),[f]);return x.a.createElement(Wm,null,x.a.createElement(Qm,null,x.a.createElement(Vm,{placeholder:c,ref:u,defaultValue:r,onInput:p})),x.a.createElement(Hm,null,x.a.createElement(ot,{variant:"primary",sx:{cursor:d?"pointer":"default",textTransform:"capitalize"},onClick:v},x.a.createElement(Yn.Trans,{id:"Publish"}))))};function Km(){var e=Object(o.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  cursor: pointer;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return Km=function(){return e},e}function Zm(){var e=Object(o.a)(["\n  align-items: center;\n  a {\n    display: flex;\n    align-items: center;\n  }\n"]);return Zm=function(){return e},e}function Gm(){var e=Object(o.a)(["\n  margin-right: 8px;\n  .--rtl & {\n    margin-right: 0px;\n    margin-left: 8px;\n  }\n"]);return Gm=function(){return e},e}function Ym(){var e=Object(o.a)(["\n  //  border-bottom: ",";\n"]);return Ym=function(){return e},e}function Xm(){var e=Object(o.a)(["\n  // background: ",";\n"]);return Xm=function(){return e},e}function es(){var e=Object(o.a)(["\n  text-transform: capitalize;\n"]);return es=function(){return e},e}var ns={placeholders:{name:Object(Yn.i18nMark)("Post a reply")}},ts=function(e){var n=e.MainThread,t=e.Comments,r=e.communityId,a=e.communityName,o=e.communityIcon,i=e.Context,c=e.isCommunityContext,l=e.loadMoreComments,u=e.reply,m=h.useContext(Ea).i18n;return h.createElement(Et,null,h.createElement(yt,{mb:3},h.createElement(Ot,null,h.createElement(jt,null,h.createElement(Pn.Box,{mb:2},!c&&h.createElement(Pn.Box,{p:2},i),h.createElement(is,null,n)),h.createElement(wt,{className:"replies"},t),l&&h.createElement(ct,{LoadMoreFormik:l}),u&&h.createElement(os,{my:3},h.createElement(Jm,{placeholder:m._(ns.placeholders.name),defaultValue:"",submit:function(e){u.replyFormik.setValues({replyMessage:e}),u.replyFormik.submitForm()}}))))),h.createElement(Hn,null,h.createElement(as,{mb:2,variant:"suptitle"},h.createElement(Yn.Trans,null,"Community")),h.createElement(rs,{id:r,name:a,icon:o})))},rs=function(e){var n=e.id,t=e.name,r=e.icon;return h.createElement(h.Fragment,null,h.createElement(us,null,h.createElement(ls,null,h.createElement(Ht.b,{to:"/communities/".concat(n)},h.createElement(cs,null,h.createElement(Tc,{size:"s",src:r})),h.createElement(Pn.Text,{variant:"suptitle"},t)))))},as=Sn(Pn.Text)(es()),os=Sn(Pn.Box)(Xm(),(function(e){return e.theme.colors.appInverse})),is=Sn(Pn.Box)(Ym(),(function(e){return e.theme.colors.border})),cs=Sn(Pn.Box)(Gm()),ls=Sn(Pn.Flex)(Zm()),us=Sn(Pn.Flex)(Km(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function ms(){var e=Object(o.a)(["\n    query commentPreview($commentId: String!) {\n  comment(commentId: $commentId) {\n    id\n    ...CommentPreview\n  }\n}\n    ",""]);return ms=function(){return e},e}var ss=A()(ms(),wo);function ds(){var e=Object(o.a)(["\n    mutation unlike($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Like {\n      context {\n        ... on Collection {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Comment {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Community {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Resource {\n          id\n          myLike {\n            id\n          }\n          likers {\n            totalCount\n          }\n        }\n        ... on User {\n          userId: id\n          myLike {\n            id\n          }\n          likerCount\n        }\n      }\n    }\n  }\n}\n    "]);return ds=function(){return e},e}function fs(){var e=Object(o.a)(["\n    mutation like($contextId: String!) {\n  createLike(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Comment {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Community {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Resource {\n        id\n        myLike {\n          id\n        }\n        likers {\n          totalCount\n        }\n      }\n      ... on User {\n        userId: id\n        myLike {\n          id\n        }\n        likerCount\n      }\n    }\n  }\n}\n    "]);return fs=function(){return e},e}var vs=A()(fs());var ps=A()(ds());var gs=function(e,n,t,r){var o,c=q.c(vs,o),u=Object(l.a)(c,2),m=u[0],s=u[1],d=function(e){return q.c(ps,e)}(),f=Object(l.a)(d,2),v=f[0],p=f[1],g=s.loading||p.loading,b=eC(Object(i.a)(a.a.mark((function o(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&!g){a.next=2;break}return a.abrupt("return");case 2:if(n){a.next=6;break}return a.abrupt("return",m({variables:{contextId:e},optimisticResponse:bs(r,e,t||0)}));case 6:return a.abrupt("return",Dr(n.id)?void 0:v({variables:{contextId:n.id},optimisticResponse:hs(r,e,t||0)}));case 7:case"end":return a.stop()}}),o)}))),[e,n,g,r,t]);return Object(h.useMemo)((function(){return{toggleLike:b}}),[b])},bs=function(e,n,t){return{__typename:"RootMutationType",createLike:{__typename:"Like",context:Object(c.a)({__typename:e,id:n,myLike:{__typename:"Like",id:"#"}},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t+1}}:{likerCount:t+1})}}},hs=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Like",context:Object(c.a)({__typename:e,id:n,myLike:null},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t-1}}:{likerCount:t-1})}}};function xs(){var e=Object(o.a)(['\n    query myInboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  me @connection(key: "myInboxActivities") {\n    user {\n      id\n      inbox(after: $after, before: $before, limit: $limit) {\n        totalCount\n        pageInfo {\n          ...FullPageInfo\n        }\n        edges {\n          ...MyInboxActivity\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return xs=function(){return e},e}function Es(){var e=Object(o.a)(["\n    fragment MyInboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return Es=function(){return e},e}var ys=A()(Es(),_o),Os=A()(xs(),At,ys);function js(){var e=Object(o.a)(['\n    query threadComments($threadId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  thread(threadId: $threadId) @connection(key: "threadComments", filter: ["threadId"]) {\n    comments(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommentPreview\n      }\n    }\n  }\n}\n    ',"\n",""]);return js=function(){return e},e}var ks=A()(js(),At,wo);function ws(){var e=Object(o.a)(["\n    mutation reply($comment: CommentInput!, $inReplyToCommentId: String!, $threadId: String!) {\n  createReply(comment: $comment, inReplyToId: $inReplyToCommentId, threadId: $threadId) {\n    ...CommentPreview\n  }\n}\n    ",""]);return ws=function(){return e},e}var Cs=A()(ws(),wo);var Is=function(e,n,t){var r,o=q.c(Cs,r),u=Object(l.a)(o,2),m=u[0],s=u[1].loading,d=eC(function(){var r=Object(i.a)(a.a.mark((function r(o){var i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s&&e&&e.thread){r.next=2;break}return r.abrupt("return");case 2:return i=e.thread.id,r.abrupt("return",m({variables:{threadId:i,inReplyToCommentId:e.id,comment:{content:o}},context:g({successMsg:function(){return"Sent reply ".concat(t?"@".concat(t," "):""," correctly")}}),refetchQueries:[Bo({limit:Ee}),(a={limit:Ee},l=void 0,{query:Os,variables:a,context:l})].concat(Object(w.a)(n?[il({communityId:n,limit:Ee})]:[])),update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReply;if(r)try{var a,o=e.readQuery({query:ks,variables:{threadId:i,limit:Ee}});if(!(null===o||void 0===o||null===(a=o.thread)||void 0===a?void 0:a.comments)||o.thread.comments.pageInfo.hasNextPage)return;var l=[].concat(Object(w.a)(o.thread.comments.edges),[r]),u=Object(c.a)(Object(c.a)({},o),{},{thread:Object(c.a)(Object(c.a)({},o.thread),{},{comments:Object(c.a)(Object(c.a)({},o.thread.comments),{},{edges:l})})});e.writeQuery({data:u,query:ks,variables:{threadId:i,limit:Ee}})}catch(m){console.warn(m)}}}));case 4:case"end":return r.stop()}var a,l}),r)})));return function(e){return r.apply(this,arguments)}}(),[s,n,t]);return Object(h.useMemo)((function(){return{reply:d}}),[d])},Fs=function(e){var n,t,r,a,o,i,c,l,u,m,s,d,f,v,p,g=(p={variables:{commentId:e}},q.d(ss,p)),b=gs(null===(n=g.data)||void 0===n||null===(t=n.comment)||void 0===t?void 0:t.id,null===(r=g.data)||void 0===r||null===(a=r.comment)||void 0===a?void 0:a.myLike,null===(o=g.data)||void 0===o||null===(i=o.comment)||void 0===i?void 0:i.likerCount,"Comment").toggleLike,x=null===(c=g.data)||void 0===c||null===(l=c.comment)||void 0===l||null===(u=l.thread)||void 0===u?void 0:u.context,E="Resource"===(null===x||void 0===x?void 0:x.__typename)?null===(m=x.collection)||void 0===m?void 0:m.community:"Collection"===(null===x||void 0===x?void 0:x.__typename)?x.community:"Community"===(null===x||void 0===x?void 0:x.__typename)?x:void 0,y=!!(null===E||void 0===E?void 0:E.myFollow),O=Is(null===(s=g.data)||void 0===s?void 0:s.comment,null===E||void 0===E?void 0:E.id,null===(d=g.data)||void 0===d||null===(f=d.comment)||void 0===f||null===(v=f.creator)||void 0===v?void 0:v.userName).reply;return Object(h.useMemo)((function(){var e;return{comment:null===(e=g.data)||void 0===e?void 0:e.comment,community:E,toggleLike:b,reply:O,canReply:y}}),[g,E,b,O,y])},Ts=t(752),Ss=t(753),Ps=(t(644),t(144)),Ms=t.n(Ps);function _s(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none;\n  font-size: "," !important;\n  letter-spacing: 0 !important;\n  font-family: "," !important;\n  &.markdown-body {\n    box-sizing: border-box;\n    min-width: 200px;\n    max-width: 568px;\n  }\n"]);return _s=function(){return e},e}var Ls=Sn(Pn.Text)(_s(),(function(e){return e.theme.colors.dark}),ln.s2,(function(e){return e.theme.fontFamily})),Us=function(e){var n=e.content;return x.a.createElement(Ls,{className:"markdown-body",dangerouslySetInnerHTML:{__html:Ms.a.sanitize(n)},variant:"text"})};function As(){var e=Object(o.a)(["\n  background: ",";\n  a {\n    text-decoration: none\n    &:hover {\n      text-decoration: none;\n    }\n  }\n"]);return As=function(){return e},e}function Rs(){var e=Object(o.a)(["\n  font-size: ",";\n"]);return Rs=function(){return e},e}function Bs(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return Bs=function(){return e},e}function zs(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return zs=function(){return e},e}function Ns(){var e=Object(o.a)(["\n  // border-top: ",";\n  margin-top: 16px;\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return Ns=function(){return e},e}function Ds(){var e=Object(o.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return Ds=function(){return e},e}var $s=function(e){var n=e.content,t=e.like,r=e.url,a=e.isFlagged,o=e.hideActions,i=e.isDropdownOpen,c=e.toggleDropdown,l=e.flag;return x.a.createElement(Js,null,x.a.createElement(Us,{content:n}),o?x.a.createElement(Ws,{mt:2},x.a.createElement(Pn.Box,null,x.a.createElement(qs,null,x.a.createElement(Qs,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(Vs,null,x.a.createElement(Uc.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Hs,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(Qs,{onClick:c,sx:{position:"relative"}},x.a.createElement(Vs,null,x.a.createElement(Ts.a,{className:"hover",size:18})),x.a.createElement(Hs,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),i&&x.a.createElement(Qc,{orientation:"bottom",close:c},x.a.createElement(Hc,{onClick:l},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},a?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"})))))))):x.a.createElement(Ws,{mt:2},x.a.createElement(Pn.Box,null,x.a.createElement(qs,null,x.a.createElement(Qs,null,x.a.createElement(Ht.c,{to:r},x.a.createElement(Vs,null,x.a.createElement(Ss.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),x.a.createElement(Hs,{ml:1,variant:"text",sx:{textTransform:"capitalize"}},x.a.createElement(Yn.Trans,{id:"Reply"})))),x.a.createElement(Qs,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(Vs,null,x.a.createElement(Uc.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Hs,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(Qs,{onClick:c,sx:{position:"relative"}},x.a.createElement(Vs,null,x.a.createElement(Ts.a,{className:"hover",size:18})),x.a.createElement(Hs,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),i&&x.a.createElement(Qc,{orientation:"bottom",close:c},x.a.createElement(Hc,{onClick:l},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},a?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"})))))))))},qs=Sn(Pn.Flex)(Ds()),Ws=Sn(Pn.Box)(Ns(),(function(e){return e.theme.colors.border})),Qs=Sn(Pn.Flex)(zs(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),ln.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Vs=Sn(Pn.Box)(Bs()),Hs=Sn(Pn.Text)(Rs(),ln.s1),Js=Sn(Pn.Box)(As(),(function(e){return e.theme.colors.appInverse}));function Ks(){var e=Object(o.a)(["\n  background: ",";\n"]);return Ks=function(){return e},e}function Zs(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return Zs=function(){return e},e}function Gs(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return Gs=function(){return e},e}function Ys(){var e=Object(o.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return Ys=function(){return e},e}function Xs(){var e=Object(o.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return Xs=function(){return e},e}function ed(){var e=Object(o.a)(["\n  color: ",";\n  img {\n    width: 100%;\n  }\n"]);return ed=function(){return e},e}function nd(){var e=Object(o.a)(["\n  font-size: ",";\n"]);return nd=function(){return e},e}var td=function(e){var n=e.isDropdownOpen,t=e.toggleDropdown,r=e.flag,a=e.content,o=e.like,i=e.isFlagged,c=e.hideActions;return x.a.createElement(Pn.Box,null,x.a.createElement(ud,null,x.a.createElement(ad,{dangerouslySetInnerHTML:{__html:Ms.a.sanitize(a)},sx:{fontSize:"24px"},variant:"text",mb:2}),x.a.createElement(id,{mt:2},c?null:x.a.createElement(Pn.Box,null,x.a.createElement(od,null,x.a.createElement(cd,{liked:!!o.iLikeIt,onClick:o.toggleLikeFormik.submitForm},x.a.createElement(ld,null,x.a.createElement(Uc.a,{strokeWidth:"1",size:"18"})),x.a.createElement(rd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},o.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(cd,{onClick:t,sx:{position:"relative"}},x.a.createElement(ld,null,x.a.createElement(Ts.a,{className:"hover",size:18})),x.a.createElement(rd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),n&&x.a.createElement(Qc,{orientation:"bottom",close:t},x.a.createElement(Hc,{onClick:r},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},i?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"}))))))))))},rd=Sn(Pn.Text)(nd(),ln.s1),ad=Sn(Pn.Text)(ed(),(function(e){return e.theme.colors.dark})),od=Sn(Pn.Flex)(Xs()),id=Sn(Pn.Box)(Ys()),cd=Sn(Pn.Flex)(Gs(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),ln.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),ld=Sn(Pn.Box)(Zs()),ud=Sn(Pn.Box)(Ks(),(function(e){return e.theme.colors.appInverse})),md=function(e){var n=e.commentId,t=e.mainComment,r=e.hideActions,a=Fs(n),o=a.comment,i=a.toggleLike,c=Object(Nt.a)({initialValues:{},onSubmit:i}),u=Object(h.useReducer)((function(e){return!e}),!1),m=Object(l.a)(u,2),s=m[0],d=m[1],f=nC(),v=Object(h.useReducer)((function(e){return!f()&&!e}),!1),p=Object(l.a)(v,2),g=p[0],b=p[1],E=g&&o?x.a.createElement(tc,{closeModal:b},x.a.createElement(Lm,{done:b,ctx:o})):null,y=Object(h.useMemo)((function(){return o?{url:o.thread?"/thread/".concat(o.thread.id):"",content:o.content,like:{iLikeIt:!!o.myLike,totalLikes:o.likerCount||0,toggleLikeFormik:c},isFlagged:!!o.myFlag,hideActions:!!r,isDropdownOpen:s,toggleDropdown:d,flag:b}:null}),[o,r,s,c]);return y&&x.a.createElement(x.a.Fragment,null,E,t?x.a.createElement(td,y):x.a.createElement($s,y))};function sd(){var e=Object(o.a)(["\n    query threadPreview($threadId: String!) {\n  thread(threadId: $threadId) {\n    id\n    ...ThreadPreview\n  }\n}\n    ",""]);return sd=function(){return e},e}var dd=A()(sd(),Qo);var fd,vd=function(e){var n,t,r,a,o,i,c,l,u,m,s=null===(n=(m={variables:{threadId:e}},q.d(dd,m)).data)||void 0===n?void 0:n.thread,d="Resource"===(null===s||void 0===s||null===(t=s.context)||void 0===t?void 0:t.__typename)?null===s||void 0===s||null===(r=s.context.collection)||void 0===r?void 0:r.community:"Collection"===(null===s||void 0===s||null===(a=s.context)||void 0===a?void 0:a.__typename)?null===s||void 0===s?void 0:s.context.community:"Community"===(null===s||void 0===s||null===(o=s.context)||void 0===o?void 0:o.__typename)?null===s||void 0===s?void 0:s.context:void 0,f=!!(null===d||void 0===d?void 0:d.myFollow),v=Is(null===s||void 0===s||null===(i=s.comments)||void 0===i?void 0:i.edges[0],null===d||void 0===d?void 0:d.id,null===s||void 0===s||null===(c=s.comments)||void 0===c||null===(l=c.edges[0])||void 0===l||null===(u=l.creator)||void 0===u?void 0:u.userName).reply;return Object(h.useMemo)((function(){var e,n,t=null===s||void 0===s||null===(e=s.comments)||void 0===e?void 0:e.edges[0],r=null===s||void 0===s||null===(n=s.comments)||void 0===n?void 0:n.totalCount,a=null===s||void 0===s?void 0:s.context,o=null===s||void 0===s?void 0:s.lastActivity;return{mainComment:t,context:a,reply:v,canReply:f,lastActivity:o,totalReplies:r&&r-1,totalComments:(null===s||void 0===s?void 0:s.comments)?s.comments.totalCount-1:0}}),[f,v,s])},pd=function(e){var n="",t="",r="",a="";if(e&&"User"!==e.__typename){var o,i=function(e){return e?"Community"===e.__typename?e:"Collection"===e.__typename?e.community:"Resource"===e.__typename?null===(n=e.collection)||void 0===n?void 0:n.community:"Comment"===e.__typename?e.thread&&e.thread.context&&("Flag"===e.thread.context.__typename?null:"Resource"===e.thread.context.__typename?null===(t=e.thread.context.collection)||void 0===t?void 0:t.community:"Collection"===e.thread.context.__typename?e.thread.context.community:"Community"===e.thread.context.__typename?e.thread.context:null):null:null;var n,t}(e);if(i)n=Jk.getPath({communityId:i.id,tab:void 0},void 0),t=i.name,r=i.id,a=(null===(o=i.icon)||void 0===o?void 0:o.url)||""}return{communityLink:n,communityName:t,communityId:r,communityIcon:a}};function gd(){var e=Object(o.a)(["\n  position: relative;\n  padding: 16px;\n  word-wrap: break-word;\n  ",";\n  transition: background 0.5s ease;\n  margin-top: 0\n  z-index: 10;\n  position: relative;\n  border-radius: 4px;\n  background: ",";\n  margin-bottom: 8px;\n  a {\n    text-decoration: none;\n    &:hover {\n      text-decoration: underline\n    }\n  }\n\n"]);return gd=function(){return e},e}function bd(){var e=Object(o.a)([""]);return bd=function(){return e},e}function hd(){var e=Object(o.a)(["\n  width: 100%;\n  margin-top: -4px;\n"]);return hd=function(){return e},e}function xd(){var e=Object(o.a)(["\n  align-items: stretch;\n"]);return xd=function(){return e},e}function Ed(){var e=Object(o.a)(["\n  font-weight: 600;\n  color: ",";\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  a {\n    font-weight: 800;\n    display: flex;\n    text-decoration: none;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    color: "," !important;\n  }\n"]);return Ed=function(){return e},e}function yd(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return yd=function(){return e},e}function Od(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return Od=function(){return e},e}function jd(){var e=Object(o.a)([""]);return jd=function(){return e},e}function kd(){var e=Object(o.a)(["\n  color: ",";\n  a {\n    font-weight: 600;\n    color: ",";\n  }\n"]);return kd=function(){return e},e}function wd(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return wd=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(fd||(fd={}));var Cd=function(e){if(e.status===fd.Loading)return x.a.createElement(Yn.Trans,{id:"loading..."});var n=e.event.toLowerCase(),t=n.includes("like")||n.includes("flag"),r=t?Fd:Id,a=t&&n.includes("commented")||n.includes("discussion")||n.includes("comment")?e.threadUrl:void 0;return x.a.createElement(Bd,{mb:2},e.actor&&x.a.createElement(r,{actor:e.actor,createdAt:e.createdAt,threadUrl:a,event:e.event,commentActor:n.includes("commented")?e.commentActor:void 0,communityLink:e.communityLink,communityName:e.communityName}),x.a.createElement(Pd,{mt:2},x.a.createElement(Rd,null,e.preview)))},Id=function(e){var n=e.actor,t=e.createdAt,r=e.event,a=e.threadUrl,o=e.communityName,i=e.communityLink;return x.a.createElement(Ud,null,n&&x.a.createElement(x.a.Fragment,null,x.a.createElement(Tc,{initials:n.name,src:n.icon,variant:"avatar"}),x.a.createElement(Ad,{ml:2},x.a.createElement(Pn.Flex,{mt:1,alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement(Ld,null,x.a.createElement(Ht.b,{to:n.link},n.name)),x.a.createElement(Sd,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?x.a.createElement(Ht.b,{to:a},r):r))),x.a.createElement(Pn.Flex,{sx:{marginTop:"2px"},alignItems:"center"},x.a.createElement(_d,null,sa.DateTime.fromSQL(t).toRelative()),x.a.createElement(Md,{mx:1},"\xb7"),x.a.createElement(Td,{to:i},o)))))},Fd=function(e){var n=e.actor,t=e.commentActor,r=e.event,a=e.threadUrl;return x.a.createElement(Ud,{sx:{alignItems:"center !important"}},x.a.createElement(Tc,{size:"s",initials:t?t.name:n.name,src:t?t.icon:n.icon,variant:"avatar"}),x.a.createElement(Ad,{sx:{marginTop:0},ml:2},x.a.createElement(Pn.Flex,{alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement(Ld,null,x.a.createElement(Ht.b,{to:t?t.link:n.link},t?t.name:n.name)),x.a.createElement(Sd,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?x.a.createElement(Ht.b,{to:a},r):r)))))},Td=Sn(Ht.b)(wd(),(function(e){return e.theme.colors.mediumdark}),ln.s1),Sd=Sn(Pn.Text)(kd(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.darker})),Pd=Sn(Pn.Box)(jd()),Md=Sn(Pn.Text)(Od(),(function(e){return e.theme.colors.mediumdark})),_d=Sn(Pn.Text)(yd(),(function(e){return e.theme.colors.mediumdark}),ln.s1),Ld=Sn(Pn.Text)(Ed(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Ud=Sn(Pn.Flex)(xd()),Ad=Sn(Pn.Box)(hd()),Rd=Sn(Pn.Box)(bd()),Bd=Sn(Pn.Box)(gd(),Object(tt.a)(),(function(e){return e.theme.colors.appInverse}));function zd(){var e=Object(o.a)(["\n    fragment HeroUserUserData on User {\n  id\n  image {\n    id\n    url\n  }\n  icon {\n    id\n    url\n  }\n  displayUsername\n  location\n  summary\n  name\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  followerCount\n}\n    "]);return zd=function(){return e},e}var Nd=A()(zd());function Dd(){var e=Object(o.a)(["\n    fragment UserPageUserData on User {\n  id\n  userId: id\n  collectionFollows {\n    totalCount\n  }\n  communityFollows {\n    totalCount\n  }\n  userFollows {\n    totalCount\n  }\n  outbox {\n    totalCount\n  }\n  website\n  userName: name\n  ...HeroUserUserData\n}\n    ",""]);return Dd=function(){return e},e}function $d(){var e=Object(o.a)(["\n    fragment UserPageActivities on Activity {\n  id\n}\n    "]);return $d=function(){return e},e}var qd=A()($d()),Wd=A()(Dd(),Nd);function Qd(){var e=Object(o.a)(['\n    query userOutboxActivities($userId: String!, $after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  user(userId: $userId) @connection(key: "userOutboxActivities", filter: ["userId"]) {\n    id\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...UserOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return Qd=function(){return e},e}function Vd(){var e=Object(o.a)(["\n    fragment UserOutboxActivity on Activity {\n  ...UserPageActivities\n  ...ActivityPreview\n}\n    ","\n",""]);return Vd=function(){return e},e}var Hd=A()(Vd(),qd,_o),Jd=A()(Qd(),At,Hd);var Kd=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(Jd,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.outbox)&&(null===(a=e.user)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},o),{},{user:Object(c.a)(Object(c.a)({},o.user),{},{outbox:r({prev:e.user.outbox,fetched:o.user.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:o}}),[o])};function Zd(){var e=Object(o.a)(['\n    query userFollowedCollections($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCollections", filter: ["userId"]) {\n    id\n    collectionFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...UserFollowedCollection\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Zd=function(){return e},e}function Gd(){var e=Object(o.a)(["\n    fragment UserFollowedCollection on Collection {\n  ...CollectionPreview\n}\n    ",""]);return Gd=function(){return e},e}var Yd=A()(Gd(),Lt),Xd=A()(Zd(),At,Yd);var ef=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(Xd,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.collectionFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.collectionFollows)&&(null===(a=e.user)||void 0===a?void 0:a.collectionFollows)?Object(c.a)(Object(c.a)({},o),{},{user:Object(c.a)(Object(c.a)({},o.user),{},{collectionFollows:r({prev:e.user.collectionFollows,fetched:o.user.collectionFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedCollectionsPage:o}}),[o])};function nf(){var e=Object(o.a)(['\n    query userFollowedCommunities($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCommunities", filter: ["userId"]) {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...UserFollowedCommunity\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return nf=function(){return e},e}function tf(){var e=Object(o.a)(["\n    fragment UserFollowedCommunity on Community {\n  ...CommunityPreview\n}\n    ",""]);return tf=function(){return e},e}var rf=A()(tf(),Mt),af=A()(nf(),At,rf);var of=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(af,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.communityFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.communityFollows)&&(null===(a=e.user)||void 0===a?void 0:a.communityFollows)?Object(c.a)(Object(c.a)({},o),{},{user:Object(c.a)(Object(c.a)({},o.user),{},{communityFollows:r({prev:e.user.communityFollows,fetched:o.user.communityFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedCommunitiesPage:o}}),[o])};function cf(){var e=Object(o.a)(['\n    query userLikes($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) {\n    id\n    likes(limit: $limit, before: $before, after: $after) @connection(key: "userLikes") {\n      edges {\n        ...LikePreview\n      }\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n    }\n  }\n}\n    ',"\n",""]);return cf=function(){return e},e}var lf=A()(cf(),To,At);var uf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(lf,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.likes,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.likes)&&(null===(a=e.user)||void 0===a?void 0:a.likes)?Object(c.a)(Object(c.a)({},o),{},{user:Object(c.a)(Object(c.a)({},o.user),{},{likes:r({prev:e.user.likes,fetched:o.user.likes})})}):e}})}));return Object(h.useMemo)((function(){return{likesPage:o}}),[o])};function mf(){var e=Object(o.a)(['\n    query userFollowedUsers($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedUsers", filter: ["userId"]) {\n    id\n    userFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on User {\n            ...UserFollowedUser\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return mf=function(){return e},e}function sf(){var e=Object(o.a)(["\n    fragment UserFollowedUser on User {\n  ...UserPreview\n}\n    ",""]);return sf=function(){return e},e}var df=A()(sf(),Hr),ff=A()(mf(),At,df);var vf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(ff,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.userFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.userFollows)&&(null===(a=e.user)||void 0===a?void 0:a.userFollows)?Object(c.a)(Object(c.a)({},o),{},{user:Object(c.a)(Object(c.a)({},o.user),{},{userFollows:r({prev:e.user.userFollows,fetched:o.user.userFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedUsersPage:o}}),[o])};function pf(){var e=Object(o.a)(["\n    query userData($userId: String!) {\n  user(userId: $userId) {\n    ...UserPageUserData\n  }\n}\n    ",""]);return pf=function(){return e},e}var gf=A()(pf(),Wd);var bf,hf=function(e){var n,t,r=(t={variables:{userId:e}},q.d(gf,t)),a=ua(),o=a.me,i=a.isAdmin,c=null===(n=r.data)||void 0===n?void 0:n.user,l=tC(c).toggleFollow;return Object(h.useMemo)((function(){var e,n,t,a,c,u=null===(e=r.data)||void 0===e?void 0:e.user,m=null===u||void 0===u||null===(n=u.collectionFollows)||void 0===n?void 0:n.totalCount,s=null===u||void 0===u||null===(t=u.communityFollows)||void 0===t?void 0:t.totalCount,d=null===u||void 0===u||null===(a=u.userFollows)||void 0===a?void 0:a.totalCount,f=null===u||void 0===u||null===(c=u.outbox)||void 0===c?void 0:c.totalCount;return{isMe:!(!o||!u||o.user.id!==u.id),isAdmin:i,user:u,toggleFollow:l,totalCollections:m,totalCommunities:s,totalUsers:d,totalActivities:f}}),[o,r,l,i])};function xf(){var e=Object(o.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return xf=function(){return e},e}function Ef(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n"]);return Ef=function(){return e},e}function yf(){var e=Object(o.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return yf=function(){return e},e}function Of(){var e=Object(o.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return Of=function(){return e},e}function jf(){var e=Object(o.a)(["\n  height: 250px;\n  margin: -4px;\n  background: ",';\n  background-image: url("','");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n']);return jf=function(){return e},e}function kf(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n    .--rtl & {\n      margin-left: 8px;\n      margin-right: 0px;\n    }\n  }\n"]);return kf=function(){return e},e}function wf(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return wf=function(){return e},e}function Cf(){var e=Object(o.a)(["\n  background: ",";\n  padding-bottom: 16px;\n"]);return Cf=function(){return e},e}function If(){var e=Object(o.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return If=function(){return e},e}function Ff(){var e=Object(o.a)(["\n  justify-content: space-between;\n  ",";\n"]);return Ff=function(){return e},e}function Tf(){var e=Object(o.a)(["\n  color: ",";\n"]);return Tf=function(){return e},e}function Sf(){var e=Object(o.a)(["\n  align-items: center;\n"]);return Sf=function(){return e},e}function Pf(){var e=Object(o.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return Pf=function(){return e},e}function Mf(){var e=Object(o.a)(["\n  padding: 1px 8px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  color: ",";\n  display: inline-block;\n"]);return Mf=function(){return e},e}function _f(){var e=Object(o.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return _f=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(bf||(bf={}));var Lf=function(e){return e.status===bf.Loading?null:x.a.createElement(Df,{p:1},x.a.createElement(Hf,null,x.a.createElement(Wf,{src:e.image}),x.a.createElement(Nf,null,x.a.createElement(Qf,null,x.a.createElement(Vf,{style:{backgroundImage:'url("'.concat(e.icon,'")')}})),x.a.createElement(Bf,{mr:2},e.me?x.a.createElement(x.a.Fragment,null):x.a.createElement(x.a.Fragment,null,x.a.createElement(ot,{mr:2,variant:e.following?"danger":"primary",isSubmitting:e.toggleFollowFormik.isSubmitting,isDisabled:e.toggleFollowFormik.isSubmitting,onClick:e.toggleFollowFormik.submitForm},e.following?x.a.createElement(Yn.Trans,{id:"Unfollow"}):x.a.createElement(Yn.Trans,{id:"Follow"})),x.a.createElement(Rf,null,x.a.createElement(mu.a,{size:20,onClick:e.toggleDropdown}),e.isOpenDropdown&&x.a.createElement(Uf,null,x.a.createElement(Qc,{orientation:"bottom",close:e.toggleDropdown},x.a.createElement(Hc,{onClick:e.flag},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},e.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this user"}):x.a.createElement(Yn.Trans,{id:"Flag this user"})," ")))))))),x.a.createElement(Jf,{ml:3},x.a.createElement(zf,{sx:{fontSize:"18px"},mt:2,variant:"heading",fontWeight:"bold"},e.name),x.a.createElement($f,{mt:1},"@",e.displayUsername,e.me&&e.isAdmin&&x.a.createElement(Af,{ml:2},"Admin")),x.a.createElement(Pn.Box,{mt:2},x.a.createElement(Us,{content:e.summary})),e.location?x.a.createElement(qf,{mt:2},x.a.createElement("span",null,x.a.createElement(kc.a,{strokeWidth:1,size:20})),e.location):null)))},Uf=Sn(Pn.Box)(_f()),Af=Sn(Pn.Box)(Mf(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Rf=Sn(Pn.Box)(Pf(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),Bf=Sn(Pn.Flex)(Sf()),zf=Sn(Pn.Text)(Tf(),(function(e){return e.theme.colors.darker})),Nf=Sn(Pn.Flex)(Ff(),k.a.lessThan("860px")(If())),Df=Sn(Pn.Box)(Cf(),(function(e){return e.theme.colors.appInverse})),$f=Sn(Pn.Text)(wf(),(function(e){return e.theme.colors.mediumdark})),qf=Sn(Pn.Flex)(kf(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Wf=Sn.div(jf(),(function(e){return e.theme.colors.light}),(function(e){return e.src?e.src:e.theme.colors.light})),Qf=Sn.div(Of()),Vf=Sn.div(yf(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.appInverse})),Hf=Sn.div(Ef()),Jf=Sn(Pn.Box)(xf()),Kf=function(e){var n=e.userId,t=hf(n),r=t.user,a=t.isAdmin,o=t.isMe,i=t.toggleFollow,u=Object(h.useReducer)((function(e){return!e}),!1),m=Object(l.a)(u,2),s=m[0],d=m[1],f=Object(Nt.a)({initialValues:{},onSubmit:i}),v=nC(),p=Object(h.useReducer)((function(e){return!v()&&!e}),!1),g=Object(l.a)(p,2),b=g[0],E=g[1],y=r&&b?x.a.createElement(tc,{closeModal:E},x.a.createElement(Lm,{done:E,ctx:r})):null,O=Object(h.useMemo)((function(){var e,n;if(!r)return{status:bf.Loading};var t={status:bf.Loaded,displayUsername:r.displayUsername,icon:(null===(e=r.icon)||void 0===e?void 0:e.url)||"",image:(null===(n=r.image)||void 0===n?void 0:n.url)||"",location:r.location||"",name:r.name||"",summary:r.summary||"",isFlagged:!!r.myFlag};return o?Object(c.a)({isAdmin:a,me:o},t):Object(c.a)({flag:E,me:o,following:!!r.myFollow,isOpenDropdown:s,toggleDropdown:d,toggleFollowFormik:f},t)}),[o,r,f,a,s]);return x.a.createElement(x.a.Fragment,null,y,x.a.createElement(Lf,O))};function Zf(){var e=Object(o.a)(["\n    query communityPreview($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPreview\n  }\n}\n    ",""]);return Zf=function(){return e},e}var Gf=A()(Zf(),Mt);var Yf=function(e){var n,t,r,a=(r={variables:{communityId:e}},q.d(Gf,r)),o=ua().me,i=null===(n=a.data)||void 0===n?void 0:n.community,c=tC(null===(t=a.data)||void 0===t?void 0:t.community).toggleFollow,l=!!o&&!!(null===i||void 0===i?void 0:i.creator)&&o.user.id===i.creator.id;return Object(h.useMemo)((function(){var e;return{community:null===(e=a.data)||void 0===e?void 0:e.community,toggleJoin:c,isCreator:l}}),[a,c,l])},Xf=t(755);function ev(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n"]);return ev=function(){return e},e}function nv(){var e=Object(o.a)(["\n  position: relative;\n  div {\n    width: 100%;\n    heigth: 150px;\n    background-repeat: no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n  &:hover {\n    & span {\n      display: block;\n    }\n  }\n"]);return nv=function(){return e},e}function tv(){var e=Object(o.a)(["\n  position: relative;\n  max-height: 560px;\n  overflow: hidden;\n  z-index: 9;\n  // padding-bottom: 0;\n  cursor: pointer;\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n    \n    text-decoration: none;\n  }\n  &&& a {\n    color: inherit;\n    text-decoration: none;\n    &&&:hover {\n      text-decoration: none;\n    }\n  }\n"]);return tv=function(){return e},e}function rv(){var e=Object(o.a)(["\n  border: ",";\n  border-radius: 4px;\n"]);return rv=function(){return e},e}function av(){var e=Object(o.a)(["\n  color: ",";\n  // justify-content: space-evenly;\n"]);return av=function(){return e},e}function ov(){var e=Object(o.a)(["\n  color: ",";\n  flex: 1;\n"]);return ov=function(){return e},e}function iv(){var e=Object(o.a)(["\n  text-decoration: none;\n"]);return iv=function(){return e},e}function cv(){var e=Object(o.a)(["\n  svg {\n    margin: 0;\n  }\n"]);return cv=function(){return e},e}function lv(){var e=Object(o.a)(["\n  button {\n    width: 100%;\n  }\n"]);return lv=function(){return e},e}function uv(){var e=Object(o.a)(["\n  color: ",";\n"]);return uv=function(){return e},e}var mv=function(e){var n=e.name,t=e.icon,r=e.summary,a=e.isCreator,o=e.followersCount,i=e.joined,c=e.toggleJoinFormik,l=e.collectionsCount,u=e.link,m=e.displayUsername,s=e.hideActions,d=e.isSearch;return x.a.createElement(bv,null,d&&x.a.createElement(pr,null,x.a.createElement(Yn.Trans,{id:"Community"})),x.a.createElement(hv,{p:2},x.a.createElement(vv,{link:u},x.a.createElement(xv,null,x.a.createElement(Tc,{size:"l",src:t})),x.a.createElement(Pn.Box,{p:2},x.a.createElement(Pn.Flex,null,x.a.createElement(Pn.Box,{flex:1},x.a.createElement(Ev,{variant:"heading"},n.length>60?n.replace(/^(.{56}[^\s]*).*/,"$1..."):n),x.a.createElement(pv,null,m))),r?x.a.createElement(sv,{variant:"text",mt:2},r.length>90?r.replace(/^([\s\S]{86}[^\s]*)[\s\S]*/,"$1..."):r):null),x.a.createElement(gv,{px:2},x.a.createElement(fv,{mt:2,alignItems:"center"},x.a.createElement(Pc.a,{size:18}),x.a.createElement(Pn.Text,{ml:2,variant:"suptitle"},o||0," ",x.a.createElement(Yn.Trans,{id:"Users"}))),x.a.createElement(fv,{mt:2,alignSelf:"center",alignItems:"center"},x.a.createElement(Xf.a,{size:18}),x.a.createElement(Pn.Text,{ml:2,variant:"suptitle"},l||0," ",x.a.createElement(Yn.Trans,{id:"Collections"}))),s?null:x.a.createElement(dv,{my:3},x.a.createElement(ot,{variant:"outline",isDisabled:!!a,isSubmitting:c.isSubmitting,onClick:function(e){e.preventDefault(),c.submitForm()}},x.a.createElement(Pn.Text,{variant:"suptitle"},i?x.a.createElement(Yn.Trans,{id:"Leave"}):x.a.createElement(Yn.Trans,{id:"Join"}))))))))},sv=Sn(Pn.Text)(uv(),(function(e){return e.theme.colors.dark})),dv=Sn(Pn.Box)(lv()),fv=Sn(Pn.Flex)(cv()),vv=Sn(Kt)(iv()),pv=Sn(Pn.Text)(ov(),(function(e){return e.theme.colors.mediumdark})),gv=Sn(Pn.Box)(av(),(function(e){return e.theme.colors.mediumdark})),bv=Sn(Pn.Box)(rv(),(function(e){return e.theme.colors.border})),hv=Sn(Pn.Box)(tv(),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(tt.b)("0.05",e.theme.colors.appInverse)})),xv=Sn.div(nv()),Ev=Sn(Pn.Heading)(ev(),(function(e){return e.theme.colors.darker})),yv=function(e){var n=e.communityId,t=e.flagged,r=Yf(n),a=r.community,o=r.toggleJoin,i=r.isCreator,c=Object(Nt.a)({initialValues:{},onSubmit:o}),l=Object(h.useMemo)((function(){return a?Ov({community:a,hideActions:!!t,isCreator:i,toggleJoinFormik:c}):null}),[a,t,i,c]);return l&&x.a.createElement(mv,l)},Ov=function(e){var n=e.community,t=e.hideActions,r=e.toggleJoinFormik,a=e.isCreator,o=n.id,i=n.canonicalUrl,c=n.icon,l=n.name,u=n.summary,m=n.myFollow,s=n.collectionCount,d=n.followerCount,f=n.threads,v=n.displayUsername,p=n.isLocal;return{icon:(null===c||void 0===c?void 0:c.url)||"",name:l,isCreator:a,summary:u||"",collectionsCount:s||0,joined:!!m,followersCount:d||0,threadsCount:(null===f||void 0===f?void 0:f.totalCount)||0,toggleJoinFormik:r,link:{url:p?"/communities/".concat(o):i||"",external:!p},displayUsername:v,hideActions:t}};function jv(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return jv=function(){return e},e}var kv={placeholders:{name:Object(Yn.i18nMark)("Website"),flag:Object(Yn.i18nMark)("Please write the Moodle LMS instance")}},wv=function(e){var n=e.cancel,t=e.sendToMoodleFormik,r=h.useContext(Ea).i18n;return h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Send to Moodle"}))),h.createElement(ec,{big:!0},h.createElement(Yi,null,h.createElement(ma.b,{placeholder:r._(kv.placeholders.flag),name:"site",value:t.values.site,onChange:t.handleChange}),h.createElement(Gi,null,200-t.values.site.length),t.errors.site&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.site)))),h.createElement(Zi,null,h.createElement(Cv,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Send"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},Cv=Sn(ot)(jv());function Iv(){var e=Object(o.a)(["\n    query instanceInfo {\n  instance {\n    description\n    extraInfo\n    hostname\n    uploadIconTypes\n    uploadImageTypes\n    uploadMaxBytes\n    uploadResourceTypes\n  }\n}\n    "]);return Iv=function(){return e},e}var Fv=A()(Iv());function Tv(e){return q.d(Fv,e)}var Sv=fa("session")("LMS_"),Pv=function(e){var n=Tv().data,t=Mv(),r=t.updateLMSPrefs,a=t.currentLMSPrefs,o=Object(h.useCallback)((function(t){if(!(null===n||void 0===n?void 0:n.instance)||!e)return!1;var r=JSON.stringify(e),a=n.instance.uploadResourceTypes.includes(e.mediaType)?"file":"link";return function(e,n,t,r){var a=r.site,o=r.course,i=r.section,c=document.createElement("form");c.target="_blank",c.method="POST",c.action="".concat(a,"/admin/tool/moodlenet/import.php"),c.style.display="none";var u={resourceurl:e,course:o,section:i,type:t,resource_info:n};Object.entries(u).forEach((function(e){var n=Object(l.a)(e,2),t=n[0],r=n[1],a=document.createElement("input");a.type="hidden",a.name=t,a.value=r||"",c.appendChild(a)})),document.body.appendChild(c),c.submit(),document.body.removeChild(c)}(e.url,r,a,t),!0}),[n,e]);return Object(h.useMemo)((function(){return{updateLMSPrefs:r,sendToLMS:o,currentLMSPrefs:a}}),[r,o,a])},Mv=function(){var e=ua(),n=e.loading,t=e.me,r=e.updateProfile,o=null===t||void 0===t?void 0:t.user,c=Object(h.useState)(Sv.get("Prefs")),u=Object(l.a)(c,2),m=u[0],s=u[1];Object(h.useEffect)((function(){var e;(null===o||void 0===o||null===(e=o.extraInfo)||void 0===e?void 0:e.LMS)?s(o.extraInfo.LMS):s(Sv.get("Prefs"))}),[o]);var d=Object(h.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),Sv.set("Prefs",t),n||!o){e.next=5;break}return e.next=5,r({profile:{extraInfo:{LMS:t}}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,o,n]);return Object(h.useMemo)((function(){return{updateLMSPrefs:d,currentLMSPrefs:m,loading:n}}),[d,m,n])},_v=io.object({site:io.string().matches(Ne).required()}),Lv=function(e){var n=e.done,t=e.resource,r=Pv(t),a=r.currentLMSPrefs,o=r.sendToLMS,i=r.updateLMSPrefs,l=Object(Nt.a)({initialValues:a||{site:""},enableReinitialize:!0,validationSchema:_v,onSubmit:function(e){var t=!a||a.site!==e.site,r=t?Object(c.a)(Object(c.a)({},e),{},{course:void 0,section:void 0}):a;r&&(t&&i(r),n(o(r)))}});return x.a.createElement(wv,{cancel:n,sendToMoodleFormik:l})};function Uv(){var e=Object(o.a)(["\n    query resourcePreview($resourceId: String!) {\n  resource(resourceId: $resourceId) {\n    id\n    ...ResourcePreview\n  }\n}\n    ",""]);return Uv=function(){return e},e}var Av=A()(Uv(),Eo);var Rv=function(e){var n,t,r,a,o,i,c,l,u=(l={variables:{resourceId:e}},q.d(Av,l)),m=gs(null===(n=u.data)||void 0===n||null===(t=n.resource)||void 0===t?void 0:t.id,null===(r=u.data)||void 0===r||null===(a=r.resource)||void 0===a?void 0:a.myLike,null===(o=u.data)||void 0===o||null===(i=o.resource)||void 0===i||null===(c=i.likers)||void 0===c?void 0:c.totalCount,"Resource").toggleLike;return Object(h.useMemo)((function(){var e;return{resource:null===(e=u.data)||void 0===e?void 0:e.resource,toggleLike:m}}),[u,m])},Bv=function(e){var n=zv(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,o=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:o||"",community:n}},zv=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:(null===r||void 0===r?void 0:r.url)||"",name:n,preferredUsername:t,summary:a||""}};function Nv(){var e=Object(o.a)(["\n    mutation editCollection($collection: CollectionUpdateInput!, $collectionId: String!, $icon: UploadInput) {\n  updateCollection(collection: $collection, collectionId: $collectionId, icon: $icon) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return Nv=function(){return e},e}function Dv(){var e=Object(o.a)(["\n    query editCollectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return Dv=function(){return e},e}function $v(){var e=Object(o.a)(["\n    fragment EditCollectionQueryData on Collection {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return $v=function(){return e},e}var qv=A()($v()),Wv=A()(Dv(),qv);var Qv=A()(Nv(),qv);var Vv=function(e){var n,t=q.c(Qv,n),r=Object(l.a)(t,2),o=r[0],c=r[1],u=function(e){return q.d(Wv,e)}({variables:{collectionId:e}}),m=eC(function(){var n=Object(i.a)(a.a.mark((function n(t){var r,i,l,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.collection,s=t.icon,!c.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",o({variables:{collectionId:e,icon:ca(s,null===(r=u.data)||void 0===r||null===(i=r.collection)||void 0===i||null===(l=i.icon)||void 0===l?void 0:l.url),collection:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,o,c,u]);return Object(h.useMemo)((function(){var e,n=null===(e=u.data)||void 0===e?void 0:e.collection;return{edit:m,collection:n}}),[m,u])};function Hv(){var e=Object(o.a)(["\n    query collectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return Hv=function(){return e},e}var Jv=A()(Hv(),Bl);var Kv=function(e){var n,t,r,a=ua().me,o=null===(n=(r={variables:{collectionId:e}},q.d(Jv,r)).data)||void 0===n?void 0:n.collection,i=tC(o).toggleFollow,c=Vv(e).edit,l=!!(null===o||void 0===o||null===(t=o.community)||void 0===t?void 0:t.myFollow),u=!!a&&!!(null===o||void 0===o?void 0:o.creator)&&a.user.id===o.creator.id,m=!!(null===a||void 0===a?void 0:a.isInstanceAdmin)||u;return Object(h.useMemo)((function(){return{isCommunityMember:l,isCreator:u,collection:o,toggleJoin:i,edit:c,canModify:m}}),[o,u,i,c,m,l])};function Zv(){var e=Object(o.a)(['\n    query collectionResources($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionResources", filter: ["collectionId"]) {\n    id\n    resources(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionResource\n      }\n    }\n  }\n}\n    ',"\n",""]);return Zv=function(){return e},e}function Gv(){var e=Object(o.a)(["\n    fragment CollectionResource on Resource {\n  ...CollectionPageResource\n}\n    ",""]);return Gv=function(){return e},e}var Yv=A()(Gv(),zl),Xv=A()(Zv(),At,Yv);var ep=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:Ee}},q.d(Xv,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.resources,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,collectionId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.collection)||void 0===t?void 0:t.resources)&&(null===(a=e.collection)||void 0===a?void 0:a.resources)?Object(c.a)(Object(c.a)({},o),{},{collection:Object(c.a)(Object(c.a)({},o.collection),{},{resources:r({prev:e.collection.resources,fetched:o.collection.resources})})}):e}})}));return Object(h.useMemo)((function(){return{resourcesPage:o}}),[o])},np=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:Ee}},q.d(Gr,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,collectionId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.collection)||void 0===t?void 0:t.followers)&&(null===(a=e.collection)||void 0===a?void 0:a.followers)?Object(c.a)(Object(c.a)({},o),{},{collection:Object(c.a)(Object(c.a)({},o.collection),{},{followers:r({prev:e.collection.followers,fetched:o.collection.followers})})}):e}})}));return Object(h.useMemo)((function(){return{collectionFollowersPage:o}}),[o])};function tp(){var e=Object(o.a)(["\n    fragment AddResourceCreateResourceMutationResult on Resource {\n  id\n  ...ResourcePreview\n}\n    ",""]);return tp=function(){return e},e}var rp=A()(tp(),Eo);function ap(){var e=Object(o.a)(["\n    mutation addResourceCreateResource($contextId: String!, $resource: ResourceInput!, $icon: UploadInput, $content: UploadInput!) {\n  createResource(contextId: $contextId, resource: $resource, content: $content, icon: $icon) {\n    id\n    ...AddResourceCreateResourceMutationResult\n  }\n}\n    ",""]);return ap=function(){return e},e}var op=A()(ap(),rp);var ip=function(){var e,n=q.c(op,e),t=Object(l.a)(n,2),r=t[0],o=t[1],c=eC(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,i,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.collectionId,i=n.content,c=n.icon,l=n.resource,!o.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{contextId:t,resource:l,content:la(i),icon:ca(c,null)},refetchQueries:[(a={collectionId:t,limit:Ee},u=void 0,{query:Xv,variables:a,context:u})]}));case 4:case"end":return e.stop()}var a,u}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,r]);return Object(h.useMemo)((function(){return{create:c}}),[c])};function cp(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return cp=function(){return e},e}function lp(){var e=Object(o.a)(["\n  height: 40px;\n  background: white;\n  border-radius: 2px;\n  border: ",";\n"]);return lp=function(){return e},e}function up(){var e=Object(o.a)(["\n  position: absolute;\n  left: -9999px;\n  &:hover {\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #97a395;\n    }\n  }\n  &:checked{\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #67d654;\n    }\n"]);return up=function(){return e},e}function mp(){var e=Object(o.a)(['\n  background-image: url("','");\n']);return mp=function(){return e},e}function sp(){var e=Object(o.a)(['\n  background-image: url("','");\n']);return sp=function(){return e},e}function dp(){var e=Object(o.a)(['\n  background-image: url("','");\n']);return dp=function(){return e},e}function fp(){var e=Object(o.a)(["\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 110px !important;\n  line-height: 38px !important;\n  display: inline-block;\n  background-size: contain;\n  margin-right: 4px;\n  border: 4px solid transparent;\n  text-indent: -9999px;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return fp=function(){return e},e}function vp(){var e=Object(o.a)(["\n  display: block;\n"]);return vp=function(){return e},e}function pp(){var e=Object(o.a)(["\n  width: 200px;\n"]);return pp=function(){return e},e}function gp(){var e=Object(o.a)(["\n  background: ",";\n"]);return gp=function(){return e},e}function bp(){var e=Object(o.a)([""]);return bp=function(){return e},e}var hp,xp=t(645),Ep=t(646),yp=t(647),Op={placeholders:{name:Object(Yn.i18nMark)("A title for the resource"),summary:Object(Yn.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(Yn.i18nMark)("Uploading the resource")}},jp=function(e){var n=e.cancel,t=e.formik,r=e.acceptedLicenses,a=e.hideIconField,o=Object(l.a)(r,3),i=o[0],u=o[1],m=o[2],s=h.useContext(Ea).i18n,d=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{resource:e}))}),[t]),f="string"===typeof t.values.resource?t.values.resource:"",v=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),p="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(wp,null,h.createElement(ec,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Resource"})),h.createElement(Yi,null,h.createElement(di,{initialUrl:f,onFileSelect:d,uploadType:"resource"}),h.createElement(kp,null,h.createElement(Yn.Trans,{id:"Max filesize: 20MB"})))),h.createElement(ec,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Title"})),h.createElement(Yi,null,h.createElement(h.Fragment,null,h.createElement(_p,{placeholder:s._(Op.placeholders.name),name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,90-t.values.name.length)),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(ec,{big:!0},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Description"})),h.createElement(Yi,null,h.createElement(h.Fragment,null,h.createElement(ma.d,{placeholder:s._(Op.placeholders.summary),name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,1e3-t.values.summary.length)))),a?null:h.createElement(ec,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Image"})),h.createElement(Yi,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:p,onFileSelect:v,filePattern:"image/*"})))),h.createElement(ec,null,h.createElement(Cp,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"CC License"})),h.createElement(Ip,{href:"https://blog.moodle.net/2019/free-cultural-works/",target:"blank"},h.createElement(Yn.Trans,{id:"Confused? Read this!"}))),h.createElement(Yi,null,h.createElement(Mp,{type:"radio",name:"license",id:i,value:i,checked:t.values.license===i,onChange:t.handleChange}),h.createElement(Tp,{htmlFor:i},i),h.createElement(Mp,{type:"radio",name:"license",id:u,value:u,checked:t.values.license===u,onChange:t.handleChange}),h.createElement(Sp,{htmlFor:u},u),h.createElement(Mp,{type:"radio",name:"license",id:m,value:m,checked:t.values.license===m,onChange:t.handleChange}),h.createElement(Pp,{htmlFor:m},m))),h.createElement(Zi,null,h.createElement(Lp,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Publish"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},kp=Sn(Pn.Text)(bp()),wp=Sn(Pn.Box)(gp(),(function(e){return e.theme.colors.appInverse})),Cp=Sn.div(pp()),Ip=Sn.a(vp()),Fp=Sn.label(fp()),Tp=Sn(Fp)(dp(),xp),Sp=Sn(Fp)(sp(),Ep),Pp=Sn(Fp)(mp(),yp),Mp=Sn.input(up(),Tp,Sp,Pp,Tp,Sp,Pp),_p=Sn(ma.b)(lp(),(function(e){return e.theme.colors.border})),Lp=Sn(ot)(cp()),Up=io.object({name:io.string().max(90).required("title is required"),summary:io.string().max(1e3),icon:(hp=io.mixed()).test.apply(hp,Object(w.a)(hc)),resource:io.mixed().required(),license:io.string()}),Ap={name:"",summary:"",icon:"",license:De[1],resource:null},Rp=function(e){var n=e.done,t=e.collectionId,r=ip().create,a=Object(Nt.a)({validationSchema:Up,initialValues:Ap,enableReinitialize:!0,validateOnBlur:!1,validateOnChange:!1,onSubmit:function(e){var a=e.resource,o=e.icon,i=e.name,c=e.license,l=e.summary;if(a)return r({collectionId:t,resource:{name:i,summary:l,license:c},content:a,icon:o}).then(n)}}),o=!a.values.resource||-1!==a.values.resource.type.indexOf("image");return Object(h.useEffect)((function(){o&&a.values.icon&&a.setValues(Object(c.a)(Object(c.a)({},a.values),{},{icon:null}))}),[a,o]),x.a.createElement(jp,{hideIconField:o,cancel:n,formik:a,acceptedLicenses:De})};function Bp(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return Bp=function(){return e},e}function zp(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return zp=function(){return e},e}function Np(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return Np=function(){return e},e}function Dp(){var e=Object(o.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Dp=function(){return e},e}function $p(){var e=Object(o.a)(["\n  color: ",";\n"]);return $p=function(){return e},e}function qp(){var e=Object(o.a)(["\n  color: ",";\n"]);return qp=function(){return e},e}function Wp(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return Wp=function(){return e},e}var Qp,Vp,Hp={placeholders:{name:Object(Yn.i18nMark)("Edit the name of the collection"),summary:Object(Yn.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an icon to represent the collection")}},Jp=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Ki,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(Xp,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(Yp,null,h.createElement(Zp,{fontWeight:"bold"},h.createElement(Kp,null,h.createElement(ma.b,{placeholder:Hp.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,60-t.values.name.length),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(Gp,{mt:2},h.createElement(Kp,null,h.createElement(ma.d,{placeholder:Hp.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,500-t.values.summary.length),t.errors.summary&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.summary)))))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},Kp=Sn(Yi)(Wp()),Zp=Sn(Pn.Text)(qp(),(function(e){return e.theme.colors.mediumdark})),Gp=Sn(Pn.Text)($p(),(function(e){return e.theme.colors.mediumdark})),Yp=Sn.div(Dp(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Np()),(function(e){return e.theme.colors.mediumdark})),Xp=Sn(Pn.Flex)(zp(),k.a.lessThan("medium")(Bp())),eg=io.object({name:io.string().min(2).max(60).required(),summary:io.string().max(500),icon:(Qp=io.mixed()).test.apply(Qp,Object(w.a)(hc))}),ng=function(e){var n=e.done,t=e.collectionId,r=Vv(t),a=r.collection,o=r.edit,i=Object(h.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),c=Object(Nt.a)({enableReinitialize:!0,onSubmit:function(e){return o({collection:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:eg,initialValues:i});return x.a.createElement(Jp,{cancel:n,formik:c})};function tg(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n"]);return tg=function(){return e},e}function rg(){var e=Object(o.a)(["\n  margin-bottom: 16px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  background: ",";\n"]);return rg=function(){return e},e}function ag(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return ag=function(){return e},e}function og(){var e=Object(o.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return og=function(){return e},e}function ig(){var e=Object(o.a)([""]);return ig=function(){return e},e}function cg(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return cg=function(){return e},e}function lg(){var e=Object(o.a)(["\n  color: ",";\n"]);return lg=function(){return e},e}function ug(){var e=Object(o.a)(["\n  border-top: 1px solid ",";\n"]);return ug=function(){return e},e}function mg(){var e=Object(o.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return mg=function(){return e},e}function sg(){var e=Object(o.a)(["\n  align-items: center;\n"]);return sg=function(){return e},e}function dg(){var e=Object(o.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return dg=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(Vp||(Vp={}));var fg=function(e){var n=e.collection;return n.status===Vp.Loading?x.a.createElement(Pn.Text,null,"Loading..."):x.a.createElement(Og,null,x.a.createElement(jg,null,x.a.createElement(yg,null,x.a.createElement(hg,{fontWeight:"bold"},n.name),x.a.createElement(xg,{mt:1},"+",n.fullName),x.a.createElement(Pn.Box,{mt:2},x.a.createElement(Us,{content:n.summary})),x.a.createElement(pg,{mt:2},x.a.createElement(Eg,{mt:3,alignItems:"center"},x.a.createElement(ot,{variant:n.following?"danger":"primary",disabled:n.toggleJoinFormik.isSubmitting,onClick:n.toggleJoinFormik.submitForm,isSubmitting:n.toggleJoinFormik.isSubmitting},n.following?"Unfollow":"Follow"),x.a.createElement(gg,{ml:2,onClick:n.toggleDropdown},x.a.createElement(mu.a,{size:20}),n.isOpenDropdown&&x.a.createElement(vg,null,x.a.createElement(Qc,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&x.a.createElement(Hc,{onClick:n.edit},x.a.createElement(Ac.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Edit the collection"}))),x.a.createElement(Hc,{onClick:n.flag},x.a.createElement(su.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},n.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this collection"}):x.a.createElement(Yn.Trans,{id:"Flag this collection"}))),n.isAdmin?x.a.createElement(bg,{onClick:n.addToFeatured},x.a.createElement(Uc.a,{size:20,color:"rgb(211, 103, 5)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Add to featured list"}))):null))))))))},vg=Sn(Pn.Box)(dg()),pg=Sn(Pn.Flex)(sg()),gg=Sn(Pn.Box)(mg(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),bg=Sn(Hc)(ug(),(function(e){return Object(tt.b)("0.1",e.theme.colors.light)})),hg=Sn(Pn.Text)(lg(),(function(e){return e.theme.colors.darker})),xg=Sn(Pn.Text)(cg(),(function(e){return e.theme.colors.mediumdark})),Eg=Sn(Pn.Flex)(ig()),yg=Sn.div(og(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(ag()),(function(e){return e.theme.colors.mediumdark})),Og=Sn(Pn.Box)(rg(),(function(e){return e.theme.colors.appInverse})),jg=Sn(Pn.Flex)(tg()),kg=function(e){var n=e.collectionId,t=e.basePath,r=Kv(n),a=r.collection,o=r.canModify,i=r.toggleJoin,c=ua().isAdmin,u=Object(Nt.a)({initialValues:{},onSubmit:i}),m=nC(),s=x.a.useReducer((function(e){return!e}),!1),d=Object(l.a)(s,2),f=d[0],v=d[1],p=Object(h.useReducer)((function(e){return!(!o||m())&&!e}),!1),g=Object(l.a)(p,2),b=g[0],E=g[1],y=a&&b?x.a.createElement(tc,{closeModal:E},x.a.createElement(ng,{collectionId:a.id,done:E})):null,O=Object(h.useReducer)((function(e){return!m()&&!e}),!1),j=Object(l.a)(O,2),k=j[0],w=j[1],C=a&&k?x.a.createElement(tc,{closeModal:w},x.a.createElement(Lm,{done:w,ctx:a})):null,I=Object(h.useReducer)((function(e){return!(!c||m())&&!e}),!1),F=Object(l.a)(I,2),T=F[0],S=F[1],P=a&&T?x.a.createElement(tc,{closeModal:S},x.a.createElement(hm,{done:S,ctx:a,featureId:null})):null,M=Object(h.useMemo)((function(){var e,n,r,i,l;return a?{collection:{isOpenDropdown:f,toggleDropdown:v,basePath:t,isAdmin:c,status:Vp.Loaded,canModify:o,following:!!a.myFollow,isFlagged:!!a.myFlag,followerCount:a.followerCount||0,icon:(null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:a.name,fullName:a.displayUsername,summary:a.summary||"",communityName:(null===(n=a.community)||void 0===n?void 0:n.name)||"",communityId:(null===(r=a.community)||void 0===r?void 0:r.id)||"",communityIcon:(null===(i=a.community)||void 0===i||null===(l=i.icon)||void 0===l?void 0:l.url)||"",toggleJoinFormik:u,edit:E,addToFeatured:S,flag:w}}:{collection:{status:Vp.Loading}}}),[a,f,t,c,o,u]);return x.a.createElement(x.a.Fragment,null,y,P,C,x.a.createElement(fg,M))};function wg(){var e=Object(o.a)(["\n    query userPreview($userId: String!) {\n  user(userId: $userId) {\n    id\n    ...UserPreview\n  }\n}\n    ",""]);return wg=function(){return e},e}var Cg=A()(wg(),Hr);var Ig=function(e){var n,t,r=(t={variables:{userId:e}},q.d(Cg,t)),a=tC(null===(n=r.data)||void 0===n?void 0:n.user).toggleFollow;return Object(h.useMemo)((function(){var e;return{user:null===(e=r.data)||void 0===e?void 0:e.user,toggleFollow:a}}),[r,a])},Fg=t(34);function Tg(){var e=Object(o.a)(["\n  align-items: center;\n"]);return Tg=function(){return e},e}function Sg(){var e=Object(o.a)(["\n  color: ",";\n  flex: 1;\n"]);return Sg=function(){return e},e}function Pg(){var e=Object(o.a)(["\n  flex: 1;\n"]);return Pg=function(){return e},e}function Mg(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return Mg=function(){return e},e}function _g(){var e=Object(o.a)(["\n  border: ",";\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none;\n  }\n"]);return _g=function(){return e},e}function Lg(){var e=Object(o.a)(["\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n"]);return Lg=function(){return e},e}var Ug=function(e){var n=e.image,t=e.name,r=e.username,a=e.bio,o=e.profileUrl;e.toggleFollowFormik,e.hideActions;return x.a.createElement(Ag,{to:o},x.a.createElement(Rg,{p:3},x.a.createElement(Tc,{variant:"avatar",src:n}),x.a.createElement(zg,{ml:2},x.a.createElement(Dg,null,x.a.createElement(Bg,{variant:"subhead"},t),x.a.createElement(Ng,{ml:1},r)),x.a.createElement(Pn.Box,{mr:1},x.a.createElement(Pn.Text,{variant:"text"},a)))))},Ag=Sn(Ht.c)(Lg()),Rg=Sn(Pn.Flex)(_g(),(function(e){return e.theme.colors.border}),(function(e){return Object(tt.b)("0.05",e.theme.colors.mediumlight)})),Bg=Sn(Pn.Text)(Mg(),(function(e){return e.theme.colors.dark})),zg=Sn(Pn.Box)(Pg()),Ng=Sn(Pn.Text)(Sg(),(function(e){return e.theme.colors.mediumdark})),Dg=Sn(Pn.Flex)(Tg()),$g=function(e){var n=e.userId,t=e.flagged,r=Ig(n),a=r.user,o=r.toggleFollow,i=Object(Nt.a)({initialValues:{},onSubmit:o}),c=Object(h.useMemo)((function(){if(!a)return null;var e=!!t,n=a.userName,r=a.displayUsername,o=a.image,c=a.icon,l=a.summary,u=a.myFollow;return{image:(null===c||void 0===c?void 0:c.url)||(null===o||void 0===o?void 0:o.url)||"",name:n||"",username:r,bio:l||"",isFollowing:!!u,toggleFollowFormik:i,profileUrl:IO.getPath({userId:a.id,tab:void 0},void 0),hideActions:e}}),[a,i,t]);return c&&x.a.createElement(Fg.a,{px:2,py:1,pb:0},x.a.createElement(Ug,c))};function qg(){var e=Object(o.a)(["\n    fragment ShareLinkWebMeta on WebMetadata {\n  image\n  summary\n  title\n  url\n}\n    "]);return qg=function(){return e},e}var Wg=A()(qg());function Qg(){var e=Object(o.a)(["\n    mutation shareLinkFetchWebMeta($url: String!) {\n  fetchWebMetadata(url: $url) {\n    ...ShareLinkWebMeta\n  }\n}\n    ",""]);return Qg=function(){return e},e}var Vg=A()(Qg(),Wg);var Hg=t(756);function Jg(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return Jg=function(){return e},e}function Kg(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  ",";\n"]);return Kg=function(){return e},e}function Zg(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return Zg=function(){return e},e}function Gg(){var e=Object(o.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Gg=function(){return e},e}function Yg(){var e=Object(o.a)(["\n  color: ",";\n"]);return Yg=function(){return e},e}function Xg(){var e=Object(o.a)(["\n  color: ",";\n"]);return Xg=function(){return e},e}function eb(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return eb=function(){return e},e}function nb(){var e=Object(o.a)(["\n  padding: 8px;\n  background: ",";\n  border-radius: 4px;\n"]);return nb=function(){return e},e}var tb={placeholders:{name:Object(Yn.i18nMark)("Type the name of the resource"),summary:Object(Yn.i18nMark)("Please describe what the resource is about..."),icon:Object(Yn.i18nMark)("Enter the URL of an icon to represent the resource")}},rb=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(ab,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(ub,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(di,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(lb,null,h.createElement(ib,{fontWeight:"bold"},h.createElement(ob,null,h.createElement(ma.b,{placeholder:tb.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(Gi,null,60-t.values.name.length),t.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.name)))),h.createElement(cb,{mt:2},h.createElement(ob,null,h.createElement(ma.d,{placeholder:tb.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(Gi,null,500-t.values.summary.length),t.errors.summary&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},t.errors.summary)))))),h.createElement(Zi,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Share"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},ab=Sn(Ki)(nb(),(function(e){return e.theme.colors.appInverse})),ob=Sn(Yi)(eb()),ib=Sn(Pn.Text)(Xg(),(function(e){return e.theme.colors.mediumdark})),cb=Sn(Pn.Text)(Yg(),(function(e){return e.theme.colors.mediumdark})),lb=Sn.div(Gg(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Zg()),(function(e){return e.theme.colors.mediumdark})),ub=Sn(Pn.Flex)(Kg(),k.a.lessThan("medium")(Jg()));function mb(){var e=Object(o.a)(["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  border: 0;\n  background: transparent;\n  box-shadow: none;\n  width: 40px;\n  height: 37px;\n  cursor: pointer;\n  color: ",";\n  svg {\n    stroke: "," !important;\n  }\n  .--rtl & {\n    left: 2px;\n    right: auto;\n  }\n"]);return mb=function(){return e},e}function sb(){var e=Object(o.a)(["\n  height: 40px;\n  background: ",";\n  border-radius: 4px;\n  border: 3px solid "," !important;\n"]);return sb=function(){return e},e}function db(){var e=Object(o.a)(["\n  padding: 10px;\n"]);return db=function(){return e},e}function fb(){var e=Object(o.a)(["\n  background: ",";\n  border-top: ",";\n  padding: 16px;\n"]);return fb=function(){return e},e}function vb(){var e=Object(o.a)(["\n  position: relative;\n"]);return vb=function(){return e},e}var pb,gb={placeholders:{url:Object(Yn.i18nMark)("Enter the URL of the resource"),name:Object(Yn.i18nMark)("A name or title for the resource"),summary:Object(Yn.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(Yn.i18nMark)("Fetch the resource"),image:Object(Yn.i18nMark)("Enter the URL of an image to represent the resource")}},bb=function(e){var n=h.useContext(Ea).i18n;return h.createElement(h.Fragment,null,h.createElement(xb,null,h.createElement(hb,{onSubmit:e.FetchLinkFormik.handleSubmit},h.createElement(yb,{placeholder:n._(gb.placeholders.url),onChange:e.FetchLinkFormik.handleChange,name:"fetchUrl",value:e.FetchLinkFormik.values.fetchUrl}),h.createElement(Ob,{disabled:e.FetchLinkFormik.isSubmitting,type:"submit"},h.createElement(Hg.a,{width:18,height:18,strokeWidth:2}))),e.FetchLinkFormik.errors.fetchUrl&&h.createElement(Oi,{variant:"negative"},e.FetchLinkFormik.errors.fetchUrl)),e.FetchLinkFormik.isSubmitting?h.createElement(Eb,null,h.createElement(nt,null)):null,e.isFetched?h.createElement(rb,{formik:e.formik,cancel:e.cancelFetched}):null)},hb=Sn.form(vb()),xb=Sn(Pn.Box)(fb(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Eb=Sn.div(db()),yb=Sn(ma.b)(sb(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.medium})),Ob=Sn.button(mb(),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.colors.secondary})),jb=io.object({name:io.string().max(90).required(),summary:io.string().max(1e3),icon:(pb=io.mixed()).test.apply(pb,Object(w.a)(hc))}),kb={name:"",summary:"",icon:""},wb={fetchUrl:""},Cb=function(e){var n,t,r=e.done,a=e.collectionId,o=ip().create,i=q.c(Vg,t),c=Object(l.a)(i,2),u=c[0],m=c[1],s=Object(h.useRef)(io.object({fetchUrl:io.string().matches(Ne).required(xa._("url is required"))})).current,d=Object(Nt.a)({initialValues:wb,enableReinitialize:!0,validationSchema:s,onSubmit:function(e){var n=e.fetchUrl;return u({variables:{url:n}})}}),f=null===(n=m.data)||void 0===n?void 0:n.fetchWebMetadata,v=Object(Nt.a)({initialValues:f?{icon:f.image||"",name:f.title||"",summary:f.summary||""}:kb,validationSchema:jb,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.name,i=e.summary,c=(null===f||void 0===f?void 0:f.url)||d.values.fetchUrl;if(c)return o({collectionId:a,content:c,icon:n,resource:{name:t,summary:i}}).then(r)}});return x.a.createElement(bb,{FetchLinkFormik:d,cancelFetched:r,formik:v,isFetched:!!f})};function Ib(){var e=Object(o.a)(["\n  background: ",";\n  button {\n    width: 100%;\n    height: 50px;\n  }\n"]);return Ib=function(){return e},e}function Fb(){var e=Object(o.a)(["\n  text-transform: capitalize;\n"]);return Fb=function(){return e},e}var Tb,Sb=function(e){var n=e.HeroCollection,t=e.ShareLink,r=e.UploadResourcePanel,a=e.Followers,o=e.Resources,i=e.tabPaths,c=e.loadMoreResources,l=e.loadMoreFollowers,u=e.isCommunityMember,m=e.communityId,s=e.communityName,d=e.communityIcon,f=e.shareLink,v=e.upload;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,n,h.createElement(Mb,{tabPaths:i}),h.createElement(Fn.d,null,h.createElement(Fn.b,{path:i.followers},h.createElement(h.Fragment,null,h.createElement(wt,null,a),l&&h.createElement(ct,{LoadMoreFormik:l}))),h.createElement(Fn.b,{exact:!0,path:i.resources},h.createElement(h.Fragment,null,u?h.createElement(_b,{p:3},h.createElement(ot,{mr:2,onClick:f,variant:"outline"},h.createElement(Yn.Trans,{id:"Share link"})),h.createElement(ot,{onClick:v,variant:"outline"},h.createElement(Yn.Trans,{id:"Add new resource"}))):null,t,r,h.createElement(wt,null,o.map((function(e){return h.createElement(Fg.a,{mx:3,my:2,mb:3,key:e.key||""},e)}))),c&&h.createElement(ct,{LoadMoreFormik:c}))))))),h.createElement(Hn,null,h.createElement(Pb,{mb:2,variant:"suptitle"},h.createElement(Yn.Trans,{id:"Community"})),h.createElement(rs,{id:m,name:s,icon:d})))},Pb=Sn(Pn.Text)(Fb()),Mb=function(e){var n=e.tabPaths;return h.createElement(kt,{p:3,pt:3},h.createElement(Ht.c,{exact:!0,to:n.resources},h.createElement(Yn.Trans,{id:"Resources"})),h.createElement(Ht.c,{exact:!0,to:n.followers},h.createElement(Yn.Trans,{id:"Followers"})))},_b=Sn(Pn.Flex)(Ib(),(function(e){return e.theme.colors.appInverse}));!function(e){e[e.Resources=0]="Resources",e[e.Followers=1]="Followers"}(Tb||(Tb={}));var Lb={id:"Collection {name} - Followers"},Ub={id:"Collection {name} - Resources"},Ab=function(e){var n=Object(h.useState)(),t=Object(l.a)(n,2),r=t[0],a=t[1],o=Object(h.useCallback)((function(){return a(void 0)}),[]),i=e.collectionId,c=e.basePath,u=e.tab,m=Kv(e.collectionId),s=m.collection,d=m.isCommunityMember,f=u===Tb.Followers?Lb:(Tb.Resources,Ub);fo(!!(null===s||void 0===s?void 0:s.name)&&f,s);var v=np(e.collectionId).collectionFollowersPage,p=Object(l.a)(v.formiks,1)[0],g=ep(e.collectionId).resourcesPage,b=Object(l.a)(g.formiks,1)[0],E=nC(),y=x.a.createElement(kg,{basePath:c,collectionId:i}),O=g.edges.map((function(e){return x.a.createElement(Ky,{resourceId:e.id,key:e.id})})).filter((function(e){return!!e})),j=v.edges.map((function(e){return e.creator&&x.a.createElement($g,{userId:e.creator.userId,key:e.creator.userId})})).filter((function(e){return!!e})),k="upload"===r?x.a.createElement(Rp,{done:o,collectionId:i}):null,w="share"===r?x.a.createElement(Cb,{collectionId:i,done:o}):null,C=Object(h.useMemo)((function(){var e,n;if(!s)return null;var t={followers:cy.getPath({collectionId:i,tab:"followers"},void 0),resources:cy.getPath({collectionId:i,tab:void 0},void 0)};return{ShareLink:w,HeroCollection:y,Resources:O,UploadResourcePanel:k,tabPaths:t,Followers:j,communityIcon:(null===(e=s.community)||void 0===e||null===(n=e.icon)||void 0===n?void 0:n.url)||"",communityId:s.community?s.community.id:"",communityName:s.community?s.community.name:"",loadMoreFollowers:p,loadMoreResources:b,isCommunityMember:d,shareLink:function(){return a("share"===r||E()?void 0:"share")},upload:function(){return a("upload"===r||E()?void 0:"upload")}}}),[s,i,w,y,O,k,j,p,b,d,r,E]);return C&&x.a.createElement(Sb,C)};function Rb(){var e=Object(o.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return Rb=function(){return e},e}var Bb,zb=Sn.div(Rb()),Nb=function(){return h.createElement(h.Fragment,null,h.createElement(zb,null,h.createElement(Pn.Box,{sx:{textAlign:"center"}},h.createElement(Ia,null),h.createElement(Pn.Heading,null,h.createElement("span",{"aria-label":"icon",role:"img"},"\ud83e\udd14"),h.createElement(Yn.Trans,{id:"Page not found"})))))},Db={id:"Page Not Found"},$b=function(){return fo(Db,{}),x.a.createElement(Nb,null)},qb=function(){var e,n,t,r=(t={variables:{limit:10}},q.d(zr,t)),a=Dt(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.communityFollows,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:10}),updateQuery:function(e,n){var r,a,o,i,l,u,m=n.fetchMoreResult;return(null===m||void 0===m||null===(r=m.me)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.communityFollows)&&(null===(o=e.me)||void 0===o||null===(i=o.user)||void 0===i?void 0:i.communityFollows)?Object(c.a)(Object(c.a)({},m),{},{me:Object(c.a)(Object(c.a)({},m.me),{},{user:Object(c.a)(Object(c.a)({},m.me.user),{},{communityFollows:t({prev:null===(l=e.me)||void 0===l?void 0:l.user.communityFollows,fetched:null===(u=m.me)||void 0===u?void 0:u.user.communityFollows})})})}):e}})}));return Object(h.useMemo)((function(){return{myCommunityFollowsPage:a}}),[a])},Wb=t(757);function Qb(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Qb=function(){return e},e}function Vb(){var e=Object(o.a)(["\n  height: 50px;\n  line-height: 50px;\n  font-weight: 600;\n  color: ",";\n  a:focus,\n  a:active {\n    color: inherit;\n  }\n  ",";\n"]);return Vb=function(){return e},e}function Hb(){var e=Object(o.a)(["\nimg {\n    margin-right: 0;\n}\n"]);return Hb=function(){return e},e}function Jb(){var e=Object(o.a)(["\n  border-radius: 4px;\n  padding: 0px 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return Jb=function(){return e},e}function Kb(){var e=Object(o.a)(["\n  position: relative;\n  color: inherit;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    div {\n      color: ",";\n      position: relative;\n    }\n  }\n  div {\n    color: ",";\n  }\n"]);return Kb=function(){return e},e}function Zb(){var e=Object(o.a)(["\n  margin-bottom: 0px;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    > div {\n      background: ",";\n    }\n    div {\n      color: "," !important;\n    }\n    position: relative;\n  }\n"]);return Zb=function(){return e},e}function Gb(){var e=Object(o.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return Gb=function(){return e},e}function Yb(){var e=Object(o.a)(["\n  overflow-y: auto;\n  flex: 1;\n"]);return Yb=function(){return e},e}function Xb(){var e=Object(o.a)(["\n    position: relative;\nwidth: 100%\n"]);return Xb=function(){return e},e}function eh(){var e=Object(o.a)(["\nwidth: auto;\n"]);return eh=function(){return e},e}function nh(){var e=Object(o.a)(["\n  justify-content: space-between;\n  height: 100%;\n  display: flex;\n  "," ",";\n"]);return nh=function(){return e},e}function th(){var e=Object(o.a)(["\n  transition: 'all 250ms ease';\n  flex: 1;\n"]);return th=function(){return e},e}function rh(){var e=Object(o.a)(["\n  //   width: 50px;\n  // "]);return rh=function(){return e},e}function ah(){var e=Object(o.a)(["\n  width: 240px;\n  // ","\n"]);return ah=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(Bb||(Bb={}));var oh=Sn(Pn.Flex)(ah(),k.a.lessThan("medium")(rh())),ih=Sn(Pn.Box)(th()),ch=Sn(Pn.Box)(nh(),k.a.lessThan("1280px")(eh()),k.a.lessThan("860px")(Xb())),lh=Sn(Pn.Box)(Yb()),uh=Sn(Pn.Box)(Gb()),mh=Sn(Ht.c)(Zb(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.appInverse})),sh=Sn(Ht.c)(Kb(),(function(e){return e.theme.colors.primary}),(function(e){return e.isActive?e.theme.colors.primary:e.theme.colors.darker})),dh=Sn(Pn.Flex)(Jb(),(function(e){return e.theme.colors.medium}),k.a.lessThan("1280px")(Hb())),fh=Sn(Pn.Text)(Vb(),(function(e){return e.theme.colors.darker}),Object(tt.c)("220px")),vh=Sn(fh)(Qb()),ph=function(e){var n=h.useContext(Ea).i18n;return h.createElement(h.Fragment,null,e.isSidebarOpen?h.createElement(oh,{className:"sidebar"},h.createElement(ih,null,h.createElement(ch,null,e.status===Bb.Loading?h.createElement(Pn.Text,null,"Loading"):h.createElement(lh,null,h.createElement(h.Fragment,null,h.createElement(uh,null,h.createElement(sh,{exact:!0,to:e.discoverPath},h.createElement(dh,{alignItems:"center"},h.createElement(Pn.Box,{height:"50px"},h.createElement(Wb.a,{size:36,strokeWidth:"1"})),h.createElement(vh,{variant:"link"},h.createElement(Yn.Trans,{id:"Discover"})))),h.createElement(sh,{exact:!0,to:e.homePath},h.createElement(dh,{alignItems:"center"},h.createElement(Tc,{size:"s",src:Oe}),h.createElement(vh,{variant:"link"},n._("My Timeline"))))),h.createElement(uh,null,e.communities.map((function(e,n){return h.createElement(mh,{key:e.link,to:e.link},h.createElement(dh,{alignItems:"center",mb:2},h.createElement(Tc,{size:"s",initials:e.name.substr(0,2),src:e.icon}),h.createElement(vh,{variant:"link"},e.name)))})),e.LoadMoreFormik&&h.createElement(ct,{LoadMoreFormik:e.LoadMoreFormik}))))))):null)},gh=function(){var e,n,t,r=q.d(im,t),a=Dt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCollections,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(r=o.instance)||void 0===r?void 0:r.featuredCollections)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCollections)?Object(c.a)(Object(c.a)({},o),{},{instance:Object(c.a)(Object(c.a)({},o.instance),{},{feturedCollections:t({prev:e.instance.featuredCollections,fetched:o.instance.featuredCollections})})}):e}})}));return Object(h.useMemo)((function(){return{featuredCollectionsPage:a}}),[a])},bh=t(200),hh=t.n(bh),xh=(t(338),t(339),function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,o=e.strokeWidth,i=void 0===o?2:o,c=e.color,l=void 0===c?"#333":c;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:l,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clipboard"},h.createElement("polyline",{points:"15 18 9 12 15 6"}))}),Eh=function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,o=e.strokeWidth,i=void 0===o?2:o,c=e.color,l=void 0===c?"#333":c;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:l,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-users"},h.createElement("polyline",{points:"9 18 15 12 9 6"}))};function yh(){var e=Object(o.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return yh=function(){return e},e}function Oh(){var e=Object(o.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return Oh=function(){return e},e}function jh(){var e=Object(o.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return jh=function(){return e},e}function kh(){var e=Object(o.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return kh=function(){return e},e}var wh=Sn(Fg.b)(kh(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Ch=Sn(Fg.b)(jh(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Ih=Sn(Fg.b)(Oh()),Fh=Sn(Fg.b)(yh(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),Th=function(e){var n=Object(h.useRef)();return x.a.createElement(x.a.Fragment,null,x.a.createElement(wh,null,x.a.createElement("h5",null,x.a.createElement(Yn.Trans,{id:"Featured collections"})," "),x.a.createElement(Ch,null,e.canEdit?x.a.createElement(Ih,null,x.a.createElement(Fh,{onClick:e.toggleEdit},e.isEditing?x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Done"})):x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Edit"})))):null,x.a.createElement("span",{onClick:n.current&&n.current.slickPrev},x.a.createElement(xh,{width:26,height:26,strokeWidth:1,color:"#333"})),x.a.createElement("span",{onClick:n.current&&n.current.slickNext},x.a.createElement(Eh,{width:26,height:26,strokeWidth:1,color:"#333"})))),x.a.createElement(Fg.a,{px:2},x.a.createElement(hh.a,Object.assign({ref:function(e){return n.current=e||void 0}},Sh(e.featuredCollections.length)),e.featuredCollections)))},Sh=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function Ph(){var e=Object(o.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return Ph=function(){return e},e}function Mh(){var e=Object(o.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return Mh=function(){return e},e}function _h(){var e=Object(o.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return _h=function(){return e},e}function Lh(){var e=Object(o.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return Lh=function(){return e},e}function Uh(){var e=Object(o.a)(["\n  display: block;\n"]);return Uh=function(){return e},e}function Ah(){var e=Object(o.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return Ah=function(){return e},e}var Rh=t(340),Bh=Sn(Pn.Box)(Ah(),k.a.lessThan("medium")(Uh())),zh=Sn.div(Lh()),Nh=Sn.div(_h()),Dh=Sn(Pn.Text)(Mh(),Object(tt.c)("170px")),$h=Sn(Pn.Box)(Ph(),(function(e){return e.theme.colors.medium})),qh=function(e){var n=e.collection,t=e.canEdit,r=e.isEditing,a=e.remove;return h.createElement(Bh,{py:1,mb:2,mr:3},t&&r?h.createElement($h,{onClick:a},h.createElement(Ii.a,{color:"#fff",size:16})):null,h.createElement(Ht.b,{to:n.link},h.createElement(zh,{style:{backgroundImage:'url("'.concat(n.icon||Rh,'")')}},h.createElement(Nh,null,h.createElement(Dh,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},Wh=function(){var e=ua().isAdmin,n=gh().featuredCollectionsPage,t=Object(h.useReducer)((function(e){return!e}),!1),r=Object(l.a)(t,2),a=r[0],o=r[1],i=Object(h.useState)(null),c=Object(l.a)(i,2),u=c[0],m=c[1],s=Object(h.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Collection"!==r.__typename)return null;var o={collection:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:cy.getPath({collectionId:r.id,tab:void 0},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return x.a.createElement(qh,Object.assign({key:r.id},o))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(h.useMemo)((function(){var e;return u&&"Collection"===(null===(e=u.context)||void 0===e?void 0:e.__typename)&&x.a.createElement(tc,{closeModal:function(){return m(null)}},x.a.createElement(hm,{ctx:u.context,done:function(){return m(null)},featureId:u.id}))}),[u]),f=Object(h.useMemo)((function(){return{featuredCollections:s,isEditing:a,toggleEdit:o,canEdit:e}}),[s,a,e]);return x.a.createElement(x.a.Fragment,null,d,x.a.createElement(Th,f))};function Qh(){var e=Object(o.a)(["\n  background: aliceblue;\n  text-align: center;\n  padding: 4px;\n  border-radius: 4px;\n"]);return Qh=function(){return e},e}var Vh=function(e){var n;return h.createElement(h.Fragment,null,h.createElement(Hn,null,h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular communities"),h.createElement(Zn,null,null===(n=e.communities)||void 0===n?void 0:n.map((function(e,n){var t=e.isLocal?"/communities/".concat(e.id):e.canonicalUrl;return h.createElement(Gn,{key:n,mb:3},h.createElement("a",{href:null!==t&&void 0!==t?t:"/"},e.name))})))),h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular hashtags"),h.createElement(Zn,null,h.createElement(Gn,{mb:3},"#pedagogy"),h.createElement(Gn,{mb:3},"#transition"),h.createElement(Gn,{mb:3},"#english"),h.createElement(Gn,{mb:3},"#template"),h.createElement(Gn,{mb:3},"#assessment"),h.createElement(Gn,null,h.createElement(Hh,{variant:"text"},h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),h.createElement(Yn.Trans,{id:"This feature is coming soon!"}),h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))),h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular categories"),h.createElement(Zn,null,h.createElement(Gn,{mb:3},"Humanities"),h.createElement(Gn,{mb:3},"Behavioural science"),h.createElement(Gn,{mb:3},"English"),h.createElement(Gn,{mb:3},"Romana"),h.createElement(Gn,{mb:3},"Postgraduate"),h.createElement(Hh,{variant:"text"},h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),h.createElement(Yn.Trans,{id:"This feature is coming soon!"})," ",h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))))},Hh=Sn(Pn.Text)(Qh());function Jh(){var e=Object(o.a)(["\n  query popularCommunites {\n    communities(limit: 5) {\n      totalCount\n      edges {\n        id\n        name\n        isLocal\n        canonicalUrl\n      }\n    }\n  }\n"]);return Jh=function(){return e},e}var Kh=A()(Jh()),Zh=function(){var e=Object(q.a)(),n=Object(h.useState)([]),t=Object(l.a)(n,2),r=t[0],a=t[1];return Object(h.useEffect)((function(){e.query({query:Kh}).then((function(e){var n;e.data&&e.data.communities&&a(null!==(n=e.data.communities.edges)&&void 0!==n?n:[])}))}),[e]),x.a.createElement(Vh,{communities:r})};function Gh(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  border-radius: 8px;\n  max-height: 270px;\n"]);return Gh=function(){return e},e}function Yh(){var e=Object(o.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n"]);return Yh=function(){return e},e}var Xh=function(e){var n=e.ActivitiesBox,t=e.FeaturedCommunitiesBox,r=e.FeaturedCollectionsBox,a=e.CollectionsBoxes,o=e.CommunitiesBoxes,i=e.LoadMoreFormik,c=e.tabPaths;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(tx,null,t),h.createElement(tx,{mt:2},r),h.createElement(jt,null,h.createElement(ex,{tabPaths:c}),h.createElement(Fn.d,null,h.createElement(Fn.b,{exact:!0,path:c.communities},h.createElement(wt,null,o),i&&h.createElement(ct,{LoadMoreFormik:i})),h.createElement(Fn.b,{exact:!0,path:c.collections},h.createElement(wt,null,h.createElement(It,null,a)),i&&h.createElement(ct,{LoadMoreFormik:i})),h.createElement(Fn.b,{exact:!0,path:c.timeline},h.createElement(xt,null,n),i&&h.createElement(ct,{LoadMoreFormik:i})))))),h.createElement(Zh,null))},ex=function(e){var n=e.tabPaths;return h.createElement(h.Fragment,null,h.createElement(nx,{px:2,mt:2},h.createElement(Pn.Text,{variant:"suptitle"},"Browse Home instance")),h.createElement(kt,null,h.createElement(Ht.c,{exact:!0,to:n.timeline},h.createElement(Yn.Trans,{id:"Timeline"})),h.createElement(Ht.c,{exact:!0,to:n.communities},h.createElement(Yn.Trans,{id:"All communities"})),h.createElement(Ht.c,{exact:!0,to:n.collections},h.createElement(Yn.Trans,{id:"All collections"}))))},nx=Sn(Pn.Box)(Yh(),(function(e){return e.theme.colors.appInverse})),tx=Sn(Pn.Flex)(Gh(),(function(e){return e.theme.colors.appInverse})),rx=function(){var e,n,t,r=(t={variables:{limit:Ee}},q.d(Ro,t)),a=Dt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.outbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(r=o.instance)||void 0===r?void 0:r.outbox)&&(null===(a=e.instance)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},o),{},{instance:Object(c.a)(Object(c.a)({},o.instance),{},{outbox:t({prev:e.instance.outbox,fetched:o.instance.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:a}}),[a])},ax=function(){var e,n,t,r=q.d(sm,t),a=Dt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCommunities,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(r=o.instance)||void 0===r?void 0:r.featuredCommunities)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCommunities)?Object(c.a)(Object(c.a)({},o),{},{instance:Object(c.a)(Object(c.a)({},o.instance),{},{featuredCommunities:t({prev:e.instance.featuredCommunities,fetched:o.instance.featuredCommunities})})}):e}})}));return Object(h.useMemo)((function(){return{featuredCommunitiesPage:a}}),[a])};function ox(){var e=Object(o.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return ox=function(){return e},e}function ix(){var e=Object(o.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return ix=function(){return e},e}function cx(){var e=Object(o.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return cx=function(){return e},e}function lx(){var e=Object(o.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return lx=function(){return e},e}var ux=Sn(Fg.b)(lx(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),mx=Sn(Fg.b)(cx(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),sx=Sn(Fg.b)(ix()),dx=Sn(Fg.b)(ox(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),fx=function(e){var n=Object(h.useRef)();return x.a.createElement(x.a.Fragment,null,x.a.createElement(ux,null,x.a.createElement("h5",null,x.a.createElement(Yn.Trans,{id:"Featured communities"})," "),x.a.createElement(mx,null,e.canEdit?x.a.createElement(sx,null,x.a.createElement(dx,{onClick:e.toggleEdit},e.isEditing?x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Done"})):x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Edit"})))):null,x.a.createElement("span",{onClick:n.current&&n.current.slickPrev},x.a.createElement(xh,{width:26,height:26,strokeWidth:1,color:"#333"})),x.a.createElement("span",{onClick:n.current&&n.current.slickNext},x.a.createElement(Eh,{width:26,height:26,strokeWidth:1,color:"#333"})))),x.a.createElement(Fg.a,{px:2},x.a.createElement(hh.a,Object.assign({ref:function(e){return n.current=e||void 0}},vx(e.featuredCommunities.length)),e.featuredCommunities)))},vx=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function px(){var e=Object(o.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return px=function(){return e},e}function gx(){var e=Object(o.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return gx=function(){return e},e}function bx(){var e=Object(o.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return bx=function(){return e},e}function hx(){var e=Object(o.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return hx=function(){return e},e}function xx(){var e=Object(o.a)(["\n  display: block;\n"]);return xx=function(){return e},e}function Ex(){var e=Object(o.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return Ex=function(){return e},e}var yx,Ox=t(340),jx=Sn(Pn.Box)(Ex(),k.a.lessThan("medium")(xx())),kx=Sn.div(hx()),wx=Sn.div(bx()),Cx=Sn(Pn.Text)(gx(),Object(tt.c)("170px")),Ix=Sn(Pn.Box)(px(),(function(e){return e.theme.colors.medium})),Fx=function(e){var n=e.community,t=e.canEdit,r=e.isEditing,a=e.remove;return h.createElement(jx,{py:1,mb:2,mr:3},t&&r?h.createElement(Ix,{onClick:a},h.createElement(Ii.a,{color:"#fff",size:16})):null,h.createElement(Ht.b,{to:n.link},h.createElement(kx,{style:{backgroundImage:'url("'.concat(n.icon||Ox,'")')}},h.createElement(wx,null,h.createElement(Cx,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},Tx=function(){var e=ua().isAdmin,n=ax().featuredCommunitiesPage,t=Object(h.useReducer)((function(e){return!e}),!1),r=Object(l.a)(t,2),a=r[0],o=r[1],i=Object(h.useState)(null),c=Object(l.a)(i,2),u=c[0],m=c[1],s=Object(h.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Community"!==r.__typename)return null;var o={community:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:Jk.getPath({tab:void 0,communityId:r.id},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return x.a.createElement(Fx,Object.assign({key:r.id},o))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(h.useMemo)((function(){var e;return u&&"Community"===(null===(e=u.context)||void 0===e?void 0:e.__typename)&&x.a.createElement(tc,{closeModal:function(){return m(null)}},x.a.createElement(hm,{ctx:u.context,done:function(){return m(null)},featureId:u.id}))}),[u]),f=Object(h.useMemo)((function(){return{isEditing:a,toggleEdit:o,featuredCommunities:s,canEdit:e}}),[a,s,e]);return x.a.createElement(x.a.Fragment,null,d,x.a.createElement(fx,f))},Sx=function(){var e,n,t=(n={variables:{limit:Ee}},q.d(No,n)),r=Dt(null===(e=t.data)||void 0===e?void 0:e.communities,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.communities)&&e.communities?Object(c.a)(Object(c.a)({},t),{},{communities:r({prev:e.communities,fetched:t.communities})}):e}})}));return Object(h.useMemo)((function(){return{allCommunitiesPage:r}}),[r])};!function(e){e[e.Activities=0]="Activities",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections"}(yx||(yx={}));var Px={id:"Discover Activities"},Mx={id:"Discover Collections"},_x={id:"Discover Communities"},Lx=function(e){e.basePath;var n=e.tab,t=n===yx.Collections?Mx:n===yx.Communities?_x:(yx.Activities,Px);fo(t);var r=rx().activitiesPage,a=Object(l.a)(r.formiks,1)[0],o=Sx().allCommunitiesPage,i=Object(l.a)(o.formiks,1)[0],c=Qt().allCollectionsPage,u=Object(l.a)(c.formiks,1)[0],m=Object(h.useMemo)((function(){var e=x.a.createElement(Wh,null),t=x.a.createElement(Tx,null),l=x.a.createElement(x.a.Fragment,null,r.edges.map((function(e){return x.a.createElement(GO,{activityId:e.id,key:e.id})}))),m=x.a.createElement(x.a.Fragment,null,c.edges.map((function(e){return x.a.createElement(Fg.a,{m:2,key:e.id},x.a.createElement(lC,{collectionId:e.id}))}))),s=x.a.createElement(x.a.Fragment,null,o.edges.map((function(e){return x.a.createElement(Fg.a,{m:2,key:e.id},x.a.createElement(yv,{communityId:e.id}))}))),d=n===yx.Activities?a:n===yx.Collections?u:n===yx.Communities?i:null;return{tabPaths:{collections:Rx.getPath({tab:"collections"},void 0),communities:Rx.getPath({tab:"communities"},void 0),timeline:Rx.getPath({tab:void 0},void 0)},ActivitiesBox:l,FeaturedCollectionsBox:e,FeaturedCommunitiesBox:t,CollectionsBoxes:m,CommunitiesBoxes:s,LoadMoreFormik:d}}),[r.edges,a,c.edges,u,o.edges,i,n]);return x.a.createElement(Xh,m)},Ux=function(e){var n,t="string"===typeof e.path?[e.path]:(null===(n=e.path)||void 0===n?void 0:n.length)?e.path:[],r=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t[r],o=new URLSearchParams(n||{}).toString(),i=Object(Fn.f)(a,e);return o?"".concat(i,"?").concat(o):i};return{is:function(n){return!!Object(Fn.g)(n,e)},getSimpleLink:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!t||t.isLocal,i=r(e,n,a),c=o?i:(null===t||void 0===t?void 0:t.canonicalUrl)||"#?#",l={external:!o,url:c};return l},getPath:r}},Ax={exact:!0,path:"/discover/:tab(collections|communities)?",component:function(e){var n=e.match.params.tab,t="collections"===n?yx.Collections:"communities"===n?yx.Communities:n?null:yx.Activities,r=Object(h.useMemo)((function(){return null===t?null:{basePath:"/discover",tab:t}}),[t]);return r?x.a.createElement(oy,null,x.a.createElement(Lx,r)):x.a.createElement($b,null)}},Rx=Ux(Ax),Bx=function(){var e,n,t,r=(t={variables:{limit:Ee}},q.d(Os,t)),a=Dt(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.inbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(r=o.me)||void 0===r?void 0:r.user.inbox)&&(null===(a=e.me)||void 0===a?void 0:a.user.inbox)?Object(c.a)(Object(c.a)({},o),{},{me:Object(c.a)(Object(c.a)({},o.me),{},{user:Object(c.a)(Object(c.a)({},o.me.user),{},{inbox:t({prev:e.me.user.inbox,fetched:o.me.user.inbox})})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:a}}),[a])};function zx(){var e=Object(o.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n  border-bottom: ",";\n"]);return zx=function(){return e},e}var Nx=function(e){var n=e.basePath,t=e.InboxElements,r=e.nextInboxFormik;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(Dx,{px:2},h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"My timeline"}))),h.createElement(Fn.d,null,h.createElement(Fn.b,{path:"".concat(n)},h.createElement(xt,null,t),r&&h.createElement(ct,{LoadMoreFormik:r})))))),h.createElement(Zh,null))},Dx=Sn(Pn.Box)(zx(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),$x={id:"My Activities"},qx=function(e){var n=e.basePath;fo($x);var t=Bx().activitiesPage,r=Object(l.a)(t.formiks,1)[0],a=Object(h.useMemo)((function(){return x.a.createElement(x.a.Fragment,null,t.edges.map((function(e){return e&&x.a.createElement(GO,{activityId:e.id,key:e.id})})))}),[t]),o=Object(h.useMemo)((function(){return{InboxElements:a,nextInboxFormik:r,basePath:n}}),[a,r,n]);return x.a.createElement(Nx,o)},Wx=function(e){var n=e.children,t=e.to,r=ua(),a=r.me;return r.loading?null:a?x.a.createElement(Fn.a,{to:t}):x.a.createElement(x.a.Fragment,null,n)},Qx=function(e){var n=e.children;return x.a.createElement(Wx,{to:"/"},n)},Vx=function(e){var n=e.children,t=e.to,r=ua(),a=r.me;return r.loading?null:a?x.a.createElement(x.a.Fragment,null,n):x.a.createElement(Fn.a,{to:t})},Hx=function(e){var n=e.children;return x.a.createElement(Vx,{to:"/login"},n)},Jx={exact:!0,path:"/",component:function(e){e.match;var n=Object(h.useMemo)((function(){return{basePath:""}}),[]);return n?x.a.createElement(Hx,null,x.a.createElement(oy,null,x.a.createElement(qx,n))):x.a.createElement($b,null)}},Kx=Ux(Jx),Zx=function(){var e=Object(h.useContext)(bo).isOpen,n=qb().myCommunityFollowsPage,t=Object(l.a)(n.formiks,1)[0],r=Object(h.useMemo)((function(){return n.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){var n;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||"",link:Jk.getPath({communityId:e.id,tab:void 0},void 0),name:e.name}}))}),[n]),a=Object(h.useMemo)((function(){return{isSidebarOpen:e,status:Bb.Loaded,communities:r,LoadMoreFormik:t,discoverPath:Rx.getPath({tab:void 0},void 0),homePath:Kx.getPath(void 0,void 0)}}),[r,e,t]);return x.a.createElement(ph,a)},Gx=t(758);function Yx(){var e=Object(o.a)(["\n  background: ",";\n  height: calc(100vh - 75px);\n  text-align: left;\n  position: absolute;\n  z-index: 999999999999;\n  top: 0;\n  left: 0;\n  bottom: 0px;\n  right: 16px;\n  transition: transform 0.3s ease-in-out;\n  transform: ",";\n  // overflow: scroll;\n  display: grid;\n  grid-template-rows: 160px 1fr 60px;\n  @media (max-width: ",") {\n    width: 100%;\n  }\n"]);return Yx=function(){return e},e}function Xx(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 18px;\n  height: 18px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  line-height: 75px;\n  margin: 0 auto;\n  margin-top: 26px;\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    width: 18px;\n    height: 2px;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return Xx=function(){return e},e}function eE(){var e=Object(o.a)(["\n  z-index: 99998;\n  background: rgba(0,0,0,.9);\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: calc(100vh - 75px);\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out;\n  // transform: ",";\n"]);return eE=function(){return e},e}function nE(){var e=Object(o.a)(["\n  line-height: 60px;\n  height: 60px;\n  cursor: pointer;\n  align-items: center;\n  margin: 0 auto;\n  text-align: center;\n  width: 100px;\n  svg {\n    stroke: ",";\n  }\n  div {\n    font-weight: 600;\n    color: ",";\n  }\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return nE=function(){return e},e}function tE(){var e=Object(o.a)(["\n  border-top: 1px solid ",";\n"]);return tE=function(){return e},e}function rE(){var e=Object(o.a)(["\n  overflow: scroll;\n  padding: 16px;\n"]);return rE=function(){return e},e}function aE(){var e=Object(o.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 500;\n  color: ",";\n"]);return aE=function(){return e},e}function oE(){var e=Object(o.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 700;\n  color: ",";\n"]);return oE=function(){return e},e}function iE(){var e=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  line-height: initial;\n"]);return iE=function(){return e},e}function cE(){var e=Object(o.a)(["\n  position: relative;\n  > div:first-of-type {\n    width: 60px;\n    height: 60px;\n    border-radius: 60px;\n  }\n"]);return cE=function(){return e},e}function lE(){var e=Object(o.a)(["\n  padding: 16px;\n  border-bottom: ",";\n"]);return lE=function(){return e},e}function uE(){var e=Object(o.a)([""]);return uE=function(){return e},e}var mE=function(e){var n=e.open,t=e.setOpen;return x.a.createElement(OE,{open:n,onClick:function(){return t(!n)}},x.a.createElement("div",null),x.a.createElement("div",null),x.a.createElement("div",null))},sE=function(e){var n=e.open,t=e.Side,r=e.setOpen,a=e.userImage,o=e.name,i=e.username,c=e.signout;return x.a.createElement(x.a.Fragment,null,n&&x.a.createElement(yE,{onClick:function(){return r(!1)}}),x.a.createElement(jE,{open:n},x.a.createElement(fE,null,x.a.createElement(vE,null,x.a.createElement(Tc,{size:"s",src:a}),x.a.createElement(gE,null,o),x.a.createElement(bE,null,i),x.a.createElement(pE,{to:"/settings"},x.a.createElement(Ac.a,{size:"24",strokeWidth:1,color:"#333"})))),x.a.createElement(hE,null,t),x.a.createElement(dE,null,x.a.createElement(xE,null,x.a.createElement(EE,{onClick:c},x.a.createElement(Gx.a,{size:18}),x.a.createElement(Pn.Box,{ml:2},"Sign out"))))))},dE=Sn(Pn.Box)(uE()),fE=Sn(Pn.Box)(lE(),(function(e){return e.theme.colors.border})),vE=Sn(Pn.Box)(cE()),pE=Sn(Ht.c)(iE()),gE=Sn(Pn.Box)(oE(),(function(e){return e.theme.colors.dark})),bE=Sn(Pn.Box)(aE(),(function(e){return e.theme.colors.mediumdark})),hE=Sn(Pn.Box)(rE()),xE=Sn.div(tE(),(function(e){return e.theme.colors.medium})),EE=Sn(Pn.Flex)(nE(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary})),yE=Sn(Pn.Box)(eE(),(function(e){return e.open?"":"translateX(-100%)"})),OE=Sn.button(Xx(),(function(e){var n=e.theme;return e.open?n.colors.primary:n.colors.darker}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),jE=Sn.nav(Yx(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.open?"translateX(0)":"translateX(-100%)"}),(function(e){return e.theme.mobile}));function kE(){var e=Object(o.a)(["\n    display: none;\n  "]);return kE=function(){return e},e}function wE(){var e=Object(o.a)(["\n  ","\n"]);return wE=function(){return e},e}function CE(){var e=Object(o.a)(["\n  // Enable to put the right side scrollbar next to the content\n  //overflow: auto;\n"]);return CE=function(){return e},e}function IE(){var e=Object(o.a)(["\n  overflow: auto;\n"]);return IE=function(){return e},e}function FE(){var e=Object(o.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return FE=function(){return e},e}function TE(){var e=Object(o.a)(["\n    height: calc(100vh - 150px);\n    overflow: overlay;\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return TE=function(){return e},e}function SE(){var e=Object(o.a)(["\n  grid-template-rows: auto;\n  grid-template-columns: 240px 1fr;\n  column-gap: 8px;\n  height: calc(100vh - 66px);\n  "]);return SE=function(){return e},e}function PE(){var e=Object(o.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return PE=function(){return e},e}function ME(){var e=Object(o.a)(["\n    grid-template-rows: 75px 1fr 75px;\n  "]);return ME=function(){return e},e}function _E(){var e=Object(o.a)(["\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  "]);return _E=function(){return e},e}function LE(){var e=Object(o.a)(["\n  height: 100vh;\n  display: grid;\n  ","\n  ","\n"]);return LE=function(){return e},e}function UE(){var e=Object(o.a)(["\n  height: calc(100vh - 75px);\n  "]);return UE=function(){return e},e}function AE(){var e=Object(o.a)(["\n    display: none;\n  "]);return AE=function(){return e},e}function RE(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-rows: auto;\n  height: calc(100vh - 58px);\n  &.panel_sidebar {\n    ","\n  }\n  ","\n"]);return RE=function(){return e},e}function BE(){var e=Object(o.a)(["\n    display: none;\n  "]);return BE=function(){return e},e}function zE(){var e=Object(o.a)(["\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n\n"]);return zE=function(){return e},e}function NE(){var e=Object(o.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n"]);return NE=function(){return e},e}function DE(){var e=Object(o.a)(["\n    display: none;\n  "]);return DE=function(){return e},e}function $E(){var e=Object(o.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return $E=function(){return e},e}function qE(){var e=Object(o.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return qE=function(){return e},e}function WE(){var e=Object(o.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return WE=function(){return e},e}function QE(){var e=Object(o.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return QE=function(){return e},e}var VE=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,o=e.userImage,i=e.userLink,c=e.username,u=e.name,m=e.signout,s=x.a.useState(!1),d=Object(l.a)(s,2),f=d[0],v=d[1],p=Object(Fn.h)();return x.a.createElement(ey,null,x.a.createElement(ZE,null,x.a.createElement(KE,{onClick:function(){return p.goBack()}},x.a.createElement(jc.a,{size:"20"})),r),x.a.createElement(ay,null,t),x.a.createElement(ny,null,x.a.createElement(XE,{className:"panel_sidebar"},x.a.createElement(ty,null,n)),x.a.createElement(XE,null,x.a.createElement(ry,null,a))),x.a.createElement(YE,null,x.a.createElement(GE,null,x.a.createElement(mE,{open:f,setOpen:v}),x.a.createElement(sE,{username:c,name:u,userImage:o,signout:m,open:f,setOpen:v,Side:n})),x.a.createElement(GE,null,x.a.createElement(Ht.c,{to:"/"},x.a.createElement(HE,null,x.a.createElement(Fg.c,{src:Oe})))),x.a.createElement(GE,null,x.a.createElement(JE,null,x.a.createElement(Ht.c,{to:i},x.a.createElement(Tc,{src:o,size:"m"}))))))},HE=Sn(Pn.Box)(QE()),JE=Sn(Pn.Box)(WE()),KE=Sn(Pn.Box)(qE(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),ZE=Sn(Pn.Box)($E(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(DE())),GE=Sn(Pn.Box)(NE()),YE=Sn(Pn.Box)(zE(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),k.a.greaterThan("medium")(BE())),XE=Sn(Pn.Box)(RE(),k.a.lessThan("medium")(AE()),k.a.lessThan("medium")(UE())),ey=Sn(Pn.Box)(LE(),k.a.greaterThan("large")(_E()),k.a.lessThan("medium")(ME())),ny=Sn(Pn.Box)(PE(),k.a.greaterThan("medium")(SE()),k.a.lessThan("medium")(TE()),k.a.lessThan("small")(FE())),ty=Sn(Pn.Box)(IE()),ry=Sn(Pn.Box)(CE()),ay=Sn(Pn.Box)(wE(),k.a.lessThan("medium")(kE())),oy=function(e){var n=e.children,t=ua(),r=t.loading,a=t.me,o=t.logout,i=Object(h.useMemo)((function(){var e,n=null===a||void 0===a?void 0:a.user;if(!n||r)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",i=IO.getPath({tab:void 0,userId:n.id},void 0);return{SidebarBox:x.a.createElement(Zx,null),HeaderBox:x.a.createElement(Aw,null),SearchBox:x.a.createElement(Oc,null),userImage:t,userLink:i,signout:o,username:n.displayUsername||"",name:n.preferredUsername||""}}),[r,o,a]);return i?x.a.createElement(ho,null,x.a.createElement(VE,i,n)):x.a.createElement(Zw,null,n)},iy={exact:!0,path:"/collections/:collectionId/:tab(followers)?",component:function(e){var n=e.match,t=n.params.collectionId,r=n.params.tab,a="followers"===r?Tb.Followers:r?null:Tb.Resources,o=Object(h.useMemo)((function(){return null===a?null:{collectionId:t,tab:a,basePath:"/collections/".concat(t)}}),[t,a]);return o?x.a.createElement(oy,null,x.a.createElement(Ab,o)):x.a.createElement($b,null)}},cy=Ux(iy),ly=t(760),uy=t(761);function my(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return my=function(){return e},e}function sy(){var e=Object(o.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return sy=function(){return e},e}function dy(){var e=Object(o.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return dy=function(){return e},e}function fy(){var e=Object(o.a)(["\n  text-decoration: none;\n  color: ",";\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return fy=function(){return e},e}function vy(){var e=Object(o.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n"]);return vy=function(){return e},e}function py(){var e=Object(o.a)(["\n  ",";\n  color: ",";\n"]);return py=function(){return e},e}function gy(){var e=Object(o.a)(["\n  margin: auto;\n  & svg {\n    stroke: ",";\n  }\n"]);return gy=function(){return e},e}function by(){var e=Object(o.a)(["\n  border-radius: 4px;\n  min-width: 140px;\n  height: 140px;\n  display: flex;\n  align-items: center;\n\n  vertical-align: text-center;\n  background-color: ",";\n"]);return by=function(){return e},e}function hy(){var e=Object(o.a)(["\n  border-radius: 5px;\n  color: ",";\n  text-transform: uppercase;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-weight: 600;\n  cursor: default;\n  margin-right: 4px;\n  display: inline-flex;\n  border: 1px solid ",";\n"]);return hy=function(){return e},e}function xy(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return xy=function(){return e},e}function Ey(){var e=Object(o.a)(["\n  align-items: center;\n  cursor: pointer;\n  margin-right: 8px;\n  margin-left: 8px;\n"]);return Ey=function(){return e},e}function yy(){var e=Object(o.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return yy=function(){return e},e}function Oy(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n  text-decoration: none;\n  margin-top: 4px;\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    text-decoration: none;\n  }\n"]);return Oy=function(){return e},e}function jy(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return jy=function(){return e},e}function ky(){var e=Object(o.a)(["\n  font-size: ",";\n  color: ",";\n"]);return ky=function(){return e},e}function wy(){var e=Object(o.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return wy=function(){return e},e}function Cy(){var e=Object(o.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return Cy=function(){return e},e}function Iy(){var e=Object(o.a)(["\n  align-items: center;\n"]);return Iy=function(){return e},e}function Fy(){var e=Object(o.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return Fy=function(){return e},e}var Ty=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,o=e.collectionLink,i=e.collectionName,c=e.like,l=e.isFile,u=e.license,m=e.isFlagged,s=e.isSearch,d=e.hideActions,f=e.isOpenDropdown,v=e.toggleDropdown,p=e.toggleFlag,g=(e.sendToMoodle,l?ly.a:uy.a);return h.createElement(Wy,null,s&&h.createElement(pr,null,h.createElement(Yn.Trans,{id:"Resource"})),h.createElement(Vy,{p:2},""!==n?h.createElement(Tc,{size:"m",src:n}):h.createElement(Dy,null,h.createElement($y,null,h.createElement(g,{strokeWidth:"2",size:64}))),h.createElement(Hy,{flex:1,ml:3},h.createElement(Qy,{href:a,target:"_blank"},h.createElement(Jy,{flex:"1"},h.createElement(g,{strokeWidth:"1",size:18}),t)),l?h.createElement(Ny,{mt:1},u):h.createElement(Ay,null,h.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},h.createElement(qy,{flex:1},a))),h.createElement(_y,{variant:"text",mt:2},r))),h.createElement(Py,null,h.createElement(My,{ml:2},"Added in: ",h.createElement(Ht.c,{to:o}," ",i)),d?null:h.createElement(Ry,null,c&&h.createElement(zy,{bordered:!0,liked:!!c.iLikeIt,onClick:c.toggleLikeFormik.submitForm},h.createElement(Uy,null,h.createElement(Uc.a,{strokeWidth:"1",size:"18"})),h.createElement(Ly,{variant:"text",sx:{textTransform:"capitalize"},ml:1},c.totalLikes)),h.createElement(By,{onClick:v,sx:{position:"relative"}},h.createElement(Uy,null,h.createElement(Ts.a,{className:"hover",size:18})),f&&h.createElement(Sy,null,h.createElement(Qc,{orientation:"bottom",close:v},p&&h.createElement(Hc,{onClick:p},h.createElement(su.a,{size:18}),h.createElement(Pn.Text,{sx:{flex:1},ml:2},m?h.createElement(Yn.Trans,{id:"Unflag this resource"}):h.createElement(Yn.Trans,{id:"Flag this resource"})))))))))},Sy=Sn(Pn.Box)(Fy()),Py=Sn(Pn.Flex)(Iy()),My=Sn(Pn.Flex)(Cy(),(function(e){return e.theme.colors.dark})),_y=Sn(Pn.Text)(wy(),(function(e){return e.theme.colors.dark})),Ly=Sn(Pn.Text)(ky(),ln.s1,(function(e){return e.theme.colors.darker})),Uy=Sn(Pn.Box)(jy()),Ay=Sn(Pn.Box)(Oy(),(function(e){return e.theme.colors.mediumdark}),ln.s2),Ry=Sn(Pn.Flex)(yy()),By=Sn(Pn.Flex)(Ey()),zy=Sn(Pn.Flex)(xy(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),ln.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),Ny=Sn(Pn.Text)(hy(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.secondary})),Dy=Sn(Pn.Box)(by(),(function(e){return e.theme.colors.light})),$y=Sn.div(gy(),(function(e){return e.theme.colors.medium})),qy=Sn(Pn.Text)(py(),Object(tt.c)("380px"),(function(e){return e.theme.colors.mediumdark})),Wy=Sn(Pn.Box)(vy(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),Qy=Sn.a(fy(),(function(e){return e.theme.colors.darker})),Vy=Sn(Pn.Flex)(dy(),(function(e){return e.theme.colors.appInverse})),Hy=Sn(Pn.Box)(sy()),Jy=Sn(Pn.Heading)(my(),(function(e){return e.theme.colors.darker})),Ky=function(e){var n=e.resourceId,t=e.flagged,r=Rv(n),a=r.resource,o=r.toggleLike,i=Object(Nt.a)({initialValues:{},onSubmit:o}),u=nC(),m=Object(h.useReducer)((function(e){return!e}),!1),s=Object(l.a)(m,2),d=s[0],f=s[1],v=Object(h.useReducer)((function(e){return!e}),!1),p=Object(l.a)(v,2),g=p[0],b=p[1],E=Object(h.useReducer)((function(e){return!u()&&!e}),!1),y=Object(l.a)(E,2),O=y[0],j=y[1],k=Object(h.useMemo)((function(){var e;if(!a)return null;var n=!!t;return Object(c.a)(Object(c.a)({},Zy({resource:a,like:{iLikeIt:!!a.myLike,toggleLikeFormik:i,totalLikes:(null===(e=a.likers)||void 0===e?void 0:e.totalCount)||0},hideActions:n})),{},{isOpenDropdown:d,toggleDropdown:f,sendToMoodle:b,toggleFlag:j})}),[a,t,i,d]),w=O&&a?x.a.createElement(tc,{closeModal:j},x.a.createElement(Lm,{done:j,ctx:a})):null,C=Object(h.useMemo)((function(){return function(e){var n=Bv(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,o=e.license,i=e.summary,c=e.content,l=e.payload;return{canonicalUrl:r||"",collection:n,icon:(null===a||void 0===a?void 0:a.url)||"",name:t,summary:i||"",url:(null===c||void 0===c?void 0:c.url)||(null===l||void 0===l?void 0:l.url)||"",licence:o||"",mediaType:(null===c||void 0===c?void 0:c.mediaType)||""}}(a)}),[a]),I=C&&g?x.a.createElement(tc,{closeModal:b},x.a.createElement(Lv,{done:b,resource:C})):null;return k&&x.a.createElement(x.a.Fragment,null,w,I,x.a.createElement(Ty,k))},Zy=function(e){var n,t,r,a,o,i=e.hideActions,c=e.like,l=e.resource;return{icon:(null===(n=l.icon)||void 0===n?void 0:n.url)||"",link:(null===(t=l.payload)||void 0===t?void 0:t.url)||"",name:l.name||"",summary:l.summary||"",like:c,isFile:!!(null===(r=l.payload)||void 0===r?void 0:r.upload),license:l.license||null,isFlagged:!!l.myFlag,hideActions:i,collectionName:(null===(a=l.collection)||void 0===a?void 0:a.name)||"",collectionLink:cy.getPath({collectionId:(null===(o=l.collection)||void 0===o?void 0:o.id)||"",tab:void 0},void 0)}};function Gy(){var e=Object(o.a)(["\n  background: ",";\n  border-left: 3px solid ",";\n"]);return Gy=function(){return e},e}function Yy(){var e=Object(o.a)(["\n  font-size: ",";\n"]);return Yy=function(){return e},e}function Xy(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return Xy=function(){return e},e}function eO(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return eO=function(){return e},e}function nO(){var e=Object(o.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return nO=function(){return e},e}function tO(){var e=Object(o.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return tO=function(){return e},e}function rO(){var e=Object(o.a)(["\n  color: ",";\n"]);return rO=function(){return e},e}var aO=function(e){var n=e.content,t=e.like,r=e.actor,a=e.createdAt,o=e.communityName,i=e.communityLink,c=e.hideActions,l=e.url;return x.a.createElement(sO,{pl:2},x.a.createElement(Id,{actor:r,createdAt:a,event:"",communityName:o,communityLink:i}),x.a.createElement(oO,{dangerouslySetInnerHTML:{__html:Ms.a.sanitize(n)},sx:{textDecoration:"none"},variant:"text",mb:2}),x.a.createElement(cO,{mt:2},c?null:x.a.createElement(Pn.Box,null,x.a.createElement(iO,null,x.a.createElement(lO,null,x.a.createElement(Ht.c,{to:l},x.a.createElement(uO,null,x.a.createElement(Ss.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),x.a.createElement(mO,{ml:1,variant:"text",sx:{textTransform:"capitalize",textDecoration:"none"}},x.a.createElement(Yn.Trans,{id:"Reply"})))),x.a.createElement(lO,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(uO,null,x.a.createElement(Uc.a,{strokeWidth:"1",size:"18"})),x.a.createElement(mO,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"})))))))},oO=Sn(Pn.Text)(rO(),(function(e){return e.theme.colors.dark})),iO=Sn(Pn.Flex)(tO()),cO=Sn(Pn.Box)(nO()),lO=Sn(Pn.Flex)(eO(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),ln.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),uO=Sn(Pn.Box)(Xy()),mO=Sn(Pn.Text)(Yy(),ln.s1),sO=Sn(Pn.Box)(Gy(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),dO=function(e){var n=e.commentId,t=Fs(n),r=t.comment,a=t.toggleLike,o=Object(Nt.a)({initialValues:{},onSubmit:a}),i=Object(h.useMemo)((function(){if(!r)return null;var e=pd(r),n=e.communityLink,t=e.communityName;return{url:r.thread?KO.getPath({threadId:r.thread.id},void 0):"",communityLink:n,communityName:t,actor:r.creator?FO(r.creator):{icon:"",link:"",name:""},createdAt:r.createdAt,content:r.content,like:{iLikeIt:!!r.myLike,totalLikes:r.likerCount||0,toggleLikeFormik:o}}}),[r,o]);return i&&x.a.createElement(aO,i)},fO=function e(n){var t,r=n.context,a=n.flagged;if("Collection"===r.__typename)return a?x.a.createElement(lC,{collectionId:r.id,flagged:a}):x.a.createElement(lC,{collectionId:r.id});if("Comment"===r.__typename)return x.a.createElement(md,{commentId:r.id,mainComment:!1});if("Community"===r.__typename)return a?x.a.createElement(yv,{communityId:r.id,flagged:a}):x.a.createElement(yv,{communityId:r.id});if("Resource"===r.__typename)return a?x.a.createElement(Ky,{resourceId:r.id,flagged:a}):x.a.createElement(Ky,{resourceId:r.id});if("User"===r.__typename)return a?x.a.createElement($g,{userId:r.userId,flagged:a}):x.a.createElement($g,{userId:r.userId});if("Like"===r.__typename&&"Comment"===(null===(t=r.context)||void 0===t?void 0:t.__typename))return x.a.createElement(dO,{commentId:r.context.id});var o=void 0!==r&&Bm(r);return o?x.a.createElement(e,{context:o}):null},vO=t(762);function pO(){var e=Object(o.a)(["\n  ",";\n  color: ",";\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return pO=function(){return e},e}var gO,bO=function(e){var n=e.HeroUserBox,t=e.LikesBoxes,r=e.ActivityBoxes,a=e.CommunityBoxes,o=e.CollectionsBoxes,i=(e.UserBoxes,e.basePath),c=e.totalCommunities,l=e.userLink,u=e.totalCollections,m=e.totalUsers,s=(e.userName,e.loadMoreActivities),d=e.loadMoreLikes,f=e.loadMoreCommunities,v=e.loadMoreCollections;e.loadMoreFollowing;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(Pn.Box,{mb:2},n,h.createElement(hO,{basePath:i,totalCommunities:c,totalCollections:u,totalUsers:m})),h.createElement(Fn.d,null,h.createElement(Fn.b,{exact:!0,path:"".concat(i,"/")},h.createElement(xt,null,r),s&&h.createElement(ct,{LoadMoreFormik:s})),h.createElement(Fn.b,{exact:!0,path:"".concat(i,"/starred")},h.createElement(xt,null,t),d&&h.createElement(ct,{LoadMoreFormik:d})),h.createElement(Fn.b,{path:"".concat(i,"/communities")},h.createElement(wt,null,a),f&&h.createElement(ct,{LoadMoreFormik:f})),h.createElement(Fn.b,{path:"".concat(i,"/collections")},h.createElement(wt,null,h.createElement(It,null,o)),v&&h.createElement(ct,{LoadMoreFormik:v})))))),h.createElement(Hn,null,l.length>0?h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Relevant links"),h.createElement(Zn,null,h.createElement(Gn,null,h.createElement(Pn.Flex,null,h.createElement(vO.a,{size:20})," ",h.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},h.createElement(xO,{ml:2,flex:1},l)))))):null))},hO=function(e){var n=e.basePath,t=e.totalCommunities,r=e.totalCollections;e.totalUsers;return h.createElement(kt,{p:3,pt:3},h.createElement(Ht.c,{exact:!0,to:"".concat(n)},"Recent activity"),h.createElement(Ht.c,{exact:!0,to:"".concat(n,"/starred")},"Starred"),h.createElement(Ht.c,{exact:!0,to:"".concat(n,"/communities")},t," communities"),h.createElement(Ht.c,{exact:!0,to:"".concat(n,"/collections")},r," collections"))},xO=Sn(Pn.Text)(pO(),Object(tt.c)("250px"),(function(e){return e.theme.colors.dark}));!function(e){e[e.Starred=0]="Starred",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections",e[e.Following=3]="Following",e[e.Activities=4]="Activities"}(gO||(gO={}));var EO={id:"User {name} - Starred"},yO={id:"User {name} - Communities"},OO={id:"User {name} - Collections"},jO={id:"User {name} - Following"},kO={id:"User {name} - Activities"},wO=function(e){var n,t=e.userId,r=e.basePath,a=e.tab,o=hf(t),i=a===gO.Starred?EO:a===gO.Communities?yO:a===gO.Collections?OO:a===gO.Following?jO:(gO.Activities,kO);fo(!!(null===o||void 0===o||null===(n=o.user)||void 0===n?void 0:n.name)&&i,o.user);var c=uf(t).likesPage,u=Object(l.a)(c.formiks,1)[0],m=Kd(t).activitiesPage,s=Object(l.a)(m.formiks,1)[0],d=ef(t).followedCollectionsPage,f=Object(l.a)(d.formiks,1)[0],v=of(t).followedCommunitiesPage,p=Object(l.a)(v.formiks,1)[0],g=vf(t).followedUsersPage,b=Object(l.a)(g.formiks,1)[0],E=Object(h.useMemo)((function(){var e,n,a=o.totalActivities,i=o.totalCollections,l=o.totalCommunities,h=o.totalUsers,E=x.a.createElement(x.a.Fragment,null,c.edges.map((function(e){var n="Category"!==e.context.__typename&&"Flag"!==e.context.__typename&&"Follow"!==e.context.__typename&&"Like"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"Taggable"!==e.context.__typename&&"Intent"!==e.context.__typename?e.context:null,t=pd(n),r=t.communityLink,a=t.communityName,i=o.user?FO(o.user):null,c=e,l=zm(c,de.Created),u="Comment"===e.context.__typename?x.a.createElement(dO,{key:e.id,commentId:e.context.id}):x.a.createElement(fO,{context:c}),m={actor:i,communityLink:r,communityName:a,createdAt:e.createdAt,event:l,status:fd.Loaded,preview:u};return x.a.createElement(Cd,Object.assign({},m,{key:c.id}))}))),y=x.a.createElement(x.a.Fragment,null,m.edges.map((function(e){return x.a.createElement(GO,{activityId:e.id,key:e.id})}))),O=x.a.createElement(x.a.Fragment,null,d.edges.map((function(e){return e.context})).filter((function(e){return"Collection"===e.__typename})).map((function(e){return x.a.createElement(Fg.a,{m:2,mb:0,key:e.id},x.a.createElement(lC,{collectionId:e.id,key:e.id}))}))),j=x.a.createElement(x.a.Fragment,null,v.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return x.a.createElement(yv,{communityId:e.id,key:e.id})}))),k=x.a.createElement(x.a.Fragment,null,g.edges.map((function(e){return e.context})).filter((function(e){return"User"===e.__typename})).map((function(e){return x.a.createElement($g,{userId:e.userId,key:e.userId})})));return{basePath:r,ActivityBoxes:y,LikesBoxes:E,HeroUserBox:x.a.createElement(Kf,{userId:t}),CollectionsBoxes:O,CommunityBoxes:j,UserBoxes:k,userName:(null===(e=o.user)||void 0===e?void 0:e.name)||"",totalActivities:"".concat(a||"0"),totalCollections:"".concat(i||"0"),totalCommunities:"".concat(l||"0"),totalUsers:"".concat(h||"0"),userLink:(null===(n=o.user)||void 0===n?void 0:n.website)||"",loadMoreActivities:s,loadMoreCollections:f,loadMoreCommunities:p,loadMoreFollowing:b,loadMoreLikes:u}}),[o,c,m.edges,d.edges,v.edges,g.edges,t,r,s,f,p,b,u]);return x.a.createElement(bO,E)},CO={exact:!0,path:"/user/:userId/:tab(starred|communities|collections|following)?",component:function(e){var n=e.match,t=n.params.userId,r=n.params.tab,a="starred"===r?gO.Starred:"communities"===r?gO.Communities:"collections"===r?gO.Collections:"following"===r?gO.Following:r?null:gO.Activities,o=Object(h.useMemo)((function(){return null===a?null:{tab:a,userId:t,basePath:IO.getPath({tab:void 0,userId:t},void 0)}}),[a,t]);return o?x.a.createElement(oy,null,x.a.createElement(wO,o)):x.a.createElement($b,null)}},IO=Ux(CO),FO=function(e){var n,t;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||(null===(t=e.image)||void 0===t?void 0:t.url)||"",name:e.userName||"",link:IO.getPath({tab:void 0,userId:e.userId},void 0)}},TO=function(e){var n,t,r,a=(r={variables:{threadId:e,limit:Ee}},q.d(ks,r)),o=Dt(null===(n=a.data)||void 0===n||null===(t=n.thread)||void 0===t?void 0:t.comments,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:Ee,threadId:e}),updateQuery:function(e,n){var t,a,o=n.fetchMoreResult;return(null===o||void 0===o||null===(t=o.thread)||void 0===t?void 0:t.comments)&&(null===(a=e.thread)||void 0===a?void 0:a.comments)?Object(c.a)(Object(c.a)({},o),{},{thread:Object(c.a)(Object(c.a)({},o.thread),{},{comments:r({prev:e.thread.comments,fetched:o.thread.comments})})}):e}})}));return Object(h.useMemo)((function(){return{commentPage:o}}),[o])},SO=t(763);function PO(){var e=Object(o.a)(["\n  border-bottom: ",";\n  background: ",";\n  cursor: pointer;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n    * {\n      text-decoration: none;\n    }\n  }\n"]);return PO=function(){return e},e}function MO(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  flex: 1;\n"]);return MO=function(){return e},e}function _O(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return _O=function(){return e},e}function LO(){var e=Object(o.a)(['\n  max-width: 28px !important;\n  max-height: 28px !important;\n  border-radius: 28px !important;\n  background: url("','");\n  background-repeat: no-repeat;\n  background-position: cover;\n  width: 28px;\n  height: 28px;\n  background-size: cover;\n']);return LO=function(){return e},e}function UO(){var e=Object(o.a)(["\n  color: ",";\n"]);return UO=function(){return e},e}function AO(){var e=Object(o.a)(["\n  svg {\n    vertical-align: middle;\n  }\n"]);return AO=function(){return e},e}var RO=function(e){var n=e.content,t=e.lastActivity,r=e.totalReplies,a=e.totalLikes,o=e.members,i=e.link;return x.a.createElement(qO,{p:3},x.a.createElement(Ht.c,{to:i},x.a.createElement(zO,{variant:"text"},n),x.a.createElement(Pn.Flex,{mt:2,alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement($O,null,x.a.createElement(Yn.Trans,{id:"Last activity"})," ",sa.DateTime.fromSQL(t).toRelative()),x.a.createElement(DO,null,x.a.createElement(Pn.Flex,{alignItems:"center"},x.a.createElement(BO,{mr:1},x.a.createElement(SO.a,{size:16}))," ",r||0),x.a.createElement(Pn.Flex,{ml:3,alignItems:"center"},x.a.createElement(BO,{mr:1},x.a.createElement(Uc.a,{size:16})),a||0))),x.a.createElement(Pn.Flex,null,o.map((function(e,n){return x.a.createElement(NO,{ml:1,src:e})}))))))},BO=Sn(Pn.Box)(AO()),zO=Sn(Pn.Text)(UO(),(function(e){return e.theme.colors.dark})),NO=Sn(Pn.Box)(LO(),(function(e){return e.src})),DO=Sn(Pn.Flex)(_O(),(function(e){return e.theme.colors.mediumdark})),$O=Sn(Pn.Text)(MO(),(function(e){return e.theme.colors.mediumdark})),qO=Sn(Pn.Box)(PO(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.lighter})),WO=function(e){var n=e.threadId,t=vd(n),r=t.mainComment,a=t.totalReplies,o=Object(h.useMemo)((function(){return r?{content:r.content,lastActivity:r.createdAt,members:[],totalLikes:"".concat(r.likerCount||0),totalReplies:a?"".concat(a):"",link:"/thread/".concat(n)}:null}),[r,a,n]);return o&&x.a.createElement(RO,o)},QO=function(e){var n=e.ctx;if(!n)return null;switch(n.__typename){case"Activity":return x.a.createElement(GO,{activityId:n.id});case"Collection":return x.a.createElement(lC,{collectionId:n.id});case"Comment":return x.a.createElement(md,{commentId:n.id,mainComment:!1});case"Community":return x.a.createElement(yv,{communityId:n.id});case"Resource":return x.a.createElement(Ky,{resourceId:n.id});case"Thread":return x.a.createElement(WO,{threadId:n.id});case"User":return x.a.createElement($g,{userId:n.id});default:return null}},VO={id:"Discussion: {excerpt}"},HO=function(e){var n=e.threadId,t=TO(n).commentPage,r=Object(l.a)(t.formiks,1)[0],a=vd(n),o=a.mainComment&&{excerpt:"".concat(a.mainComment.content.substring(0,30)," ...")};fo(!!o&&VO,o);var i=Object(Nt.a)({initialValues:{replyMessage:""},onSubmit:function(e){var n=e.replyMessage;return a.reply(n)}}),u=Object(h.useMemo)((function(){var e,n=a.context,o=a.mainComment;if(n&&("User"===n.__typename||"Like"===n.__typename||"Follow"===n.__typename||"Comment"===n.__typename))return null;var l=Bm(n);if(!o||!l)return null;var u=pd(l),m=u.communityName,s=u.communityId,d=u.communityIcon,f={communityLink:"/communities/".concat(s),communityName:m,event:"started a discussion",status:fd.Loaded},v=x.a.createElement(Cd,Object(c.a)(Object(c.a)({},f),{},{actor:o.creator?FO(o.creator):null,preview:x.a.createElement(md,{commentId:o.id,mainComment:!0}),createdAt:o.createdAt}));return{Comments:x.a.createElement(x.a.Fragment,null,t.edges.filter((function(e){var n;return e.id!==(null===(n=a.mainComment)||void 0===n?void 0:n.id)})).map((function(e){return x.a.createElement(Fg.a,{mb:1,key:e.id},x.a.createElement(Cd,Object(c.a)(Object(c.a)({},f),{},{event:"replied",actor:e.creator?FO(e.creator):{icon:"",link:"",name:""},preview:x.a.createElement(md,{commentId:e.id,mainComment:!1,hideActions:!0}),createdAt:e.createdAt})))}))),Context:x.a.createElement(QO,{ctx:"User"===l.__typename?Object(c.a)(Object(c.a)({},l),{},{id:l.userId}):l}),MainThread:v,communityIcon:d,communityId:s,communityName:m,reply:a.canReply?{replyFormik:i}:null,isCommunityContext:"Community"===(null===(e=a.context)||void 0===e?void 0:e.__typename),loadMoreComments:r}}),[a,t,r,i]);return u&&x.a.createElement(ts,u)},JO={exact:!0,path:"/thread/:threadId",component:function(e){var n=e.match.params.threadId,t=Object(h.useMemo)((function(){return{threadId:n}}),[n]);return x.a.createElement(oy,null,x.a.createElement(HO,t))}},KO=Ux(JO),ZO=function(e){var n,t,r,a=null===(n=(t={variables:{activityId:e}},q.d(Rm,t)).data)||void 0===n?void 0:n.activity,o=Bm(null===a||void 0===a?void 0:a.context),i=function(e){return e?zm(e.context,e.verb):""}(a)||"",c=(r=o)?"Comment"===r.__typename?r.thread?KO.getPath({threadId:r.thread.id},void 0):"":"Resource"===r.__typename?r.payload?r.payload.url:"":"User"===r.__typename?IO.getPath({userId:r.userId,tab:void 0},void 0):"Collection"===r.__typename?cy.getPath({collectionId:r.id,tab:void 0},void 0):"Community"===r.__typename?Jk.getPath({communityId:r.id,tab:void 0},void 0):null:"",l=pd(o);return Object(h.useMemo)((function(){return{activity:a,mainContext:o,eventString:i,link:c,communityInfoStrings:l}}),[a,o,i,c,l])},GO=function(e){var n=e.activityId,t=ZO(n),r=Object(h.useMemo)((function(){var e=t.activity,n=t.communityInfoStrings,r=t.eventString;if(e){var a,o,i;if(!e.context)return console.error("ActivityPreviewHOC: user or context :null",e),null;var l="Comment"===e.context.__typename?null===(a=e.context.thread)||void 0===a?void 0:a.id:"Like"===e.context.__typename&&"Comment"===(null===(o=e.context.context)||void 0===o?void 0:o.__typename)?null===(i=e.context.context.thread)||void 0===i?void 0:i.id:void 0,u=x.a.createElement(x.a.Fragment,null);return"Category"!==e.context.__typename&&"Intent"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Taggable"!==e.context.__typename&&(u=x.a.createElement(fO,{context:e.context})),Object(c.a)(Object(c.a)({status:fd.Loaded,createdAt:e.createdAt,actor:e.user&&FO(e.user),threadUrl:l&&KO.getPath({threadId:l},void 0),event:r},n),{},{preview:u})}return{status:fd.Loading}}),[t]);return r&&x.a.createElement(Cd,r)};function YO(){var e=Object(o.a)(["\n  background: ",";\n"]);return YO=function(){return e},e}function XO(){var e=Object(o.a)(["\n  background: ",";\n  height: 50px;\n  line-height: 50px;\n  align-items: center;}\n  </>\n);\n\n  border-bottom: ",";\n  button {\n    width: 190px;\n    text-transform: inherit;\n    letter-spacing: 0;\n    padding: 0;\n    height: 32px;\n    line-height: 32px;\n    background: #ffe5cd;\n    color: #ca6a11;\n    border: none;\n  }\n"]);return XO=function(){return e},e}var ej=function(e){var n=e.tabPaths;return h.createElement(kt,{p:3,pt:0},h.createElement(Ht.c,{exact:!0,to:n.intents},h.createElement(Yn.Trans,{id:"Intents"})),h.createElement(Ht.c,{exact:!0,to:n.inventory},h.createElement(Yn.Trans,{id:"Recent Inventory"})),h.createElement(Ht.c,{to:n.timeline},h.createElement(Yn.Trans,{id:"Recent activity"})),h.createElement(Ht.c,{to:n.discussions},h.createElement(Yn.Trans,{id:"Discussions"})),h.createElement(Ht.c,{to:n.members},h.createElement(Yn.Trans,{id:"Members"})))},nj=Sn(Pn.Flex)(XO(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),tj=Sn(Pn.Box)(YO(),(function(e){return e.theme.colors.appInverse})),rj=function(e){var n=e.Activities,t=e.HeroCommunity,r=e.Members,a=e.Intents,o=e.Inventory,i=e.tabPaths,c=e.newThreadFormik,l=e.Threads,u=e.loadMoreActivities,m=(e.loadMoreCollections,e.loadMoreThreads);e.createCollection;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,t,h.createElement(ej,{tabPaths:i}),h.createElement(Fn.d,null,h.createElement(Fn.b,{exact:!0,path:i.intents},h.createElement(wt,null,a)),h.createElement(Fn.b,{exact:!0,path:i.inventory},h.createElement(wt,null,o)),h.createElement(Fn.b,{exact:!0,path:i.timeline},h.createElement(h.Fragment,null,h.createElement(xt,{mt:2},n),u&&h.createElement(ct,{LoadMoreFormik:u}))),h.createElement(Fn.b,{exact:!0,path:i.discussions},h.createElement(h.Fragment,null,h.createElement(tj,{p:3,mb:2},c&&h.createElement(Jm,{placeholder:"Start a new thread...",submit:function(e){c.setValues({text:e}),c.submitForm()}})),h.createElement(nj,{px:3,mt:2},h.createElement(Pn.Text,{variant:"suptitle"},"All discussions")),h.createElement(wt,null,l),m&&h.createElement(ct,{LoadMoreFormik:m}))),h.createElement(Fn.b,{path:i.members},h.createElement(h.Fragment,null,h.createElement(wt,null,r))))))),h.createElement(Zh,null))};function aj(){var e=Object(o.a)(["\n    query communityIntents($communityId: ID) {\n  intentsFiltered(inScopeOf: [$communityId]) {\n    ...IntentPreview\n  }\n}\n    ",""]);return aj=function(){return e},e}function oj(){var e=Object(o.a)(["\n    fragment IntentPreview on Intent {\n  id\n  name\n  note\n  tags {\n    __typename\n  }\n}\n    "]);return oj=function(){return e},e}var ij=A()(oj()),cj=A()(aj(),ij);var lj=function(e){var n,t,r,a=null!==(n=null===(t=(r={variables:{communityId:e}},q.d(cj,r)).data)||void 0===t?void 0:t.intentsFiltered)&&void 0!==n?n:[];return Object(h.useMemo)((function(){return{communityIntents:a}}),[a])};function uj(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return uj=function(){return e},e}function mj(){var e=Object(o.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return mj=function(){return e},e}function sj(){var e=Object(o.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return sj=function(){return e},e}function dj(){var e=Object(o.a)(["\n  text-decoration: none;\n  color: ",";\n  background: 0;\n  border: 0;\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return dj=function(){return e},e}function fj(){var e=Object(o.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  margin: 10px;\n"]);return fj=function(){return e},e}function vj(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return vj=function(){return e},e}function pj(){var e=Object(o.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return pj=function(){return e},e}function gj(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return gj=function(){return e},e}function bj(){var e=Object(o.a)(["\n  font-size: ",";\n  color: ",";\n"]);return bj=function(){return e},e}function hj(){var e=Object(o.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return hj=function(){return e},e}function xj(){var e=Object(o.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return xj=function(){return e},e}function Ej(){var e=Object(o.a)(["\n  align-items: center;\n"]);return Ej=function(){return e},e}var yj=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,o=e.collectionLink,i=e.collectionName,c=e.like,l=e.isSearch,u=e.hideActions,m=e.onOpen;return h.createElement(Tj,null,l&&h.createElement(pr,null,h.createElement(Yn.Trans,{id:"Intent"})),h.createElement(Pj,{p:2},""!==n&&h.createElement(Tc,{size:"m",src:n}),h.createElement(Mj,{flex:1,ml:3},h.createElement(Sj,{onClick:function(){m&&m(a)}},h.createElement(_j,{flex:"1"},t)),r&&h.createElement(kj,{variant:"text",mt:2},r))),h.createElement(Oj,null,h.createElement(jj,{ml:2},"Added in ",h.createElement(Ht.c,{to:o}," +",i)),u?null:h.createElement(Ij,null,c&&h.createElement(Fj,{bordered:!0,liked:!!c.iLikeIt,onClick:c.toggleLikeFormik.submitForm},h.createElement(Cj,null,h.createElement(Uc.a,{strokeWidth:"1",size:"18"})),h.createElement(wj,{variant:"text",sx:{textTransform:"capitalize"},ml:1},c.totalLikes)))))},Oj=Sn(Pn.Flex)(Ej()),jj=Sn(Pn.Flex)(xj(),(function(e){return e.theme.colors.dark})),kj=Sn(Pn.Text)(hj(),(function(e){return e.theme.colors.dark})),wj=Sn(Pn.Text)(bj(),ln.s1,(function(e){return e.theme.colors.darker})),Cj=Sn(Pn.Box)(gj()),Ij=Sn(Pn.Flex)(pj()),Fj=Sn(Pn.Flex)(vj(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),ln.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),Tj=Sn(Pn.Box)(fj(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),Sj=Sn.button(dj(),(function(e){return e.theme.colors.darker})),Pj=Sn(Pn.Flex)(sj(),(function(e){return e.theme.colors.appInverse})),Mj=Sn(Pn.Box)(mj()),_j=Sn(Pn.Heading)(uj(),(function(e){return e.theme.colors.darker})),Lj=function(e){var n=e.intentId,t={name:e.name,summary:e.note,link:n,like:null,hideActions:!0,collectionLink:e.communityLink,collectionName:e.communityName,onOpen:e.onOpen};return t&&x.a.createElement(yj,t)};function Uj(){var e=Object(o.a)(["\n    query actions {\n  actions {\n    label\n    id\n    note\n  }\n}\n    "]);return Uj=function(){return e},e}var Aj=A()(Uj());function Rj(e){return q.d(Aj,e)}function Bj(){var e=Object(o.a)(["\n    query unitsPages {\n  unitsPages {\n    edges {\n      id\n      symbol\n      label\n    }\n  }\n}\n    "]);return Bj=function(){return e},e}function zj(){var e=Object(o.a)(["\n    query economicEventsFiltered($action: ID!) {\n  economicEventsFiltered(action: $action) {\n    id\n    provider {\n      id\n      name\n    }\n    receiver {\n      id\n      name\n    }\n  }\n}\n    "]);return zj=function(){return e},e}function Nj(){var e=Object(o.a)(["\n    query spatialThingsPages {\n  spatialThingsPages {\n    edges {\n      id\n      name\n      lat\n      long\n    }\n  }\n}\n    "]);return Nj=function(){return e},e}var Dj=A()(Nj());var $j=A()(zj());var qj=A()(Bj());function Wj(e){return q.d(qj,e)}var Qj=function(e){var n,t,r,a=e.children,o=h.useState([]),i=Object(l.a)(o,2),u=i[0],m=i[1],s=h.useState([]),d=Object(l.a)(s,2),f=d[0],v=d[1],p=h.useState(""),g=Object(l.a)(p,2),b=g[0],x=g[1],E=Rj(),y=(r={variables:{action:b}},q.d($j,r)).data;h.useEffect((function(){var e,n,t=null===y||void 0===y||null===(e=y.economicEventsFiltered)||void 0===e?void 0:e.map((function(e){return e.provider})),r=null===y||void 0===y||null===(n=y.economicEventsFiltered)||void 0===n?void 0:n.map((function(e){return e.receiver}));(null===t||void 0===t?void 0:t.length)&&m(t||null),(null===r||void 0===r?void 0:r.length)&&v(r||[])}),[y]);var O=Wj(),j={actionList:null===(n=E.data)||void 0===n?void 0:n.actions,providerList:u,receiverList:f,unitPages:null===(t=O.data)||void 0===t?void 0:t.unitsPages,setAction:x},k=h.Children.map(a,(function(e){return h.isValidElement(e)?h.cloneElement(e,Object(c.a)({},j)):e}));return h.createElement("div",null,k)};function Vj(){var e=Object(o.a)(["\n    query intentPanel($intentId: ID) {\n  intent(id: $intentId) {\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n  }\n}\n    "]);return Vj=function(){return e},e}function Hj(){var e=Object(o.a)(["\n    mutation createEconomicEvent($note: String, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!) {\n  createEconomicEvent(event: {note: $note, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}) {\n    economicEvent {\n      id\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return Hj=function(){return e},e}var Jj=A()(Hj());A()(Vj());var Kj=function(){var e,n=q.c(Jj,e),t=Object(l.a)(n,2),r=t[0],o=t[1],c=eC(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,i,c,l,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.note,i=n.action,c=n.provider,l=n.receiver,u=n.hasUnit,m=n.hasNumericalValue,!o.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{note:t,action:i,provider:c,receiver:l,hasUnit:u,hasNumericalValue:m}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return Object(h.useMemo)((function(){return{create:c}}),[c])};function Zj(){var e=Object(o.a)(["\n  background-color: transparent !important;\n  color: #ff5a5f !important;\n  text-align: right !important;\n  line-height: 1 !important;\n"]);return Zj=function(){return e},e}function Gj(){var e=Object(o.a)(["\n  textarea,\n  input {\n    opacity: ",";\n    cursor: ",";\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n    display: block;\n    width: 100%;\n    padding 0 10px;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n    margin-bottom: 10px;\n  }\n  textarea {\n    padding: 10px;\n    height: 120px;\n  }\n"]);return Gj=function(){return e},e}var Yj=function(e){var n=e.id,t=e.name,r=e.type,a=void 0===r?"text":r,o=e.onChange,i=e.placeholder,c=void 0===i?"":i,l=e.label,u=e.value,m=void 0===u?"":u,s=e.hint,d=void 0===s?{class:"error",value:""}:s,f=e.disabled,v=void 0!==f&&f;return x.a.createElement(Xj,{disabled:v},x.a.createElement("label",{htmlFor:n},l),"textarea"!==a&&x.a.createElement("input",{id:n,type:a,name:t,placeholder:c,value:m,onChange:o,disabled:v}),"textarea"===a&&x.a.createElement("textarea",{id:n,name:t,placeholder:c,value:m,onChange:o,disabled:v}),x.a.createElement("span",{className:"hint ".concat(d.class)},d.value))},Xj=Sn("div")(Gj(),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"text"})),ek=Sn(Oi)(Zj()),nk=t(204);function tk(){var e=Object(o.a)(["\n  margin-bottom: 10px;\n  small {\n    display: block;\n    padding-top: 6px;\n    font-size: 10px;\n    color: #aaa;\n  }\n  b,\n  .select__value-container,\n  .select__single-value {\n    display: block;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n  }\n  .select__control > div {\n    height: 36px;\n  }\n  .select__value-container > div:not(.select__single-value) {\n    height: 36px;\n    padding: 0;\n    margin: 0;\n    line-height: 36px;\n  }\n  .select__value-container {\n    height: 36px;\n    padding: 0 10px;\n  }\n  .select__control--menu-is-open,\n  .select__control--is-focused {\n    border-color: #05244f !important;\n    box-shadow: none;\n\n    small {\n      display: none;\n    }\n  }\n  .select__control {\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n  }\n  ",";\n  margin: '0 10px 0 0 ';\n  opacity: ",";\n  cursor: 'pointer';\n  &:hover && not:['disabled'] {\n    background: ",";\n  }\n"]);return tk=function(){return e},e}var rk=Sn(nk.a)(tk(),Object(tt.e)("background, 0.2s"),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return"primary"===e.variant||"danger"===e.variant?Object(tt.b)("0.1",e.theme.colors.primary):Object(tt.d)("0.3",e.theme.colors.primary)})),ak=function(e){var n=e.onSelect,t=(e.onInputChange,e.variant),r=e.placeholder,a=void 0===r?"":r,o=e.name,i=e.options,c=e.id,l=e.value,u=i?i.map((function(e){return{id:e.id,value:e.label,label:x.a.createElement("span",null,x.a.createElement("b",null,e.label),e.note&&x.a.createElement("small",null,e.note))}})):[];return x.a.createElement(rk,{onChange:function(e){return n(o,{id:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value})},variant:t,placeholder:a,className:"basic-single",classNamePrefix:"select",value:u.find((function(e){return e.id===(null===l||void 0===l?void 0:l.id)}))||null,isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:o,id:c,options:u})},ok=function(e,n){if("string"===typeof n)return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:e[n]}})):[];var t=function(e){var t="".concat(n.template);return n.variables.forEach((function(n){t=t.replace(n,"".concat(e[n]))})),t};return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:t(e)}})):[]};function ik(){var e=Object(o.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n  > button {\n    width: 100%;\n  }\n\n  .event_btn {\n    height: 40px;\n    text-transform: uppercase;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    letter-spacing: 1px;\n  }\n"]);return ik=function(){return e},e}function ck(){var e=Object(o.a)(["\n  .d-flex {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    & > div {\n      width: calc(50% - 5px);\n    }\n\n    button {\n      width: 100%;\n      background: #cdcdcd;\n    }\n  }\n"]);return ck=function(){return e},e}function lk(){var e=Object(o.a)(["\n  display: block;\n  font-size: 10px;\n  color: #aaa;\n  font-family: 'Arial', sans-serif;\n  text-transform: uppercase;\n  margin-bottom: 2px;\n"]);return lk=function(){return e},e}function uk(){var e=Object(o.a)(["\n  display: block;\n"]);return uk=function(){return e},e}var mk=Sn("div")(uk()),sk=Sn("label")(lk()),dk=Sn("form")(ck()),fk=Sn.div(ik()),vk=function(e){var n=e.actionList,t=e.setAction,r=e.providerList,o=e.receiverList,s=e.unitPages,d=h.useState({note:"",action:{id:"",label:"",note:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:""}),f=Object(l.a)(d,2),v=f[0],p=f[1],g=h.useState([]),b=Object(l.a)(g,2),x=b[0],E=b[1],y=h.useState([]),O=Object(l.a)(y,2),j=O[0],k=O[1],w=h.useState([]),C=Object(l.a)(w,2),I=C[0],F=C[1];h.useEffect((function(){E(ok(r,"name")),k(ok(o,"name"))}),[r,o]),h.useEffect((function(){F(ok(null===s||void 0===s?void 0:s.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[s]),h.useEffect((function(){return T()}),[]);var T=function(){return p({note:"",action:{id:"",label:"",note:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:""})},S=function(e,n){P({target:{name:e,value:n}}),(null===n||void 0===n?void 0:n.id)&&t(n.id)},P=function(e){var n=e.target,t=n.name,r=n.value;p(Object(c.a)(Object(c.a)({},v),{},Object(u.a)({},t,r)))},M=Kj().create,_=function(){var e=Object(i.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,M({note:v.note,action:v.action.id,provider:v.provider.id,receiver:v.receiver.id,hasUnit:v.hasUnit.id,hasNumericalValue:+v.hasNumericalValue});case 3:!(null===(t=e.sent)||void 0===t?void 0:t.errors)&&m.c.success("Event was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})&&T();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return h.createElement("div",{style:{margin:"0 10px 12px 0"}},h.createElement(dk,{onSubmit:_},h.createElement(mk,null,h.createElement(ak,{options:n,variant:"primary",placeholder:"Select action",value:v.action,id:"action",name:"action",onSelect:S})),x.length?h.createElement("div",null,h.createElement("div",{className:"d-flex"},h.createElement(mk,null,h.createElement(sk,null,"Provider"),h.createElement(ak,{options:x,variant:"primary",placeholder:"Provider",value:v.provider,id:"provider",name:"provider",onSelect:S})),h.createElement(mk,null,h.createElement(sk,null,"Receiver"),h.createElement(ak,{options:j,variant:"primary",placeholder:"Receiver",value:v.receiver,id:"receiver",name:"receiver",onSelect:S}))),h.createElement(mk,null,h.createElement(sk,null,"note"),h.createElement(Yj,{id:"note",type:"textarea",name:"note",hint:{class:"error",value:""},onChange:P,placeholder:"note",value:v.note})),h.createElement("div",{className:"d-flex"},h.createElement(mk,null,h.createElement(sk,null,"unit"),h.createElement(ak,{options:I,value:v.hasUnit,placeholder:"Unit",variant:"primary",id:"hasUnit",name:"hasUnit",onSelect:S})),h.createElement(mk,null,h.createElement(sk,null,"numerical value"),h.createElement(Yj,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:P,hint:{class:"error",value:""},placeholder:"Numerical Value",value:v.hasNumericalValue}))),h.createElement(fk,null,h.createElement(ot,{variant:"info",type:"submit",onClick:_,className:"event_btn"},h.createElement(Yn.Trans,{id:"Create Event"})))):null),h.createElement(m.b,null))},pk=t(764),gk=t(777);function bk(){var e=Object(o.a)(["\n  text-align: center;\n  display: block;\n"]);return bk=function(){return e},e}function hk(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return hk=function(){return e},e}function xk(){var e=Object(o.a)(["\n      margin-top: 8px;\n    "]);return xk=function(){return e},e}function Ek(){var e=Object(o.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Ek=function(){return e},e}function yk(){var e=Object(o.a)(["\n  color: ",";\n"]);return yk=function(){return e},e}function Ok(){var e=Object(o.a)(["\n  margin-bottom: 16px;\n  > img {\n    max-width: 100%;\n  }\n"]);return Ok=function(){return e},e}function jk(){var e=Object(o.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  padding: 16px;\n"]);return jk=function(){return e},e}function kk(){var e=Object(o.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n  > button {\n    width: 100%;\n  }\n"]);return kk=function(){return e},e}function wk(){var e=Object(o.a)(["\n  list-style: none;\n  > li {\n    display: flex;\n    padding: 10px;\n    margin-bottom: 10px;\n    background: ",";\n    border-radius: 3px;\n    color: ",";\n    > span:last-child {\n      margin-left: auto;\n    }\n  }\n"]);return wk=function(){return e},e}var Ck=Sn.ul(wk(),(function(e){return e.theme.colors.darkest}),(function(e){return e.theme.colors.light})),Ik=Sn.div(kk()),Fk=Sn.div(jk()),Tk=Sn.div(Ok()),Sk=Sn(Pn.Text)(yk(),(function(e){return e.theme.colors.mediumdark})),Pk=Sn.div(Ek(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(xk()),(function(e){return e.theme.colors.mediumdark})),Mk=Sn(Pn.Flex)(hk(),k.a.lessThan("medium")(bk())),_k=function(e){var n=e.actor,t=e.createdAt,r=e.link,a=e.name,o=e.collectionName,i=(e.tags,e.icon),c=e.resourceQuantity,u=e.history,m=h.useState(!1),s=Object(l.a)(m,2),d=s[0],f=s[1];return h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},a),h.createElement(Id,{actor:null!==n&&void 0!==n?n:void 0,createdAt:null!==t&&void 0!==t?t:"",event:"Created a resource",communityLink:r,communityName:o})),h.createElement(Mk,null,h.createElement(Pk,null,h.createElement(Sk,{fontWeight:"bold"}))),h.createElement(Fk,null,h.createElement(Pn.Box,null,i&&""!==i&&h.createElement(Tk,null,h.createElement("img",{src:i,alt:a})),h.createElement(Ik,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Follow"}))),h.createElement(Ik,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Comment"}))),h.createElement(Ik,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Remaining"})," ",c)),h.createElement(Ik,null,h.createElement(ot,{style:{background:d?Cn.colors.darkest:"transparent",color:d?Cn.colors.light:Cn.colors.dark},variant:"outline",onClick:function(){f(!d)}},h.createElement("span",{style:{height:"24px",display:"inline-block",marginTop:"-12px",marginRight:6,verticalAlign:"middle"}},h.createElement(Yn.Trans,{id:"History"}),h.createElement("span",{style:{marginLeft:6}}),u&&u.length),h.createElement(pk.a,{style:{display:"inline-block"}}))),h.createElement(Ik,null,d&&h.createElement(Ck,null,u&&u.map((function(e,n){return h.createElement("li",{key:n},h.createElement("span",null,e.action),e.date&&h.createElement("span",null,Object(gk.a)(new Date(e.date),"dd MMM yyyy")))}))))),h.createElement(Pn.Box,null,h.createElement(Qj,null,h.createElement(vk,null)))))};function Lk(){var e=Object(o.a)(["\n    query intentItem($intentId: ID) {\n  intent(id: $intentId) {\n    hasBeginning\n    hasPointInTime\n    name\n    note\n    image\n    tags {\n      ... on Taggable {\n        name\n      }\n    }\n    resourceQuantity {\n      hasUnit {\n        label\n      }\n      hasNumericalValue\n    }\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n    provider {\n      name\n      image\n      id\n    }\n  }\n}\n    "]);return Lk=function(){return e},e}var Uk=A()(Lk());var Ak=function(e){var n,t,r,a,o,i,c,l,u,m,s,d,f,v=e.intentId,p=e.communityName,g=Rj(),b=null===(n=(f={variables:{intentId:v}},q.d(Uk,f)).data)||void 0===n?void 0:n.intent,x=(null===(t=g.data)||void 0===t?void 0:t.actions)||[];if(!b)return null;var E=b.provider,y={icon:E&&"image"in E&&E.image||"",name:null!==(r=null===E||void 0===E?void 0:E.name)&&void 0!==r?r:"",link:null!==(a=null===E||void 0===E?void 0:E.id)&&void 0!==a?a:""},O=null!==(o=null===b||void 0===b?void 0:b.tags)&&void 0!==o?o:[],j=null!==(i=null===(c=b.resourceQuantity)||void 0===c?void 0:c.hasNumericalValue)&&void 0!==i?i:0,k=null!==(l=null===(u=b.resourceInventoriedAs)||void 0===u||null===(m=u.trace)||void 0===m?void 0:m.map((function(e){var n;return{action:e.action.label,date:null!==(n=e.hasPointInTime)&&void 0!==n?n:null}})))&&void 0!==l?l:[],w={actor:y,actionList:x,collectionName:p,link:v,createdAt:null!==(s=null===b||void 0===b?void 0:b.hasPointInTime)&&void 0!==s?s:null,name:null!==(d=null===b||void 0===b?void 0:b.name)&&void 0!==d?d:"",tags:O.map((function(e){var n;return null!==(n=e.name)&&void 0!==n?n:""})),icon:null===b||void 0===b?void 0:b.image,resourceQuantity:j,history:k,like:null,isFlagged:!1,isOpenDropdown:!1,toggleDropdown:function(){},toggleFlag:null,collectionLink:p};return h.createElement(_k,w)};function Rk(){var e=Object(o.a)(["\n    query economicResourcesFiltered($agent: [ID]) {\n  economicResourcesFiltered(agent: $agent) {\n    id\n    name\n    note\n  }\n}\n    "]);return Rk=function(){return e},e}var Bk=A()(Rk());function zk(e){return q.d(Bk,e)}var Nk;!function(e){e[e.Activities=0]="Activities",e[e.Intents=1]="Intents",e[e.Inventory=2]="Inventory",e[e.Discussions=3]="Discussions",e[e.Members=4]="Members"}(Nk||(Nk={}));var Dk={id:"Community {name} - Intents"},$k={id:"Community {name} - Activities"},qk={id:"Community {name} - Discussions"},Wk={id:"Community {name} - Members"},Qk={id:"Community {name} - Inventory"},Vk=function(e){var n,t=e.communityId,r=e.basePath,a=e.tab,o=Tl(t),i=o.community,c=o.createThread,u=Object(h.useState)(null),s=Object(l.a)(u,2),d=s[0],f=s[1],v=a===Nk.Members?Wk:a===Nk.Activities?$k:a===Nk.Discussions?qk:a===Nk.Inventory?Qk:(Nk.Intents,Dk);fo(!!(null===i||void 0===i?void 0:i.name)&&v,i);var p=Pl(t).communityFollowersPage,g=Sl(t).threadsPage,b=Object(l.a)(g.formiks,1)[0],E=dl(t).collectionsPage,y=Object(l.a)(E.formiks,1)[0],O=cl(t).activitiesPage,j=Object(l.a)(O.formiks,1)[0],k=lj(t).communityIntents,w=function(e){var n=zk({variables:{agent:[e]}}).data,t=(null===n||void 0===n?void 0:n.economicResourcesFiltered)||[];return Object(h.useMemo)((function(){return{communityInventory:t}}),[t])}("01F494QA0T31JTQGJ80QFHTFM0").communityInventory,C=!!(null===i||void 0===i?void 0:i.myFollow),I=function(e){return!C&&(Object(m.c)(e,{type:"warning"}),!0)},F=Object(Fn.h)(),T=Object(Nt.a)({initialValues:{text:""},onSubmit:function(e){var n=e.text;return I(xa._("You should join this community to create a new trhead"))?void 0:c(n).then((function(e){F.push("/thread/".concat(e))}))}}),S=O.edges.map((function(e){return x.a.createElement(GO,{activityId:e.id,key:e.id})})),P=g.edges.map((function(e){var n;return(null===(n=e.comments)||void 0===n?void 0:n.edges[0])?x.a.createElement(Pn.Box,{key:e.id},x.a.createElement(WO,{threadId:e.id})):(console.warn("Found a thread [id:".concat(e.id,"] with an empty comments edges .. skipping"),e),null)})).filter((function(e){return!!e})),M=p.edges.map((function(e){var n;return e.creator&&x.a.createElement($g,{key:e.id,userId:null===(n=e.creator)||void 0===n?void 0:n.userId})})).filter((function(e){return!!e})),_=x.a.createElement(Um,{communityId:t,basePath:r}),L=k.map((function(e,n){var r,a,o;return e&&x.a.createElement(Lj,{key:n,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"",intentId:e.id,note:null!==(a=null===e||void 0===e?void 0:e.note)&&void 0!==a?a:"",communityName:null!==(o=null===i||void 0===i?void 0:i.name)&&void 0!==o?o:"",communityLink:"/communities/".concat(t),onOpen:f})})).filter((function(e){return!!e})),U=w.map((function(e,n){var t,r,a;return e&&x.a.createElement(Lj,{key:n,name:null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"",intentId:e.id,note:null!==(r=null===e||void 0===e?void 0:e.note)&&void 0!==r?r:"",communityName:null!==(a=null===i||void 0===i?void 0:i.name)&&void 0!==a?a:"",communityLink:"/resource/".concat(e.id),onOpen:function(){return F.push("/resource/".concat(e.id))}})})).filter((function(e){return!!e})),A=nC(),R=Object(h.useReducer)((function(e){return!I(xa._("You should join this community to create new collections"))&&!A()&&!e}),!1),B=Object(l.a)(R,2),z=B[0],N=B[1],D=z?x.a.createElement(tc,{closeModal:N},x.a.createElement(lu,{done:N,communityId:t})):null,$=d?x.a.createElement(tc,{closeModal:function(){f(null)}},x.a.createElement(Ak,{communityName:null!==(n=null===i||void 0===i?void 0:i.name)&&void 0!==n?n:"",intentId:d})):null,q=Object(h.useMemo)((function(){if(!i)return null;var e={discussions:Jk.getPath({communityId:t,tab:"discussions"},void 0),members:Jk.getPath({communityId:t,tab:"members"},void 0),timeline:Jk.getPath({communityId:t,tab:"timeline"},void 0),inventory:Jk.getPath({communityId:t,tab:"inventory"},void 0),intents:Jk.getPath({communityId:t,tab:void 0},void 0)};return{Members:M,Intents:L,Inventory:U,Activities:S,HeroCommunity:_,Threads:P,tabPaths:e,isJoined:C,newThreadFormik:C?T:null,loadMoreActivities:j,loadMoreCollections:y,loadMoreThreads:b,createCollection:N}}),[i,t,M,L,U,S,_,P,C,T,j,y,b]);return q&&x.a.createElement(x.a.Fragment,null,D,$,x.a.createElement(rj,q))},Hk={exact:!0,path:"/communities/:communityId/:tab(inventory|timeline|members|discussions|intents)?",component:function(e){var n=e.match,t=n.params.communityId,r=n.params.tab,a="timeline"===r?Nk.Activities:"inventory"===r?Nk.Inventory:"members"===r?Nk.Members:"discussions"===r?Nk.Discussions:r?null:Nk.Intents,o=Object(h.useMemo)((function(){return null===a?null:{communityId:t,tab:a,basePath:"/communities/".concat(t)}}),[a,t]);return null===o?x.a.createElement($b,null):x.a.createElement(oy,null,x.a.createElement(Vk,o))}},Jk=Ux(Hk);function Kk(){var e=Object(o.a)(["\n  margin-top: 9px;\n  cursor: pointer;\n"]);return Kk=function(){return e},e}function Zk(){var e=Object(o.a)(["\n  border-bottom: ",";\n  height: 50px;\n  background: ",";\n"]);return Zk=function(){return e},e}function Gk(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-columns: auto auto 1fr auto;\n  column-gap: 8px;\n"]);return Gk=function(){return e},e}function Yk(){var e=Object(o.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return Yk=function(){return e},e}function Xk(){var e=Object(o.a)(["\n  height: 30px;\n  line-height: 30px;\n  text-decoration: none;\n  padding: 0 8px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  margin-top: 10px;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n  }\n  div {\n    text-decoration: none;\n    color: ",";\n  }\n"]);return Xk=function(){return e},e}function ew(){var e=Object(o.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 120px;\n  order: 2;\n  justify-content: center;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return ew=function(){return e},e}function nw(){var e=Object(o.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 200px;\n  order: 2;\n  justify-content: flex-end;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return nw=function(){return e},e}function tw(){var e=Object(o.a)(["\n    img {\n        margin-right: 0;\n    }\n  "]);return tw=function(){return e},e}function rw(){var e=Object(o.a)(["\n  border-radius: 0px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return rw=function(){return e},e}function aw(){var e=Object(o.a)(["\n  ",";\n  color: ",";\n"]);return aw=function(){return e},e}function ow(){var e=Object(o.a)(["\n  color: ",";\n"]);return ow=function(){return e},e}function iw(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]);return iw=function(){return e},e}function cw(){var e=Object(o.a)(["\n  display: flex;\n  margin-top: 7px;\n  input {\n    width: 100%;\n    border-radius: 4px;\n    max-width: 500px;\n    height: 36px;\n    margin: 0;\n    border: 0;\n    background: ",";\n  }\n"]);return cw=function(){return e},e}function lw(){var e=Object(o.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-columns: 1fr 120px 200px;\n"]);return lw=function(){return e},e}var uw=function(e){var n=Object(Fn.h)(),t=x.a.useContext(Ea).i18n,r=Object(Fn.i)(),a=Object(Fn.j)(),o=Jk.is(r.pathname),i=Object(h.useState)(!1),c=Object(l.a)(i,2),u=c[0],m=c[1];return x.a.createElement(yw,null,x.a.createElement(mw,null,x.a.createElement(Ew,null,x.a.createElement(xw,{onClick:function(){return n.goBack()}},x.a.createElement(jc.a,{size:"20"})),x.a.createElement(Ow,{to:e.user?"/":"/discover"},x.a.createElement(Tc,{size:"s",src:Oe})),x.a.createElement(sw,null,e.Search),o&&x.a.createElement(dw,{to:"/communities/".concat(a.communityId,"/map/"),title:"Map"},x.a.createElement(kc.a,{size:"20"}))),x.a.createElement(bw,null,e.user&&x.a.createElement(pw,{sx:{position:"relative"},alignItems:"center",onClick:m},x.a.createElement(vw,{ml:2,variant:"link"},"Create"),x.a.createElement(fw,null,x.a.createElement(wc.a,{size:"20"})),u&&x.a.createElement(nl,{createCommunity:e.createCommunity,createResource:e.createResource,createIntent:e.createIntent,toggleDropdown:function(){m(!u)}}))),x.a.createElement(gw,{alignItems:"center"},e.user?x.a.createElement(pw,{sx:{position:"relative"},alignItems:"center",onClick:e.toggleDropdown},x.a.createElement(Tc,{size:"s",initials:e.user.name.substring(0,2),src:e.user.icon,variant:"avatar"}),x.a.createElement(vw,{ml:2,variant:"link"},e.user.name),x.a.createElement(fw,{ml:2},x.a.createElement(wc.a,{size:"20"})),e.isOpenDropdown&&x.a.createElement(el,{isAdmin:e.user.isAdmin,logout:e.user.logout,userLink:e.user.link,toggleDropdown:e.toggleDropdown})):x.a.createElement(Pn.Box,null,x.a.createElement(hw,null,x.a.createElement(Ht.b,{to:"/"},x.a.createElement(Pn.Text,{variant:"link"},t._("Sign in"))))))))},mw=Sn(Pn.Box)(lw()),sw=Sn(Pn.Box)(cw(),(function(e){return e.theme.colors.app})),dw=Sn(Ht.b)(iw()),fw=Sn(Pn.Box)(ow(),(function(e){return e.theme.colors.medium})),vw=Sn(Pn.Text)(aw(),Object(tt.c)("180px"),(function(e){return e.theme.colors.darker})),pw=Sn(Pn.Flex)(rw(),(function(e){return e.theme.colors.lighter}),k.a.lessThan("1280px")(tw())),gw=Sn(Pn.Box)(nw()),bw=Sn(Pn.Box)(ew()),hw=Sn(pw)(Xk(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return Object(tt.b)("0.1",e.theme.colors.primary)}),(function(e){return e.theme.colors.lighter})),xw=Sn(Pn.Box)(Yk(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),Ew=Sn(Pn.Box)(Gk()),yw=Sn(Pn.Box)(Zk(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),Ow=Sn(Ht.b)(Kk()),jw=t(145);function kw(){var e=Object(o.a)(["\n  mutation createEconomicEventAndNewResource($note: String, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!, $name: String) {\n    createEconomicEvent(event: {note: $note, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}, newInventoriedResource: {name: $name}) {\n      economicEvent {\n        id\n        note\n        receiver {\n          id\n          name\n          note\n        }\n        provider {\n          id\n          name\n          note\n        }\n        resourceQuantity {\n          hasNumericalValue\n          hasUnit {\n            label\n            symbol\n          }\n        }\n        resourceInventoriedAs {\n          id\n          name\n          onhandQuantity {\n            hasNumericalValue\n            hasUnit {\n              label\n              symbol\n            }\n          }\n          accountingQuantity {\n            hasNumericalValue\n            hasUnit {\n              label\n              symbol\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return kw=function(){return e},e}var ww=A()(kw());var Cw,Iw=function(){var e,n=q.c(ww,e),t=Object(l.a)(n,2),r=t[0],o=t[1],c=eC(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,i,c,l,u,m,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,i=n.note,c=n.action,l=n.provider,u=n.receiver,m=n.hasUnit,s=n.hasNumericalValue,!o.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:i,action:c,provider:l,receiver:u,hasUnit:m,hasNumericalValue:s}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,r]);return Object(h.useMemo)((function(){return{create:c}}),[c])},Fw=function(e){var n=e.formik,t=e.done,r=e.unitPages,a=e.actionList,o=e.providerList,i=e.receiverList,s=e.setAction,d=(Object(jw.a)(e,["formik","done","unitPages","actionList","providerList","receiverList","setAction"]),x.a.useState([])),f=Object(l.a)(d,2),v=f[0],p=f[1],g=x.a.useState([]),b=Object(l.a)(g,2),h=b[0],E=b[1],y=x.a.useState([]),O=Object(l.a)(y,2),j=O[0],k=O[1];return x.a.useEffect((function(){if(null===r||void 0===r?void 0:r.length){var e=r.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));k(e)}}),[r]),x.a.useEffect((function(){p(ok(o,"name")),E(ok(i,"name"))}),[o,i]),x.a.useEffect((function(){k(ok(null===r||void 0===r?void 0:r.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[r]),x.a.createElement(Ki,null,x.a.createElement("form",{onSubmit:n.handleSubmit},x.a.createElement(Xi,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"Create a new Resource"}))),x.a.createElement(tu,null,x.a.createElement(nu,null,x.a.createElement(Xl,null,x.a.createElement(mk,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("Resource")),x.a.createElement(Yj,{type:"text",id:"name",name:"name",disabled:n.isSubmitting,onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Name of your resource"),value:n.values.name})),x.a.createElement(Gi,null,60-n.values.name.length),n.errors.name&&x.a.createElement(ek,{variant:"negative"},n.errors.name)),x.a.createElement(Xl,null,x.a.createElement(mk,null,x.a.createElement(sk,null,"Actions"),x.a.createElement(ak,{onSelect:function(e,t){s(t.id),n.setValues(Object(c.a)(Object(c.a)({},n.values),{},{action:t}))},options:a,variant:"primary",id:"actions",name:"actions",placeholder:Object(Yn.i18nMark)("CustomSelect action"),value:n.values.action})),n.errors.action&&x.a.createElement(ek,{variant:"negative"},n.errors.action&&"Required")),x.a.createElement(Xl,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(mk,null,x.a.createElement(sk,null,"Receiver"),x.a.createElement(ak,{onSelect:function(e,t){s(t.id),n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t)))},placeholder:Object(Yn.i18nMark)("Provider"),options:v,variant:"primary",value:n.values.provider,id:"provider",name:"provider"})),n.errors.provider&&x.a.createElement(ek,{variant:"negative"},n.errors.provider&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(mk,null,x.a.createElement(sk,null,"Receiver"),x.a.createElement(ak,{onSelect:function(e,t){s(t.id),n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t)))},placeholder:Object(Yn.i18nMark)("Receiver"),options:h,variant:"primary",value:n.values.receiver,id:"receiver",name:"receiver"})),n.errors.receiver&&x.a.createElement(ek,{variant:"negative"},n.errors.receiver&&"Required")))),x.a.createElement(Xl,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(mk,null,x.a.createElement(sk,null,"unit"),x.a.createElement(ak,{onSelect:function(e,t){s(t.id),n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t)))},options:j,variant:"primary",id:"hasUnit",name:"hasUnit",placeholder:Object(Yn.i18nMark)("Unit"),value:n.values.hasUnit})),n.errors.hasUnit&&x.a.createElement(ek,{variant:"negative"},n.errors.hasUnit&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(mk,null,x.a.createElement(sk,null,"numerical value"),x.a.createElement(Yj,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Numerical Value"),value:n.values.hasNumericalValue})),n.errors.hasNumericalValue&&x.a.createElement(ek,{variant:"negative"},n.errors.hasNumericalValue)))),x.a.createElement(Xl,null,x.a.createElement(mk,null,x.a.createElement(sk,null,"note"),x.a.createElement(Yj,{id:"note",type:"textarea",name:"note",onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Note"),value:n.values.note})),x.a.createElement(Gi,null,n.values.note?500-n.values.note.length:500),n.errors.note&&x.a.createElement(ek,{variant:"negative"},n.errors.note)))),x.a.createElement(Zi,{mb:3},x.a.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Save"})),x.a.createElement(ot,{variant:"outline",onClick:t},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))},Tw=(io.object({name:io.string().min(2).max(60).required(),summary:io.string().max(500),icon:(Cw=io.mixed()).test.apply(Cw,Object(w.a)(hc))}),function(e){var n=e.done,t=Object(jw.a)(e,["done"]),r=ua().me,a=Object(Fn.h)(),o=Iw().create,i=io.object().shape({name:io.string().max(60,"Too Long!").required("Required"),note:io.string().max(500,"Too Long!"),action:io.object().shape({id:io.string().required("Required")}),provider:io.object().shape({id:io.string().required("Required")}),receiver:io.object().shape({id:io.string().required("Required")}),hasUnit:io.object().shape({id:io.string().required("Required")}),hasNumericalValue:io.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),l=Object(Nt.a)({initialValues:{name:"",note:"",action:{id:"",label:""},provider:{id:"",label:"",note:""},receiver:{id:"",label:"",note:""},hasUnit:{id:"",label:"",note:""},hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:i,enableReinitialize:!0,onSubmit:function(e){return o({name:e.name,action:e.action.id,note:e.note,provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue}).then((function(e){var n="/inventory/user/".concat(null===r||void 0===r?void 0:r.user.id," ");!e.errors&&a.replace(n),!e.errors&&m.c.success("Resource was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){return console.log(e)}))}}),u=Object(c.a)(Object(c.a)({},t),{},{formik:l,done:n});return x.a.createElement(Qj,null,x.a.createElement(Fw,u))});function Sw(){var e=Object(o.a)(["\n    mutation createOffer($action: String!, $name: String!, $communityId: ID!, $note: String, $hasUnit: ID!, $hasNumericalValue: Float!, $atLocation: ID) {\n  createOffer(intent: {action: $action, name: $name, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n      atLocation {\n        lat\n        long\n        alt\n      }\n      resourceQuantity {\n        hasUnit {\n          label\n          id\n        }\n        hasNumericalValue\n      }\n    }\n  }\n}\n    "]);return Sw=function(){return e},e}function Pw(){var e=Object(o.a)(["\n    mutation createIntent($name: String!, $action: String!, $communityId: ID!, $note: String) {\n  createIntent(intent: {action: $action, name: $name, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n    }\n  }\n}\n    "]);return Pw=function(){return e},e}A()(Pw());var Mw=A()(Sw());var _w=function(){var e,n=q.c(Mw,e),t=Object(l.a)(n,2),r=t[0],o=t[1],c=eC(function(){var e=Object(i.a)(a.a.mark((function e(n){var t,i,c,l,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,i=n.note,c=n.communityId,l=n.atLocation,u=n.hasNumericalValue,m=n.hasUnit,!o.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:i,communityId:c,action:"produced",atLocation:l,hasUnit:m,hasNumericalValue:u}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,r]);return Object(h.useMemo)((function(){return{create:c}}),[c])},Lw=function(e){var n=e.formik,t=e.cancel,r=e.communities,a=e.unitPages,o=e.spatialThings,i=x.a.useState([]),s=Object(l.a)(i,2),d=s[0],f=s[1];return x.a.useEffect((function(){if(null===a||void 0===a?void 0:a.length){var e=a.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));f(e)}}),[a]),x.a.createElement(Ki,null,x.a.createElement("form",{onSubmit:n.handleSubmit},x.a.createElement(Xi,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"Create an intent"}))),x.a.createElement(tu,null,x.a.createElement(nu,null,x.a.createElement(Xl,null,x.a.createElement(mk,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("Resource")),x.a.createElement(Yj,{type:"text",id:"name",name:"name",disabled:n.isSubmitting,onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("Name of your resource"),value:n.values.name})),x.a.createElement(Gi,null,60-n.values.name.length),n.errors.name&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.name))),x.a.createElement(Xl,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("name")),x.a.createElement(ak,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t.id)))},value:{id:n.values.communityId,label:""},variant:"primary",id:"communityId",name:"communityId",options:r}),n.errors.communityId&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.communityId))),x.a.createElement(eu,null,x.a.createElement(mk,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("unit")),x.a.createElement(ak,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t.id)))},options:d,placeholder:Object(Yn.i18nMark)("unit"),value:{id:n.values.hasUnit,label:""},variant:"primary",id:"hasUnit",name:"hasUnit"}),n.errors.hasUnit&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.hasUnit))),x.a.createElement(mk,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("Numerical Value")),x.a.createElement(Yj,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("Numerical Value"),value:n.values.hasNumericalValue.toString()}),n.errors.hasNumericalValue&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.hasNumericalValue)))),x.a.createElement(Xl,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("location")),x.a.createElement(ak,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(u.a)({},e,t.id)))},options:null===o||void 0===o?void 0:o.map((function(e){return{id:e.id,value:e.id,label:e.name}})),placeholder:Object(Yn.i18nMark)("CustomSelect location"),value:{id:n.values.atLocation||"",label:""},variant:"primary",id:"atLocation",name:"atLocation"}),n.errors.hasUnit&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.atLocation))),x.a.createElement(au,{mt:2},x.a.createElement(mk,null,x.a.createElement(sk,null,Object(Yn.i18nMark)("description")),x.a.createElement(Yj,{type:"textarea",id:"note",name:"note",onChange:n.handleChange,disabled:n.isSubmitting,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("A description of your intent"),value:n.values.note})),x.a.createElement(Gi,null,n.values.note?500-n.values.note.length:500),n.errors.note&&x.a.createElement(Wi,null,x.a.createElement(ek,{variant:"negative"},n.errors.note))))),x.a.createElement(Zi,{mb:3},x.a.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Save"})),x.a.createElement(ot,{variant:"outline",onClick:t},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))},Uw=function(e){var n,t,r,a=e.done,o=Object(Fn.h)(),i=Object(Fn.i)(),c=_w().create,l=qb().myCommunityFollowsPage,u=Object(h.useMemo)((function(){return l.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return{id:e.id,label:e.name}}))}),[l]),s=null===(n=Wj().data)||void 0===n?void 0:n.unitsPages,d=null===(t=q.d(Dj,r).data)||void 0===t?void 0:t.spatialThingsPages,f=io.object().shape({name:io.string().max(60,"Too Long!").required("Required"),note:io.string().max(500,"Too Long!"),communityId:io.string().required("Required"),hasUnit:io.string().required("Required"),hasNumericalValue:io.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),v={communities:u,formik:Object(Nt.a)({initialValues:{name:"",communityId:"",note:"",atLocation:"",hasUnit:"",hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:f,enableReinitialize:!0,onSubmit:function(e){return c({name:e.name,communityId:e.communityId,note:e.note,atLocation:e.atLocation,hasUnit:e.hasUnit,hasNumericalValue:e.hasNumericalValue}).then((function(n){var t,r,a="/communities/".concat(e.communityId,"/intents");a===i.pathname?window.location.reload():(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(r=t.createIntent)||void 0===r?void 0:r.intent)&&o.replace(a);!n.errors&&m.c.success("Intent was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){return console.log(e)}))}}),unitPages:null===s||void 0===s?void 0:s.edges,spatialThings:(null===d||void 0===d?void 0:d.edges)||null,cancel:a};return h.createElement(Lw,v)},Aw=function(){var e,n=ua(),t=null===(e=n.me)||void 0===e?void 0:e.user,r=nC(),a=Object(h.useReducer)((function(e){return!r()&&!e}),!1),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(h.useReducer)((function(e){return!r()&&!e}),!1),m=Object(l.a)(u,2),s=m[0],d=m[1],f=Object(h.useReducer)((function(e){return!r()&&!e}),!1),v=Object(l.a)(f,2),p=v[0],g=v[1],b=i?x.a.createElement(tc,{closeModal:c},x.a.createElement(Ec,{done:c})):null,E=s?x.a.createElement(tc,{closeModal:d},x.a.createElement(Uw,{done:d})):null,y=p?x.a.createElement(tc,{closeModal:g},x.a.createElement(Tw,{done:g})):null,O=Object(h.useContext)(bo).toggleOpen,j=Object(h.useReducer)((function(e){return!e}),!1),k=Object(l.a)(j,2),w=k[0],C=k[1],I=Object(h.useMemo)((function(){var e;return{Search:x.a.createElement(Oc,{key:"search"}),user:t?{isAdmin:n.isAdmin,logout:n.logout,icon:(null===(e=t.icon)||void 0===e?void 0:e.url)||"",link:"/user/".concat(t.id),name:t.name||""}:null,toggleSideBar:O,createCommunity:c,createIntent:d,createResource:g,isOpenDropdown:w,toggleDropdown:C}}),[t,n.isAdmin,n.logout,O,w]);return x.a.createElement(x.a.Fragment,null,b,E,y,x.a.createElement(uw,I))};function Rw(){var e=Object(o.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  height: calc(100vh - 66px);\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  column-gap: 8px;\n"]);return Rw=function(){return e},e}function Bw(){var e=Object(o.a)(["\n  height: 100vh;\n  grid-template-rows: 50px auto;\n  row-gap: 8px;\n  display: grid;\n"]);return Bw=function(){return e},e}function zw(){var e=Object(o.a)(["\n    display: none;\n  "]);return zw=function(){return e},e}function Nw(){var e=Object(o.a)(["\na {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 8px;\n  border-radius: 4px;\n  text-decoration: none;\n  background: ",";\n  color: ",";\n  margin-right: 8px;\n}\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 8px;\n  margin-left: 8px;\n  flex:1;\n}\n","\n"]);return Nw=function(){return e},e}function Dw(){var e=Object(o.a)(["\n    display: none;\n  "]);return Dw=function(){return e},e}function $w(){var e=Object(o.a)(["\n  ","\n"]);return $w=function(){return e},e}function qw(){var e=Object(o.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return qw=function(){return e},e}var Ww=function(e){var n=e.children,t=e.HeaderBox,r=e.SearchBox,a=Object(Fn.h)();return x.a.createElement(Jw,null,x.a.createElement(Hw,null,x.a.createElement(Qw,{onClick:function(){return a.goBack()}},x.a.createElement(jc.a,{size:"20"})),r,x.a.createElement(Ht.b,{to:"/login"},"Log in")),x.a.createElement(Vw,null,t),x.a.createElement(Kw,null,n))},Qw=Sn(Pn.Box)(qw(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),Vw=Sn(Pn.Box)($w(),k.a.lessThan("medium")(Dw())),Hw=Sn(Pn.Box)(Nw(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(zw())),Jw=Sn(Pn.Box)(Bw()),Kw=Sn(Pn.Box)(Rw()),Zw=function(e){var n=e.children,t=e.withoutHeader,r={HeaderBox:void 0!==t&&t?void 0:x.a.createElement(Aw,null),SearchBox:x.a.createElement(Oc,null)};return x.a.createElement(ho,null,x.a.createElement(Ww,r,n))},Gw={exact:!0,path:"/login",component:function(e){e.match;return x.a.createElement(Qx,null,x.a.createElement(Zw,{withoutHeader:!0},x.a.createElement(go,null)))}},Yw=Ux(Gw),Xw={content:function(){return x.a.createElement(Yn.Trans,{id:"You need to <0>login</0> for that",components:[x.a.createElement(Ht.b,{to:Yw.getPath(void 0,void 0)})]})},opts:{type:"warning"}};function eC(e,n,t){var r=Object(h.useCallback)(e,n),o=nC(t);return Object(h.useCallback)(Object(i.a)(a.a.mark((function e(){var n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o()?null:r.apply(void 0,n));case 1:case"end":return e.stop()}}),e)}))),[r,o])}var nC=function(e){var n,t=ua().me,r=!!(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id);return Object(h.useCallback)((function(){var n=Object(c.a)(Object(c.a)({},Xw),e),t=n.content,a=n.opts;return!r&&Object(m.c)(t,a),!r}),[r,e])},tC=function(e){var n,t=q.c(Wr,n),r=Object(l.a)(t,2),o=r[0],c=r[1],u=function(e){return q.c(Qr,e)}(),m=Object(l.a)(u,2),s=m[0],d=m[1],f=c.loading||d.loading,v=eC(Object(i.a)(a.a.mark((function n(){var t,r,i,c,l,u,m,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(t=e||{}).id,i=t.followerCount,c=t.myFollow,l=t.__typename,u=t.name,r&&!f){n.next=3;break}return n.abrupt("return");case 3:if(c){n.next=8;break}return m=g({ctx:"Collection"===l?"Following Collection ".concat(u):"User"===l?"Following User ".concat(u):"Community"===l?"Joined Community ".concat(u):void 0}),n.abrupt("return",o({variables:{contextId:r},context:m,optimisticResponse:rC(l,r,i||0),refetchQueries:"Community"===l?[Nr({limit:10}),ra({communityId:r})]:"Collection"===l?[_r({limit:10}),Yr({collectionId:r})]:[]}));case 8:return d=g({ctx:"Collection"===l?"Unfollowing Collection ".concat(u):"User"===l?"Unfollowing User ".concat(u):"Community"===l?"Leaving Community ".concat(u):void 0}),n.abrupt("return",Dr(c.id)?void 0:s({variables:{contextId:c.id},context:d,optimisticResponse:aC(l,r,i||1),refetchQueries:"Community"===l?[Nr({}),ra({communityId:r})]:"Collection"===l?[_r({}),Yr({collectionId:r})]:[]}));case 10:case"end":return n.stop()}}),n)}))),[e,f]);return Object(h.useMemo)((function(){return{toggleFollow:v}}),[v])},rC=function(e,n,t){return{__typename:"RootMutationType",createFollow:{__typename:"Follow",context:{__typename:e,id:n,myFollow:{__typename:"Follow",id:"#"},followerCount:t+1}}}},aC=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Follow",context:{__typename:e,id:n,myFollow:null,followerCount:t-1}}}};function oC(){var e=Object(o.a)(["\n    query collectionPreview($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    id\n    ...CollectionPreview\n  }\n}\n    ",""]);return oC=function(){return e},e}var iC=A()(oC(),Lt);var cC=function(e){var n,t,r=(t={variables:{collectionId:e}},q.d(iC,t)),a=tC(null===(n=r.data)||void 0===n?void 0:n.collection).toggleFollow;return Object(h.useMemo)((function(){var e;return{collection:null===(e=r.data)||void 0===e?void 0:e.collection,toggleFollow:a}}),[r,a])},lC=function(e){var n=e.collectionId,t=e.flagged,r=cC(n),a=r.collection,o=r.toggleFollow,i=Object(Nt.a)({initialValues:{},onSubmit:o}),c=Object(h.useMemo)((function(){return a?uC({collection:a,toggleFollowFormik:i,hideActions:!!t}):null}),[a,i,t]);return c&&x.a.createElement(vr,c)},uC=function(e){var n=e.collection,t=e.hideActions,r=e.toggleFollowFormik,a=n.id,o=n.icon,i=n.isLocal,c=n.canonicalUrl,l=n.name,u=n.summary,m=n.resourceCount,s=n.displayUsername,d=n.myFollow;return{displayUsername:s,icon:(null===o||void 0===o?void 0:o.url)||"",isFollowing:!!d,link:{url:i?"/collections/".concat(a):c||"",external:!i},name:l,summary:u||"",totalResources:m||null,toggleFollowFormik:r,hideActions:t}},mC={id:"All Collections"},sC=function(){fo(mC);var e=Qt().allCollectionsPage,n=Object(Nt.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(h.useMemo)((function(){return{CollectionsBoxes:x.a.createElement(x.a.Fragment,null,e.edges.map((function(e){return x.a.createElement(lC,{collectionId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return x.a.createElement(Ft,t)},dC={exact:!0,path:"/collections",component:function(){return x.a.createElement(oy,null,x.a.createElement(sC,null))}},fC=function(e){var n=e.CommunitiesBoxes,t=e.LoadMoreFormik;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(Un,{name:"All Communities"}),h.createElement(wt,null,n),h.createElement(ct,{LoadMoreFormik:t})))),h.createElement(Zh,null))},vC={id:"All Communities"},pC=function(){fo(vC);var e=Sx().allCommunitiesPage,n=Object(Nt.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(h.useMemo)((function(){return{CommunitiesBoxes:x.a.createElement(Fg.a,{m:2},e.edges.map((function(e){return x.a.createElement(yv,{communityId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return x.a.createElement(fC,t)},gC={exact:!0,path:"/communities",component:function(){return x.a.createElement(oy,null,x.a.createElement(pC,null))}};function bC(){var e=Object(o.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return bC=function(){return e},e}function hC(){var e=Object(o.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return hC=function(){return e},e}function xC(){var e=Object(o.a)(["\n  margin-bottom: 100px;\n  width: 432px;\n"]);return xC=function(){return e},e}function EC(){var e=Object(o.a)(["\n  margin: 0 auto;\n  width: 100%;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n \n  }\n"]);return EC=function(){return e},e}function yC(){var e=Object(o.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form' 'footer';\n"]);return yC=function(){return e},e}var OC=Sn.div(yC()),jC=Sn.div(EC()),kC=Sn(Pn.Box)(xC()),wC=function(e){var n=e.result;return h.createElement(h.Fragment,null,h.createElement(jC,null,h.createElement(OC,null,h.createElement(kC,null,h.createElement(Ia,null),h.createElement(IC,null,h.createElement(Pn.Box,null,n?null===n.error?h.createElement(h.Fragment,null,h.createElement(Pn.Text,{variant:"text"},"Email confirmed"),h.createElement(Pn.Text,{variant:"text",sx:{fontWeight:"bold",marginTop:"5px"}},"Welcome ",n.username,"!")):h.createElement(Pn.Text,{variant:"text"},"Error in email confirmation: ",n.error):h.createElement(Pn.Text,{variant:"text"},"Checking ...")),h.createElement(CC,null,h.createElement(Ht.b,{to:"/"},h.createElement(ot,{mt:3,variant:"primary"},h.createElement(Yn.Trans,{id:"Sign in"})))))))))},CC=Sn(Pn.Box)(hC()),IC=Sn.div(bC()),FC={id:"Confirm your email"},TC=function(e){var n,t,r=e.token;fo(FC);var a=Object(Fn.h)().push,o=co(),i=o.confirmEmail,c=o.confirmEmailStatus,l=null===(n=c.data)||void 0===n||null===(t=n.confirmEmail)||void 0===t?void 0:t.me.user.name;Object(h.useEffect)((function(){l&&setTimeout((function(){return a("/")}),2e3)}),[l,a]),Object(h.useEffect)((function(){i(r)}),[r,i]);var u=Object(h.useMemo)((function(){return c.loading?{result:null}:c.error?{result:{error:c.error.message}}:l?{result:{error:null,username:l}}:{result:{error:"No Data Received"}}}),[c,l]);return x.a.createElement(wC,u)},SC={exact:!0,path:"/confirm-email/:token",component:function(e){var n=e.match;return x.a.createElement(Wx,{to:"/#welcome"},x.a.createElement(Zw,null,x.a.createElement(TC,{token:n.params.token})))}};function PC(){var e=Object(o.a)(["\n  width: 10px;\n  height: 10px;\n"]);return PC=function(){return e},e}function MC(){var e=Object(o.a)(["\n  grid-area: form;\n"]);return MC=function(){return e},e}function _C(){var e=Object(o.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return _C=function(){return e},e}function LC(){var e=Object(o.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form';\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return LC=function(){return e},e}var UC={placeholders:{password:Object(Yn.i18nMark)("Enter your new password"),passwordConfirm:Object(Yn.i18nMark)("Confirm your new password")}},AC=function(e){var n=e.formik;return h.createElement(h.Fragment,null,h.createElement(BC,null,h.createElement(RC,null,h.createElement(zC,null,h.createElement(Ia,null),h.createElement(ma.b,{placeholder:UC.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.password)),h.createElement(NC,null),h.createElement(ma.b,{placeholder:UC.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.passwordConfirm)),h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Save the new password"}))))))},RC=Sn.div(LC()),BC=Sn.div(_C()),zC=Sn.div(MC()),NC=Sn.div(PC()),DC=io.object().shape({password:io.string().min(6).max(50).required("Password is required"),passwordConfirm:io.string().oneOf([io.ref("password"),null],"Passwords must match").required("Password confirm is required")}),$C={password:"",passwordConfirm:""},qC={id:"reate new Password"},WC=function(e){var n=e.token;fo(qC);var t=co().resetPwd,r=Object(Nt.a)({onSubmit:function(e){var r=e.password;return t({password:r,token:n})},initialValues:$C,validationSchema:DC}),a=Object(h.useMemo)((function(){return{formik:r}}),[r]);return x.a.createElement(AC,a)},QC={exact:!0,path:"/reset/:token",component:function(e){var n=e.match.params.token,t=Object(h.useMemo)((function(){return{token:n}}),[n]);return x.a.createElement(Qx,null,x.a.createElement(Zw,{withoutHeader:!0},x.a.createElement(WC,t)))}};function VC(){var e=Object(o.a)(["\n  flex-basis: 140px;\n  width: 140px;\n  height: 140px;\n  border-radius: 4px;\n  background-color: #f3f3f3;\n\n  img {\n    width: 100%;\n    height: 140px;\n    object-fit: cover;\n  }\n"]);return VC=function(){return e},e}function HC(){var e=Object(o.a)(["\n  flex-basis: calc(100% - 160px);\n"]);return HC=function(){return e},e}function JC(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-grow: 0;\n  background: #fff;\n  height: auto\n  padding: 1em;\n  margin-bottom: 10px;\n"]);return JC=function(){return e},e}function KC(){var e=Object(o.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return KC=function(){return e},e}var ZC=function(e){var n=e.resource;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(YC,{key:n&&n.id},h.createElement(eI,null,n&&n.image&&h.createElement("img",{src:n&&n.image,alt:n&&n.name})),h.createElement(XC,null,h.createElement(GC,{variant:"subhead"},n&&n.name),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},n&&n.note))))))),h.createElement(Zh,null))},GC=Sn(Pn.Text)(KC(),(function(e){return e.theme.colors.dark})),YC=Sn("div")(JC()),XC=Sn("div")(HC()),eI=Sn("div")(VC());function nI(){var e=Object(o.a)(["\n  font-size: ",";\n  color: ",";\n  text-decoration: none !important;\n  margin-bottom: 10px;\n\n  &:hover {\n    text-decoration: underline !important;\n  }\n"]);return nI=function(){return e},e}function tI(){var e=Object(o.a)(["\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n"]);return tI=function(){return e},e}var rI=function(e){var n=e.inventory;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,n.map((function(e){var n=e.id,t=e.name,r=e.note,a=e.image;return h.createElement(aI,{to:"/resource/".concat(n)},h.createElement(YC,{key:n},h.createElement(eI,null,a&&h.createElement("img",{src:a,alt:t})),h.createElement(XC,null,h.createElement(oI,{variant:"subhead"},t),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},r)))))}))))),h.createElement(Zh,null))},aI=Sn(Ht.c)(tI()),oI=Sn(Pn.Text)(nI(),ln.m1,(function(e){return e.theme.colors.dark})),iI=function(e){var n=e.userId,t=ua().me,r=zk({variables:{agent:[t?t.user.id:n]}}).data;return x.a.createElement(rI,{inventory:(null===r||void 0===r?void 0:r.economicResourcesFiltered)||[]})},cI={exact:!1,path:"/inventory/user/:userId",component:function(e){var n=e.match.params.userId,t={userId:n,basePath:"/inventory/user/".concat(n)};return x.a.createElement(oy,null,x.a.createElement(iI,t))}};function lI(){var e=Object(o.a)(["\n    query economicResource($id: ID!) {\n  economicResource(id: $id) {\n    id\n    name\n    note\n    image\n  }\n}\n    "]);return lI=function(){return e},e}var uI=A()(lI());var mI=function(e){var n,t=e.resourceId,r=(n={variables:{id:t}},q.d(uI,n)),a=r.data,o=r.loading,i=r.error,c={resource:null===a||void 0===a?void 0:a.economicResource,loading:o,error:i};return x.a.createElement(ZC,c)},sI={exact:!1,path:"/resource/:resourceId",component:function(e){var n={resourceId:e.match.params.resourceId};return x.a.createElement(oy,null,x.a.createElement(mI,n))}},dI=function(e){var n=e.userId;return h.createElement(Et,null,h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,"hi ",n))),h.createElement(Zh,null))};function fI(){var e=Object(o.a)(["\n    query user($userId: String!) {\n  user(userId: $userId) {\n    outbox(limit: 15) {\n      edges {\n        user {\n          icon {\n            id\n          }\n          name\n          image {\n            id\n          }\n        }\n        verb\n        context {\n          ... on Community {\n            ...CommunityPreview\n          }\n          ... on Collection {\n            ...CollectionPreview\n          }\n          ... on Resource {\n            ...ResourcePreview\n          }\n          ... on User {\n            ...UserPreview\n          }\n          ... on Comment {\n            ...CommentPreview\n          }\n          ... on Flag {\n            ...FlagPreview\n          }\n          ... on Like {\n            ...LikePreview\n          }\n          ... on Follow {\n            ...FollowPreview\n          }\n        }\n      }\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return fI=function(){return e},e}var vI=A()(fI(),Mt,Lt,Eo,Hr,wo,Io,To,Po);var pI=function(e){var n,t=e.userId,r=ua().me,a=r?r.user.id:t,o=(n={variables:{userId:a}},q.d(vI,n)),i=o.error,c=o.data;console.log({data:c}),console.log("Error:",i);var l={userId:t};return x.a.createElement(dI,l)},gI={exact:!1,path:"/activity",component:function(e){var n={userId:e.match.params.userId,basePath:"/activity"};return x.a.createElement(oy,null,x.a.createElement(pI,n))}},bI=t(783),hI=t(786),xI=t(766),EI=t(787),yI=(t(664),t(56)),OI=t(393);function jI(){var e=Object(o.a)(["\n  width: 100%;\n  height: 400px;\n"]);return jI=function(){return e},e}var kI=t.n(OI).a.renderToString(x.a.createElement(kc.a,{size:"30",color:Cn.colors.primary,fill:Cn.colors.secondary})),wI=Object(yI.divIcon)({className:"maker--pin",html:kI,iconSize:[30,30]}),CI=function(e){var n=e.center,t=e.zoom,r=void 0===t?20:t,a=e.markers,o=void 0===a?[]:a,i=e.tileAttribution,c=void 0===i?'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors':i,l=function(e,n){return n||(1===e.length?e[0].position:e.length>1?new yI.LatLngBounds(e.map((function(e){var n=e.position;return[n.lat,n.lng]}))).getCenter():void 0)}(o,n);return x.a.createElement(II,null,l&&x.a.createElement(bI.a,{center:l,zoom:r,style:{height:"100%",width:"100%"}},x.a.createElement(hI.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:c}),o.map((function(e,n){var t=e.position,r=e.popup;return x.a.createElement(xI.a,{icon:wI,key:n,position:t},r&&x.a.createElement(EI.a,null,r))}))))},II=j.default.div(jI()),FI=function(e){var n=e.center,t=e.zoom,r=void 0===t?13:t,a=e.markers,o=void 0===a?[]:a;return x.a.createElement(Et,null,x.a.createElement(yt,null,x.a.createElement(Ot,null,x.a.createElement(jt,null,x.a.createElement(CI,{center:n,zoom:r,markers:o})))))};function TI(){var e=Object(o.a)(["\n  query communityMapPoints($communityId: [ID]!) {\n    proposalsFiltered(inScopeOf: $communityId) {\n      __typename\n      id\n      name\n      note\n      eligibleLocation {\n        lat\n        long\n        geom\n      }\n    }\n  }\n"]);return TI=function(){return e},e}var SI=A()(TI()),PI=function(e){if(!e)return!1;var n=e.eligibleLocation;return n&&(n.geom||(null===n||void 0===n?void 0:n.lat)&&n.long)},MI=function(e){var n=e.communityId,t=Object(q.a)(),r=Object(h.useState)([]),a=Object(l.a)(r,2),o=a[0],i=a[1];return Object(h.useEffect)((function(){t.query({query:SI,variables:{communityId:n}}).then((function(e){e.data&&e.data.proposalsFiltered&&i(e.data.proposalsFiltered.filter(PI).map((function(e){return e})).map((function(e){var n=e.eligibleLocation,t=n.lat,r=n.long,a=n.geom;return{position:t&&r?{lat:t,lng:r}:{lat:a.coordinates[0],lng:a.coordinates[1]},popup:e.name}})))}))}),[n,t]),fo({id:"Map"}),x.a.createElement(FI,{markers:o,zoom:13,center:{lat:41.396,lng:2.192}})},_I={exact:!0,path:"/communities/:communityId/map/",component:function(e){var n=e.match;return null===n?x.a.createElement($b,null):x.a.createElement(oy,null,x.a.createElement(MI,{communityId:n.params.communityId}))}};Ux(_I);function LI(){var e=Object(o.a)(["\n  width: 432px;\n"]);return LI=function(){return e},e}function UI(){var e=Object(o.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return UI=function(){return e},e}function AI(){var e=Object(o.a)(["\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return AI=function(){return e},e}function RI(){var e=Object(o.a)([""]);return RI=function(){return e},e}function BI(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  padding: 16px;\n  max-width: 400px;\n"]);return BI=function(){return e},e}function zI(){var e=Object(o.a)(["\n  background: ",";\n  padding: 8px 16px;\n  border-radius: 4px;\n  text-decoration: none;\n  font-weight: 600;\n  color: ",";\n  margin-top: 16px;\n  margin: 0 auto;\n  display: block;\n  text-align: center;\n  margin-top: 16px;\n"]);return zI=function(){return e},e}var NI={placeholders:{email:Object(Yn.i18nMark)("Enter your email")}},DI=function(e){var n=e.formik,t=e.isSubmitted;return h.createElement(h.Fragment,null,h.createElement(VI,null,h.createElement(QI,null,h.createElement(Ia,null),t?h.createElement(qI,null,h.createElement(WI,{variant:"text"},h.createElement(Yn.Trans,{id:"If your email is linked to an account in our database, we have sent you an email with which you can reset your password. It may take a few minutes to arrive depending on your mail provider."})),h.createElement($I,{to:"/login"},h.createElement(Yn.Trans,{id:"Login"}))):h.createElement(HI,null,h.createElement(ma.b,{placeholder:NI.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.email)),h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Reset the password"}))))))},$I=Sn(Ht.b)(zI(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter})),qI=Sn(Pn.Box)(BI(),(function(e){return e.theme.colors.appInverse})),WI=Sn(Pn.Text)(RI()),QI=Sn.div(AI()),VI=Sn.div(UI()),HI=Sn.form(LI()),JI=io.object({email:io.string().max(50).required()}),KI={email:""},ZI={id:"Reset Password"},GI=function(){fo(ZI);var e=co().resetPwdReq,n=Object(Nt.a)({onSubmit:function(n){var t=n.email;return e(t)},initialValues:KI,validationSchema:JI});return x.a.createElement(DI,{formik:n,isSubmitted:n.submitCount>0})},YI={exact:!0,path:"/reset",component:function(e){e.match;return x.a.createElement(Qx,null,x.a.createElement(Zw,{withoutHeader:!0},x.a.createElement(GI,null)))}};function XI(){var e=Object(o.a)(["\n    mutation searchUnfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    __typename\n  }\n}\n    "]);return XI=function(){return e},e}function eF(){var e=Object(o.a)(["\n    mutation searchFollow($url: String!) {\n  createFollowByUrl(url: $url) {\n    id\n  }\n}\n    "]);return eF=function(){return e},e}function nF(){var e=Object(o.a)(["\n    query SearchHostIndexAndMyFollows {\n  instance {\n    ...SearchInstance\n  }\n}\n    ",""]);return nF=function(){return e},e}function tF(){var e=Object(o.a)(["\n    fragment SearchInstance on Instance {\n  hostname\n}\n    "]);return tF=function(){return e},e}var rF=A()(tF()),aF=A()(nF(),rF);var oF=A()(eF());var iF=A()(XI());var cF=function(e,n){var t=lF(null===e||void 0===e?void 0:e.community,n);if(!e||!t)return null;var r=e.preferredUsername,a=e.canonicalUrl,o=e.icon,i=e.summary,c=e.index_mothership_object_id,l=e.name;return{__typename:"Collection",community:t,displayUsername:l,icon:o?{__typename:"Content",id:"",url:o}:null,id:c,isLocal:n,myFlag:null,myFollow:null,name:l,canonicalUrl:a,summary:i,preferredUsername:r}},lF=function(e,n){if(!e)return null;var t=e.name,r=e.preferredUsername,a=e.summary,o=e.canonicalUrl,i=e.icon,c=e.index_mothership_object_id,l=e.followers;return{__typename:"Community",icon:i?{__typename:"Content",id:"",url:i}:null,id:c,isLocal:n,name:t,canonicalUrl:o,summary:a,followerCount:(null===l||void 0===l?void 0:l.totalCount)||0,threads:{totalCount:0,__typename:"ThreadsPage"},displayUsername:t,myFlag:null,myFollow:null,collectionCount:0,preferredUsername:r,creator:null}},uF=function(e){var n=mF(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,o=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:o||"",community:n}},mF=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:r||"",name:n,preferredUsername:t,summary:a||""}},sF=t(780),dF=t(779),fF=t(785),vF=t(781);function pF(){var e=Object(o.a)(["\n  background: ",";\n  max-width: 600px;\n"]);return pF=function(){return e},e}function gF(){var e=Object(o.a)(["\n  li {\n    height: 40px;\n    line-height: 40px;\n    input {\n      margin-right: 8px;\n    }\n  }\n"]);return gF=function(){return e},e}var bF=function(e){var n=e.previews,t=e.Pagination,r=e.Filter;return x.a.createElement(x.a.Fragment,null,x.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/instantsearch.css@7.1.1/themes/reset-min.css"}),x.a.createElement(Et,null,x.a.createElement(yt,null,x.a.createElement(xF,null,x.a.createElement(Ot,null,x.a.createElement(jt,null,x.a.createElement(Un,{name:"Search results"}),x.a.createElement(Pn.Box,null,n.map((function(e){return x.a.createElement(Pn.Box,{m:2,key:e.key},e)})))),x.a.createElement(Pn.Box,{m:2},t)))),x.a.createElement(Hn,null,x.a.createElement(Jn,null,x.a.createElement(Kn,{fontWeight:"bold"},x.a.createElement(Yn.Trans,{id:"Filters"})),x.a.createElement(Zn,null,x.a.createElement(hF,null,r))))))},hF=Sn(Pn.Box)(gF()),xF=Sn(Pn.Box)(pF(),(function(e){return e.theme.colors.appInverse})),EF=Object(vF.a)((function(e){var n=e.hits,t={previews:h.useMemo((function(){return n.map((function(e){return"Collection"===e.index_type?h.createElement(yF,{hit:e,key:e.objectID}):"Resource"===e.index_type?h.createElement(jF,{hit:e,key:e.objectID}):"Community"===e.index_type?h.createElement(OF,{hit:e,key:e.objectID}):(console.warn("Could not preview searchHit:",e),null)})).filter((function(e){return!!e}))}),[n]),Pagination:h.createElement(sF.a,{showNext:!0}),Filter:h.createElement(dF.a,{attribute:"index_type"})};return h.createElement(h.Fragment,null,h.createElement(fF.a,{hitsPerPage:8}),h.createElement(bF,t))})),yF=function(e){var n=e.hit,t=kF(n),r=cF(n,t),a=wF(n).toggleFollowFormik,o=r&&uC({collection:r,hideActions:!1,toggleFollowFormik:a});return!o&&console.warn("Could not preview searchHit:",n),o&&h.createElement(vr,Object.assign({isSearch:!0},o))},OF=function(e){var n=e.hit,t=kF(n),r=lF(n,t),a=wF(n).toggleFollowFormik,o=r&&Ov({community:r,hideActions:!1,toggleJoinFormik:a,isCreator:!1});return!o&&console.warn("Could not preview searchHit:",n),o&&h.createElement(mv,Object.assign({isSearch:!0},o))},jF=function(e){var n,t=e.hit,r=kF(t),a=Tv().data,o=!!((null===a||void 0===a||null===(n=a.instance)||void 0===n?void 0:n.uploadResourceTypes)||[]).find((function(e){var n;return"text/html"!==e.toLowerCase()&&e.toLowerCase()===(null===(n=t.mediaType)||void 0===n?void 0:n.toLowerCase())})),i=function(e){var n=e.resource,t=e.isLocal,r=e.isFile,a=cF(null===n||void 0===n?void 0:n.collection,t),o=null===n||void 0===n?void 0:n.url;if(!(n&&a&&o))return null;var i=n.name,c=n.canonicalUrl,l=n.icon,u=n.licence,m=n.summary,s=n.mediaType,d=n.index_mothership_object_id,f=n.likes;return{__typename:"Resource",canonicalUrl:c||"",collection:a,icon:l?{__typename:"Content",id:"",url:l}:null,name:i,summary:m||"",license:u,id:d,likers:{__typename:"LikesPage",totalCount:parseInt((null===f||void 0===f?void 0:f.totalCount)||"0")||0},myFlag:null,myLike:null,payload:{__typename:"Content",id:"",url:o,mirror:{__typename:"ContentMirror",url:o},mediaType:s||"",upload:r?{__typename:"ContentUpload"}:null}}}({resource:t,isLocal:r,isFile:o}),u=h.useReducer((function(e){return!e}),!1),m=Object(l.a)(u,2),s=m[0],d=m[1],f=h.useReducer((function(e){return!e}),!1),v=Object(l.a)(f,2),p=v[0],g=v[1],b=i&&Object(c.a)(Object(c.a)({},Zy({resource:i,hideActions:!1,like:null})),{},{isOpenDropdown:p,toggleDropdown:g,toggleFlag:null,sendToMoodle:d});!b&&console.warn("Could not preview searchHit:",t);var x=h.useMemo((function(){return function(e){var n=uF(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,o=e.licence;return{canonicalUrl:r||"",collection:n,icon:a||"",name:t,summary:e.summary||"",url:e.url||"",licence:o||"",mediaType:e.mediaType||""}}(t)}),[t]),E=x&&s?h.createElement(tc,{closeModal:d},h.createElement(Lv,{done:d,resource:x})):null;return b&&h.createElement(h.Fragment,null,E,h.createElement(Ty,Object.assign({isSearch:!0},b)))},kF=function(e){var n,t,r=(t={context:g({noShowError:!0})},q.d(aF,t)).data,a=null===r||void 0===r||null===(n=r.instance)||void 0===n?void 0:n.hostname;return e.index_instance===a},wF=function(e){var n,t=q.c(oF,n),r=Object(l.a)(t,2),o=(r[0],r[1]),c=function(e){return q.c(iF,e)}(),u=Object(l.a)(c,2),m=(u[0],u[1]),s={},d=Object(Nt.a)({initialValues:{},onSubmit:function(){var n=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.canonicalUrl&&!o.loading&&!m.loading){n.next=2;break}return n.abrupt("return");case 2:n.next=6;break;case 6:n.next=8;break;case 8:return n.abrupt("return");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});return h.useMemo((function(){return{toggleFollowFormik:d,hitSearchFollow:s}}),[d,s])},CF={exact:!1,path:"/search",component:function(){return Be?x.a.createElement($b,null):x.a.createElement(oy,null,x.a.createElement(EF,null))}},IF=t(767),FF=t(768),TF=t(769),SF=t(770);function PF(){var e=Object(o.a)(["\ncolor: ","\nborder-bottom: 1px solid ",";\na {\n  color: ","\n  text-decoration: none;\n  font-weight: 700;\n  &.active {\n      color: ",";\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n    \n  }\n}\n&:hover {\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n  }\n  "]);return PF=function(){return e},e}function MF(){var e=Object(o.a)([""]);return MF=function(){return e},e}function _F(){var e=Object(o.a)(["\n  text-transform: uppercase;\n  border-bottom: 4px solid ",";\n  padding: 16px;\n"]);return _F=function(){return e},e}function LF(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return LF=function(){return e},e}function UF(){var e=Object(o.a)(["\n  width: 80px;\n"]);return UF=function(){return e},e}function AF(){var e=Object(o.a)(["\n  width: 290px;\n"]);return AF=function(){return e},e}function RF(){var e=Object(o.a)(["\n  width: 350px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return RF=function(){return e},e}function BF(){var e=Object(o.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  border-radius: 40px;\n  display: flex;\n  align-items: center;\n  svg {\n    stroke: ",";\n    width: 40px;\n  }\n"]);return BF=function(){return e},e}function zF(){var e=Object(o.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return zF=function(){return e},e}function NF(){var e=Object(o.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n  & p {\n    color: ",";\n    padding: 0 24px;\n    margin-left: 120px;\n    margin: 0;\n    margin-left: 136px;\n    margin-top: -40px;\n    line-height: 26px;\n    padding-bottom: 16px;\n  }\n"]);return NF=function(){return e},e}function DF(){var e=Object(o.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return DF=function(){return e},e}function $F(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return $F=function(){return e},e}function qF(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return qF=function(){return e},e}function WF(){var e=Object(o.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return WF=function(){return e},e}function QF(){var e=Object(o.a)([""]);return QF=function(){return e},e}function VF(){var e=Object(o.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return VF=function(){return e},e}function HF(){var e=Object(o.a)(["\n  justify-content: space-between;\n  ",";\n"]);return HF=function(){return e},e}function JF(){var e=Object(o.a)(["\n  height: 250px;\n  border-radius: 4px;\n  width: 100%;\n  display: inline-block;\n  .thumb {\n    height: 100%;\n  }\n"]);return JF=function(){return e},e}function KF(){var e=Object(o.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return KF=function(){return e},e}function ZF(){var e=Object(o.a)(["\n  input {\n    background: #fbfbfb;\n    color: ",";\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return ZF=function(){return e},e}function GF(){var e=Object(o.a)(["\n  border-top: 4px solid ",";\n  border-bottom: 1px solid ",";\n"]);return GF=function(){return e},e}function YF(){var e=Object(o.a)(["\ndisplay: none;\n"]);return YF=function(){return e},e}function XF(){var e=Object(o.a)(["\n  ",";\n"]);return XF=function(){return e},e}function eT(){var e=Object(o.a)(["\n  background: ",";\n"]);return eT=function(){return e},e}var nT,tT={placeholders:{name:Object(Yn.i18nMark)("Display Name"),summary:Object(Yn.i18nMark)("Please tell us a little bit about yourself..."),location:Object(Yn.i18nMark)("Choose a location"),website:Object(Yn.i18nMark)("Enter a URL to share more info about you")}};!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(nT||(nT={}));var rT=function(e){var n=e.formik,t=e.Preferences,r=e.Instance,a=e.Invites,o=e.Flags,i=e.ModerationLog,l=e.displayUsername,u=e.isAdmin,m=e.sectionPaths,s=h.useCallback((function(e){return n.setValues(Object(c.a)(Object(c.a)({},n.values),{},{icon:e}))}),[n]),d="string"===typeof n.values.icon?n.values.icon:"",f=h.useCallback((function(e){return n.setValues(Object(c.a)(Object(c.a)({},n.values),{},{image:e}))}),[n]),v="string"===typeof n.values.image?n.values.image:"";return h.createElement(Et,null,h.createElement(oT,{sectionPaths:m,isAdmin:u}),h.createElement(yt,null,h.createElement(Ot,null,h.createElement(jt,null,h.createElement(aT,null,h.createElement(Fn.d,null,h.createElement(Fn.b,{path:m.preferences},t),h.createElement(Fn.b,{path:m.instance},r),h.createElement(Fn.b,{path:m.invites},a),h.createElement(Fn.b,{path:m.flags},o),h.createElement(Fn.b,{path:m.logs},i),h.createElement(Fn.b,{path:m.general},h.createElement(dT,{p:1,pb:2},h.createElement(bT,null,h.createElement(Pn.Flex,null,h.createElement(mT,null,h.createElement(di,{initialUrl:v,filePattern:"image/*",onFileSelect:f}))),h.createElement(sT,null,h.createElement(gT,null,h.createElement(uT,null,h.createElement(di,{initialUrl:d,filePattern:"image/*",onFileSelect:s})))),h.createElement(hT,{mt:2,ml:3},h.createElement(lT,null,h.createElement(ma.b,{placeholder:tT.placeholders.name,disabled:n.isSubmitting,name:"name",value:n.values.name,onChange:n.handleChange})),h.createElement(fT,{mt:1,p:2},l),h.createElement(lT,null,h.createElement(ma.d,{placeholder:tT.placeholders.summary,disabled:n.isSubmitting,name:"summary",value:n.values.summary,onChange:n.handleChange})),h.createElement(vT,{mt:2},h.createElement("span",null,h.createElement(kc.a,{strokeWidth:1,size:20})),h.createElement(lT,null,h.createElement(ma.b,{placeholder:tT.placeholders.location,disabled:n.isSubmitting,name:"location",value:n.values.location,onChange:n.handleChange}))),h.createElement(pT,{mt:2},h.createElement("span",null,h.createElement(vO.a,{strokeWidth:1,size:20})),h.createElement(lT,null,h.createElement(ma.b,{placeholder:tT.placeholders.website,disabled:n.isSubmitting,name:"website",value:n.values.website,onChange:n.handleChange}))))),h.createElement(Zi,{sx:{height:"inherit !important"}},h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Save"})))))))))))},aT=Sn(Pn.Box)(eT(),(function(e){return e.theme.colors.appInverse})),oT=function(e){var n=e.sectionPaths,t=e.isAdmin;return h.createElement(ET,{mr:2},h.createElement(yT,null,h.createElement(OT,null,h.createElement(jT,{p:3},h.createElement(Ht.c,{exact:!0,to:n.general},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(Ac.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"General information"}))))),h.createElement(jT,{p:3},h.createElement(Ht.c,{to:n.preferences},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(IF.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"Preferences"}))))),t?h.createElement(h.Fragment,null,h.createElement(cT,{p:3},h.createElement(Pn.Flex,{alignItems:"center",p:3,sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(Pn.Text,{variant:"suptitle"},"Admin"))),h.createElement(jT,{p:3},h.createElement(Ht.c,{to:n.instance},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(FF.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"Instance"}))))),h.createElement(jT,{p:3},h.createElement(Ht.c,{to:n.invites},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(TF.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"Invites"}))))),h.createElement(jT,{p:3},h.createElement(Ht.c,{to:n.flags},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(su.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"Flags"}))))),h.createElement(jT,{p:3},h.createElement(Ht.c,{to:n.logs},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(xT,{className:"icon",mr:1},h.createElement(SF.a,{size:20})),h.createElement(iT,null,h.createElement(Yn.Trans,{id:"Moderation log"})))))):null)))},iT=Sn(Pn.Text)(XF(),k.a.lessThan("medium")(YF())),cT=Sn(Pn.Flex)(GF(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.lighter})),lT=Sn(Yi)(ZF(),(function(e){return e.theme.colors.mediumdark})),uT=Sn.div(KF(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.light})),mT=Sn(Pn.Box)(JF()),sT=Sn(Pn.Flex)(HF(),k.a.lessThan("860px")(VF())),dT=Sn(Pn.Box)(QF()),fT=Sn(Pn.Text)(WF(),(function(e){return e.theme.colors.mediumdark})),vT=Sn(Pn.Flex)(qF(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),pT=Sn(Pn.Flex)($F(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),gT=Sn.div(DF()),bT=Sn.div(NF(),(function(e){return e.theme.colors.mediumdark})),hT=Sn(Pn.Box)(zF()),xT=Sn(Pn.Box)(BF(),(function(e){return e.theme.colors.medium})),ET=Sn(Pn.Flex)(RF(),(function(e){return e.theme.fontFamily}),k.a.lessThan("1095px")(AF()),k.a.lessThan("medium")(UF())),yT=Sn(Pn.Box)(LF(),(function(e){return e.theme.colors.appInverse})),OT=(Sn(Pn.Text)(_F(),(function(e){return e.theme.colors.lighter})),Sn(Pn.Box)(MF())),jT=Sn(Pn.Text)(PF(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),kT=function(){var e,n,t=q.d(Em,n),r=Dt(null===(e=t.data)||void 0===e?void 0:e.flags,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.flags)&&e.flags?Object(c.a)(Object(c.a)({},t),{},{flags:r({prev:e.flags,fetched:t.flags})}):e}})}));return Object(h.useMemo)((function(){return{flagsPage:r}}),[r])};function wT(){var e=Object(o.a)(["\n    mutation deactivateFlaggedUser($userId: String!) {\n  delete(contextId: $userId) {\n    ... on User {\n      id\n    }\n  }\n}\n    "]);return wT=function(){return e},e}function CT(){var e=Object(o.a)(["\n    mutation deleteFlagContext($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Collection {\n      id\n    }\n    ... on Comment {\n      id\n    }\n    ... on Community {\n      id\n    }\n    ... on Flag {\n      id\n    }\n    ... on Follow {\n      id\n    }\n    ... on Like {\n      id\n    }\n    ... on Resource {\n      id\n    }\n  }\n}\n    "]);return CT=function(){return e},e}function IT(){var e=Object(o.a)(["\n    mutation deleteFlag($flagId: String!) {\n  delete(contextId: $flagId) {\n    ... on Flag {\n      id\n    }\n  }\n}\n    "]);return IT=function(){return e},e}function FT(){var e=Object(o.a)(["\n    query flagPreviewData($flagId: String!) {\n  flag(flagId: $flagId) {\n    ...FlagPreview\n  }\n}\n    ",""]);return FT=function(){return e},e}var TT=A()(FT(),Io);var ST=A()(IT());var PT=A()(CT());var MT=A()(wT());var _T=function(e){var n,t,r=(t={variables:{flagId:e}},q.d(TT,t)),o=function(e){return q.c(PT,e)}(),c=Object(l.a)(o,2),u=c[0],m=c[1],s=function(e){return q.c(ST,e)}(),d=Object(l.a)(s,2),f=d[0],v=d[1],p=function(e){return q.c(MT,e)}(),g=Object(l.a)(p,2),b=g[0],x=g[1],E=null===(n=r.data)||void 0===n?void 0:n.flag,y=eC(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"===E.context.__typename&&!x.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",b({variables:{userId:E.context.userId}}));case 3:case"end":return e.stop()}}),e)}))),[E]),O=eC(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"!==E.context.__typename&&!v.loading&&!m.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Promise.all([f({variables:{flagId:E.id},refetchQueries:[ym({})]}),u({variables:{contextId:E.id}})]));case 3:case"end":return e.stop()}}),e)}))),[E]),j=eC(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&!v.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",f({variables:{flagId:E.id},refetchQueries:[ym({})]}));case 3:case"end":return e.stop()}}),e)}))),[E]);return Object(h.useMemo)((function(){return{flag:E,deactivateFlaggedUser:y,deleteFlagContext:O,ignoreFlag:j,deleteFlagContextStatus:m,deactivateFlaggedUserStatus:x,ignoreFlagStatus:v}}),[E,y,O,j,m,x,v])},LT=t(771),UT=t(772);function AT(){var e=Object(o.a)(["\n  background: ",";\n"]);return AT=function(){return e},e}function RT(){var e=Object(o.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return RT=function(){return e},e}function BT(){var e=Object(o.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return BT=function(){return e},e}function zT(){var e=Object(o.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return zT=function(){return e},e}function NT(){var e=Object(o.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return NT=function(){return e},e}function DT(){var e=Object(o.a)(["\n  color: ",";\n  background: ",";\n  border-left: 3px solid ",";\n"]);return DT=function(){return e},e}var $T=function(e){var n=e.FlaggedItemContextElement,t=e.type,r=e.reason,a=e.blockUser,o=e.ignoreFlag,i=e.deleteContent;return x.a.createElement(JT,null,x.a.createElement(qT,null,n),x.a.createElement(Pn.Text,{variant:"text",pt:2},r),x.a.createElement(QT,null,x.a.createElement(Pn.Box,null,x.a.createElement(WT,null,"User"===t?x.a.createElement(VT,{onClick:a},x.a.createElement(HT,null,x.a.createElement(LT.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Block"}))):x.a.createElement(VT,{onClick:i},x.a.createElement(HT,null,x.a.createElement(UT.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Delete"}))),x.a.createElement(VT,{ml:2,onClick:o},x.a.createElement(HT,{className:"unflag"},x.a.createElement(su.a,{className:"hover",strokeWidth:"1",size:"16"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Ignore"})))))))},qT=Sn(Pn.Box)(DT(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),WT=Sn(Pn.Flex)(NT()),QT=Sn(Pn.Box)(zT()),VT=Sn(Pn.Flex)(BT(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),ln.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),HT=Sn(Pn.Box)(RT()),JT=Sn(Pn.Box)(AT(),(function(e){return e.theme.colors.appInverse}));function KT(){var e=Object(o.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return KT=function(){return e},e}var ZT=function(e){var n=e.title,t=e.description,r=e.action,a=e.cancel,o=e.confirm,i=e.waiting;return h.createElement(Ki,null,h.createElement(Xi,null,h.createElement(Pn.Heading,{m:2},n)),h.createElement(ec,null,h.createElement(Yi,null,h.createElement(Pn.Text,null,t))),h.createElement(Zi,null,h.createElement(GT,{variant:"primary",isSubmitting:i,isDisabled:i,type:"submit",style:{marginLeft:"10px"},onClick:o},r),h.createElement(ot,{variant:"outline",onClick:a},h.createElement(Yn.Trans,{id:"Cancel"}))))},GT=Sn(ot)(KT()),YT=function(e){var n=e.flagId,t=_T(n),r=t.deactivateFlaggedUser,a=t.deleteFlagContext,o=t.flag,i=t.ignoreFlag,c=t.deleteFlagContextStatus,u=t.deactivateFlaggedUserStatus,m=t.ignoreFlagStatus,s=Object(h.useState)(),d=Object(l.a)(s,2),f=d[0],v=d[1],p=Object(h.useCallback)((function(){return v(void 0)}),[]),g=o&&f?x.a.createElement(tc,{closeModal:p},"delete"===f?x.a.createElement(ZT,{cancel:p,confirm:function(){return a().then(p)},waiting:c.loading||m.loading,action:xa._("Delete flagged content"),description:xa._("Are you sure you want to permanently delete this ".concat(o.context.__typename," content?")),title:xa._("Delete")}):"block"===f?x.a.createElement(ZT,{cancel:p,confirm:function(){return r().then(p)},waiting:u.loading,action:xa._("Delete user"),description:xa._("Are you sure you want to permanently delete this user?"),title:xa._("Delete")}):"ignore"===f?x.a.createElement(ZT,{cancel:p,confirm:function(){return i().then(p)},waiting:c.loading,action:xa._("Ignore flag"),description:xa._("Are you sure you want to ignore and delete this flag?"),title:xa._("Ignore")}):null):null,b=Object(h.useMemo)((function(){if(o){if("Comment"===o.context.__typename){var e,n=o.context,t=pd(n),r=t.communityLink,a=t.communityName,i=x.a.createElement(md,{commentId:n.id,mainComment:!1,hideActions:!0}),c=o.creator&&FO(o.creator);return x.a.createElement(Cd,{actor:c,commentActor:n.creator?FO(n.creator):void 0,createdAt:n.createdAt,event:"commented",communityLink:r,communityName:a,status:fd.Loaded,threadUrl:(null===(e=n.thread)||void 0===e?void 0:e.id)&&KO.getPath({threadId:n.thread.id},void 0),preview:i})}return o?x.a.createElement(fO,{context:o.context}):x.a.createElement(x.a.Fragment,null)}return x.a.createElement(x.a.Fragment,null)}),[o]),E=Object(h.useMemo)((function(){return o?{FlaggedItemContextElement:b,reason:o.message,type:o.context.__typename,blockUser:function(){return v("block")},deleteContent:function(){return v("delete")},ignoreFlag:function(){return v("ignore")}}:null}),[b,o]);return E&&x.a.createElement(x.a.Fragment,null,g,x.a.createElement($T,E))},XT=function(e){var n=e.FlagPreviews,t=e.loadMoreFlags;return h.createElement(Pn.Box,null,h.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},h.createElement(Yn.Trans,{id:"Flags"})),h.createElement(ec,null,n?h.createElement(Pn.Box,{mt:2,sx:{width:"600px"}},n.map((function(e){return h.createElement(Ct,{key:e.key||""},e)})),t?h.createElement(ct,{LoadMoreFormik:t}):null," "):h.createElement(Pn.Text,{pt:3},h.createElement(Yn.Trans,{id:"No flags yet"}))))},eS=function(){var e=kT().flagsPage,n=Object(l.a)(e.formiks,1)[0],t=Object(h.useMemo)((function(){return e.edges.map((function(e){var n=e.creator&&FO(e.creator);return x.a.createElement(Cd,{key:e.id,actor:n,communityLink:"",communityName:"",createdAt:e.createdAt,event:"flagged",preview:x.a.createElement(YT,{flagId:e.id}),status:fd.Loaded})}))}),[e.edges]),r=Object(h.useMemo)((function(){return{FlagPreviews:t,loadMoreFlags:n}}),[t,n]);return x.a.createElement(XT,r)};function nS(){var e=Object(o.a)(['\n    query instanceRegisterEmailDomainAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailDomainAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailDomainAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      domain\n    }\n  }\n}\n    ',""]);return nS=function(){return e},e}function tS(){var e=Object(o.a)(['\n    query instanceRegisterEmailAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      email\n    }\n  }\n}\n    ',""]);return tS=function(){return e},e}function rS(){var e=Object(o.a)(["\n    mutation sendInviteEmail($email: String!) {\n  sendInvite(email: $email)\n}\n    "]);return rS=function(){return e},e}function aS(){var e=Object(o.a)(["\n    mutation removeEmailFromAllowList($id: String!) {\n  deleteRegisterEmailAccess(id: $id) {\n    id\n  }\n}\n    "]);return aS=function(){return e},e}function oS(){var e=Object(o.a)(["\n    mutation addEmailToAllowList($email: String!) {\n  createRegisterEmailAccess(email: $email) {\n    email\n    id\n  }\n}\n    "]);return oS=function(){return e},e}function iS(){var e=Object(o.a)(["\n    mutation removeEmailDomainFromAllowList($id: String!) {\n  deleteRegisterEmailDomainAccess(id: $id) {\n    id\n  }\n}\n    "]);return iS=function(){return e},e}function cS(){var e=Object(o.a)(["\n    mutation addEmailDomainToAllowList($domain: String!) {\n  createRegisterEmailDomainAccess(domain: $domain) {\n    domain\n    id\n  }\n}\n    "]);return cS=function(){return e},e}var lS=A()(cS());var uS=A()(iS());A()(oS());var mS=A()(aS());var sS=A()(rS());var dS=A()(tS(),At);var fS=A()(nS(),At);var vS=function(e,n){return{query:dS,variables:e,context:n}},pS=function(e,n){return{query:fS,variables:e,context:n}},gS=function(){var e,n,t,r=q.c(lS,t),a=Object(l.a)(r,2),o=a[0],i=a[1],u=function(e){return q.c(uS,e)}(),m=Object(l.a)(u,2),s=m[0],d=m[1],f=function(e){return q.c(mS,e)}(),v=Object(l.a)(f,2),p=v[0],g=v[1],b=function(e){return q.c(sS,e)}(),x=Object(l.a)(b,2),E=x[0],y=x[1],O=function(e){return q.d(dS,e)}({variables:{limit:Ee}}),j=Dt(null===(e=O.data)||void 0===e?void 0:e.registerEmailAccesses,(function(e){var n=e.cursor,t=e.update;return O.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailAccesses)&&e.registerEmailAccesses?Object(c.a)(Object(c.a)({},r),{},{registerEmailAccesses:t({prev:e.registerEmailAccesses,fetched:r.registerEmailAccesses})}):e}})})),k=function(e){return q.d(fS,e)}({variables:{limit:Ee}}),w=Dt(null===(n=k.data)||void 0===n?void 0:n.registerEmailDomainAccesses,(function(e){var n=e.cursor,t=e.update;return k.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailDomainAccesses)&&e.registerEmailDomainAccesses?Object(c.a)(Object(c.a)({},r),{},{registerEmailDomainAccesses:t({prev:e.registerEmailDomainAccesses,fetched:r.registerEmailDomainAccesses})}):e}})})),C=eC((function(e){return o({variables:{domain:e},refetchQueries:[pS({})]})}),[o]),I=eC((function(e){return s({variables:{id:e},refetchQueries:[pS({})]})}),[s]),F=eC((function(e){return E({variables:{email:e}})}),[E]),T=eC((function(e){return E({variables:{email:e},refetchQueries:[vS({})]})}),[E]),S=eC((function(e){return p({variables:{id:e},refetchQueries:[vS({})]})}),[p]);return Object(h.useMemo)((function(){return{listEmailDomainsPage:w,listEmailsPage:j,addEmailDomain:C,removeEmailDomain:I,addEmail:T,removeEmail:S,sendInviteEmail:F,addEmailDomainStatus:i,removeEmailDomainStatus:d,removeEmailStatus:g,sendInviteEmailStatus:y}}),[w,j,C,I,T,S,F,i,d,g,y])};function bS(){var e=Object(o.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  svg{\n    stroke: ",";\n  }\n  &:hover {\n    // background: ",";\n    svg{\n      stroke: ",";\n    }\n  }\n"]);return bS=function(){return e},e}function hS(){var e=Object(o.a)(["\n  align-items: center;\n"]);return hS=function(){return e},e}function xS(){var e=Object(o.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return xS=function(){return e},e}function ES(){var e=Object(o.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return ES=function(){return e},e}function yS(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]);return yS=function(){return e},e}function OS(){var e=Object(o.a)(["\n  flex:1;\n  // color: ",";\n"]);return OS=function(){return e},e}var jS={placeholders:{domain:Object(Yn.i18nMark)("Enter domain (e.g. moodle.com)")}},kS=Sn(Pn.Text)(OS(),(function(e){return e.theme.colors.medium})),wS=Sn(Yi)(yS()),CS=Sn.div(ES(),(function(e){return e.theme.colors.lighter})),IS=Sn(ma.b)(xS(),(function(e){return e.theme.colors.mediumdark})),FS=Sn(ec)(hS()),TS=Sn(Pn.Box)(bS(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),SS=function(e){var n=e.formikAddDomain,t=e.removeDomain,r=e.domainsList,a=e.loadMoreDomains;return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},x.a.createElement("span",{style:{marginRight:"8px"},"aria-label":"icon",role:"img"},"\ud83c\udfa8"),"Customize your instance"),x.a.createElement(CS,null,x.a.createElement(ma.c,{pt:3},x.a.createElement(Yn.Trans,{id:"Add Domain to allowlist"})),x.a.createElement(wS,null,x.a.createElement(IS,{placeholder:jS.placeholders.domain,disabled:n.isSubmitting,name:"domain",value:n.values.domain,onChange:n.handleChange}),x.a.createElement(Zi,null,x.a.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},x.a.createElement(Yn.Trans,{id:"Add"}))))),x.a.createElement(Pn.Box,{p:3},x.a.createElement(Pn.Text,{p:3,variant:"suptitle"},x.a.createElement(Yn.Trans,{id:"Allowed Domains"})),r.map((function(e){return x.a.createElement(FS,{key:e},x.a.createElement(kS,null,e),x.a.createElement(TS,{onClick:function(){return t(e)}},x.a.createElement(UT.a,{size:21})))})),a?x.a.createElement(ct,{LoadMoreFormik:a}):null," "),x.a.createElement(Pn.Text,{variant:"suptitle",p:3},x.a.createElement(Yn.Trans,{id:"More options will be available soon"})))},PS=io.object().shape({domain:io.string().matches(Ne)}),MS=function(){var e=Object(h.useState)(),n=Object(l.a)(e,2),t=n[0],r=n[1],a=Object(h.useCallback)((function(){return r(void 0)}),[]),o=gS(),i=o.removeEmailDomain,c=o.addEmailDomain,u=o.listEmailDomainsPage,m=o.removeEmailDomainStatus,s=Object(l.a)(u.formiks,1)[0],d=Object(Nt.a)({initialValues:{domain:""},validationSchema:PS,onSubmit:function(e,n){var t=e.domain,r=n.resetForm;return t?c(t).then((function(){return r()})):void 0}}),f=Object(h.useMemo)((function(){return u.edges.map((function(e){return e.domain}))}),[u]),v=Object(h.useCallback)((function(){var e,n=null===(e=u.edges.find((function(e){return t===e.domain})))||void 0===e?void 0:e.id;n?i(n).then(a):a()}),[t,u.edges,i,a]),p=t?x.a.createElement(tc,{closeModal:function(){return r(void 0)}},x.a.createElement(ZT,{cancel:a,confirm:v,action:xa._("Delete domain from allowlist"),description:xa._("Are you sure you want to delete ".concat(t," from allowlist?")),title:xa._("Delete"),waiting:m.loading})):null,g=Object(h.useMemo)((function(){return{formikAddDomain:d,removeDomain:r,domainsList:f,loadMoreDomains:s}}),[d,f,s]);return x.a.createElement(x.a.Fragment,null,p,x.a.createElement(SS,g))};function _S(){var e=Object(o.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return _S=function(){return e},e}function LS(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]);return LS=function(){return e},e}function US(){var e=Object(o.a)(["\n  align-items: center;\n"]);return US=function(){return e},e}function AS(){var e=Object(o.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return AS=function(){return e},e}function RS(){var e=Object(o.a)(["\n  flex:1;\n  // color: ",";\n"]);return RS=function(){return e},e}var BS={placeholders:{email:Object(Yn.i18nMark)("Add email addresses (comma-separated) to invite to instance")}},zS=function(e){var n=e.emailsList,t=e.formikAddEmail,r=e.sendInvite,a=e.loadMoreEmails;return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{variant:"heading",px:3,mt:2},"Manage your instance registration"),x.a.createElement(WS,null,x.a.createElement(ma.c,{pt:3},x.a.createElement(Yn.Trans,{id:"Email"})),x.a.createElement(qS,null,x.a.createElement(DS,{placeholder:BS.placeholders.email,disabled:t.isSubmitting,name:"email",value:t.values.email,onChange:t.handleChange}),x.a.createElement(Zi,null,x.a.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},x.a.createElement(Yn.Trans,{id:"Add"}))))),x.a.createElement(Pn.Box,{p:3},x.a.createElement(Pn.Text,{p:3,variant:"suptitle"},x.a.createElement(Yn.Trans,{id:"Sent invitations"})),n.map((function(e,n){return x.a.createElement($S,{key:"".concat(n,"-").concat(e)},x.a.createElement(NS,null,e),x.a.createElement(ot,{variant:"outline",onClick:function(){return r(e)}},x.a.createElement(Yn.Trans,{id:"Send again"})))})),a?x.a.createElement(ct,{LoadMoreFormik:a}):null," "))},NS=Sn(Pn.Text)(RS(),(function(e){return e.theme.colors.medium})),DS=Sn(ma.b)(AS(),(function(e){return e.theme.colors.mediumdark})),$S=Sn(ec)(US()),qS=Sn(Yi)(LS()),WS=Sn.div(_S(),(function(e){return e.theme.colors.lighter})),QS=io.object().shape({email:io.string().matches(/^.+@.+\..+$/)}),VS=function(){var e=gS(),n=e.addEmail,t=e.listEmailsPage,r=e.sendInviteEmail,a=Object(l.a)(t.formiks,1)[0],o=Object(Nt.a)({initialValues:{email:""},validationSchema:QS,onSubmit:function(e,t){var r=e.email,a=t.resetForm;return r?n(r).then((function(){return a()})):void 0}}),i=Object(h.useMemo)((function(){return t.edges.map((function(e){return e.email}))}),[t]),c=Object(h.useMemo)((function(){return{formikAddEmail:o,sendInvite:r,emailsList:i,loadMoreEmails:a}}),[o,r,i,a]);return x.a.createElement(zS,c)},HS=function(){return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},x.a.createElement(Yn.Trans,{id:"Moderation Log"})),x.a.createElement(Pn.Text,{variant:"suptitle",p:3},x.a.createElement(Yn.Trans,{id:"Logs will be available soon"})))},JS=function(){return x.a.createElement(HS,null)};function KS(){var e=Object(o.a)(["\n  text-align: right;\n  padding: 0px 20px;\n\n  a {\n    text-decoration: underline;\n    color: ",";\n    &:hover {\n      color: ",";\n    }\n  }\n"]);return KS=function(){return e},e}var ZS,GS=function(e){return h.createElement(nk.a,{options:e.locales,defaultValue:e.current,onChange:function(n){var t=Array.isArray(n)?n[0]:n;t&&e.setLocale(t.value)}})},YS=function(e){return h.createElement(Pn.Box,null,h.createElement(ec,null,h.createElement(Yi,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Select language"})),h.createElement(GS,e),h.createElement(Pn.Box,{width:.5,mt:2},h.createElement(ma.c,{htmlFor:"moodleWebsite"},"Moodle LMS site location"),h.createElement(ma.b,{id:"moodleWebsite",disabled:e.formik.isSubmitting,value:e.formik.values.moodleWebsite,onChange:e.formik.handleChange,name:"moodleWebsite",placeholder:"Type your Moodle LMS instance"})),h.createElement(Zi,{sx:{height:"inherit !important"}},h.createElement(ot,{variant:"primary",isSubmitting:e.formik.isSubmitting,isDisabled:e.formik.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:e.formik.submitForm},h.createElement(Yn.Trans,{id:"Save"}))))),h.createElement(XS,{variant:"text",my:3,mt:2},h.createElement("a",{href:"https://www.transifex.com/moodlenet/moodlenet/",target:"_blank",rel:"noopener noreferrer"},h.createElement(Yn.Trans,{id:"Want to contibute to MoodleNet translation?"}))))},XS=Sn(Pn.Text)(KS(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.darkest})),eP=io.object({moodleWebsite:io.string().matches(Ne)}),nP=function(){var e,n,t=x.a.useContext(Ea),r=t.available,a=t.current,o=t.set,i=ua(),c=i.me,l=i.updateProfile,u=null===c||void 0===c?void 0:c.user,m=Object(Nt.a)({enableReinitialize:!0,initialValues:{moodleWebsite:(null===u||void 0===u||null===(e=u.extraInfo)||void 0===e||null===(n=e.LMS)||void 0===n?void 0:n.site)||""},validationSchema:eP,onSubmit:function(e){var n=e.moodleWebsite;return l({profile:{extraInfo:{LMS:{site:n}}}})}}),s=Object(h.useMemo)((function(){return r.map((function(e){return{value:e.code,label:e.desc}}))}),[r]),d=Object(h.useMemo)((function(){return s.find((function(e){return e.value===a.code}))||s[0]}),[a.code,s]),f=Object(h.useCallback)((function(e){var n=r.find((function(n){return n.code===e}));n&&o(n)}),[r,o]);return x.a.createElement(YS,{formik:m,current:d,locales:s,setLocale:f})};!function(e){e[e.Preferences=0]="Preferences",e[e.Invites=1]="Invites",e[e.Instance=2]="Instance",e[e.Flags=3]="Flags",e[e.ModerationLogs=4]="ModerationLogs",e[e.General=5]="General"}(ZS||(ZS={}));var tP={id:"Settings - Preferences"},rP={id:"Settings - Invites"},aP={id:"Settings - Instance"},oP={id:"Settings - Flags"},iP={id:"Settings - Moderation"},cP={id:"Settings - General"},lP=function(e){e.basePath;var n=e.tab,t=n===ZS.Preferences?tP:n===ZS.Invites?rP:n===ZS.Instance?aP:n===ZS.Flags?oP:n===ZS.ModerationLogs?iP:(ZS.General,cP);fo(t);var r=ua(),a=r.me,o=r.updateProfile,i=null===a||void 0===a?void 0:a.user,c=Object(h.useMemo)((function(){var e,n;return{icon:(null===i||void 0===i||null===(e=i.icon)||void 0===e?void 0:e.url)||void 0,image:(null===i||void 0===i||null===(n=i.image)||void 0===n?void 0:n.url)||void 0,location:(null===i||void 0===i?void 0:i.location)||"",name:(null===i||void 0===i?void 0:i.name)||"",website:(null===i||void 0===i?void 0:i.website)||"",summary:(null===i||void 0===i?void 0:i.summary)||""}}),[i]),l=Object(Nt.a)({initialValues:c,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.image,r=Object(jw.a)(e,["icon","image"]);return o({profile:r,icon:n,image:t})}}),u=Object(h.useMemo)((function(){return{preferences:NP.getPath({tab:"preferences"},void 0),instance:NP.getPath({tab:void 0},void 0),invites:NP.getPath({tab:"invites"},void 0),flags:NP.getPath({tab:"flags"},void 0),logs:NP.getPath({tab:"logs"},void 0),general:NP.getPath({tab:void 0},void 0)}}),[]),m=Object(h.useMemo)((function(){return{sectionPaths:u,displayUsername:(null===i||void 0===i?void 0:i.displayUsername)||"",isAdmin:!!(null===a||void 0===a?void 0:a.isInstanceAdmin),formik:l,Preferences:x.a.createElement(nP,null),Instance:x.a.createElement(MS,null),Invites:x.a.createElement(VS,null),Flags:x.a.createElement(eS,null),ModerationLog:x.a.createElement(JS,null)}}),[a,i,u,l]);return m&&x.a.createElement(rT,m)};function uP(){var e=Object(o.a)(["\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  margin-top: 16px;\n"]);return uP=function(){return e},e}function mP(){var e=Object(o.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n    margin: 0 8px;\n  "]);return mP=function(){return e},e}function sP(){var e=Object(o.a)(["\n  height: calc(100vh - 150px);\n  overflow: overlay;\n  grid-template-rows: auto;\n  grid-template-columns:1fr;\n  column-gap: 0px;\n  margin: 0;\n  margin: 0 8px;\n  "]);return sP=function(){return e},e}function dP(){var e=Object(o.a)(["\n  grid-template-rows: auto;\n  grid-template-columns:  1fr;\n  height: calc(100vh - 66px);\n  "]);return dP=function(){return e},e}function fP(){var e=Object(o.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return fP=function(){return e},e}function vP(){var e=Object(o.a)(["\n    grid-template-rows: 75px 1fr 75px;\n  "]);return vP=function(){return e},e}function pP(){var e=Object(o.a)(["\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  "]);return pP=function(){return e},e}function gP(){var e=Object(o.a)(["\n  height: 100vh;\n  display: grid;\n  ","\n  ","\n"]);return gP=function(){return e},e}function bP(){var e=Object(o.a)(["\n    display: none;\n  "]);return bP=function(){return e},e}function hP(){var e=Object(o.a)(["\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n\n"]);return hP=function(){return e},e}function xP(){var e=Object(o.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n"]);return xP=function(){return e},e}function EP(){var e=Object(o.a)(["\n    display: none;\n  "]);return EP=function(){return e},e}function yP(){var e=Object(o.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return yP=function(){return e},e}function OP(){var e=Object(o.a)(["\n    display: none;\n  "]);return OP=function(){return e},e}function jP(){var e=Object(o.a)(["\n  ","\n"]);return jP=function(){return e},e}function kP(){var e=Object(o.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return kP=function(){return e},e}function wP(){var e=Object(o.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return wP=function(){return e},e}function CP(){var e=Object(o.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return CP=function(){return e},e}var IP=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,o=e.userImage,i=e.userLink,c=e.username,u=e.name,m=e.signout,s=x.a.useState(!1),d=Object(l.a)(s,2),f=d[0],v=d[1],p=Object(Fn.h)();return x.a.createElement(UP,null,x.a.createElement(MP,null,x.a.createElement(TP,{onClick:function(){return p.goBack()}},x.a.createElement(jc.a,{size:"20"})),r),x.a.createElement(PP,null,t),x.a.createElement(AP,null,x.a.createElement(RP,null,a)),x.a.createElement(LP,null,x.a.createElement(_P,null,x.a.createElement(mE,{open:f,setOpen:v}),x.a.createElement(sE,{username:c,name:u,userImage:o,signout:m,open:f,setOpen:v,Side:n})),x.a.createElement(_P,null,x.a.createElement(Ht.c,{to:"/"},x.a.createElement(FP,null,x.a.createElement(Fg.c,{src:Oe})))),x.a.createElement(_P,null,x.a.createElement(SP,null,x.a.createElement(Ht.c,{to:i},x.a.createElement(Tc,{src:o,size:"m"}))))))},FP=Sn(Pn.Box)(CP()),TP=Sn(Pn.Box)(wP(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),SP=Sn(Pn.Box)(kP()),PP=Sn(Pn.Box)(jP(),k.a.lessThan("medium")(OP())),MP=Sn(Pn.Box)(yP(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(EP())),_P=Sn(Pn.Box)(xP()),LP=Sn(Pn.Box)(hP(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),k.a.greaterThan("medium")(bP())),UP=Sn(Pn.Box)(gP(),k.a.greaterThan("large")(pP()),k.a.lessThan("medium")(vP())),AP=Sn(Pn.Box)(fP(),k.a.greaterThan("medium")(dP()),k.a.lessThan("medium")(sP()),k.a.lessThan("small")(mP())),RP=Sn(Pn.Box)(uP()),BP=function(e){var n=e.children,t=ua(),r=t.me,a=t.logout,o=Object(h.useMemo)((function(){var e,n=null===r||void 0===r?void 0:r.user;if(!n)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",o="/user/".concat(n.id);return{SidebarBox:x.a.createElement(Zx,null),HeaderBox:x.a.createElement(Aw,null),SearchBox:x.a.createElement(Oc,null),userImage:t,userLink:o,signout:a,username:n.displayUsername||"",name:n.preferredUsername||""}}),[a,r]);return o?x.a.createElement(IP,o,n):x.a.createElement(Zw,null,n)},zP={exact:!0,path:"/settings/:tab(preferences|logs|invites|instance|flags)?",component:function(e){var n=e.match.params.tab,t="preferences"===n?ZS.Preferences:"logs"===n?ZS.ModerationLogs:"invites"===n?ZS.Invites:"instance"===n?ZS.Instance:"flags"===n?ZS.Flags:n?null:ZS.General,r=Object(h.useMemo)((function(){return null===t?null:{tab:t,basePath:"/settings"}}),[t]);return r?x.a.createElement(Hx,null,x.a.createElement(BP,null,x.a.createElement(lP,r))):x.a.createElement($b,null)}},NP=Ux(zP),DP=t(773);function $P(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return $P=function(){return e},e}function qP(){var e=Object(o.a)(["\n  margin: 0;\n  flex: 1;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n  padding: 16px;\n"]);return qP=function(){return e},e}function WP(){var e=Object(o.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return WP=function(){return e},e}function QP(){var e=Object(o.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  padding-bottom: 50px;\n"]);return QP=function(){return e},e}function VP(){var e=Object(o.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return VP=function(){return e},e}function HP(){var e=Object(o.a)(["\n  ",";\n"]);return HP=function(){return e},e}function JP(){var e=Object(o.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return JP=function(){return e},e}function KP(){var e=Object(o.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return KP=function(){return e},e}var ZP={login:Object(Yn.i18nMark)("Sign in"),placeholders:{email:Object(Yn.i18nMark)("eg. mary@moodlers.org"),preferredUsername:Object(Yn.i18nMark)("eg. moodlerMary"),name:Object(Yn.i18nMark)("eg. Moodler Mary"),password:Object(Yn.i18nMark)("Choose your password"),passwordConfirm:Object(Yn.i18nMark)("Confirm your password")}},GP=function(e){var n=e.formik,t=e.registeredUsername,r=e.registeredEmail;return h.createElement(nM,null,!n.isSubmitting&&n.submitCount&&t&&r?h.createElement(Pn.Box,{mt:3},h.createElement(Ia,null),h.createElement(XP,null,h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"Welcome"})," ",h.createElement("b",null,t)),h.createElement(Pn.Text,{mt:2,variant:"text"},h.createElement(Yn.Trans,{id:"Please confirm your email address"}),h.createElement("b",null," "+r+" "),h.createElement(Yn.Trans,{id:"by clicking on the link we emailed you (check your spam folder if necessary)."}))),h.createElement(YP,null,h.createElement(Ht.b,{to:"/"},h.createElement(ot,{mt:3,variant:"primary"},h.createElement(Yn.Trans,{id:"Sign in"}))))),">"):h.createElement(eM,null,h.createElement(Ia,null),h.createElement(tM,null,h.createElement(aM,{p:3},h.createElement(Pn.Box,{mr:2},h.createElement(DP.a,{size:"20",color:"white"})),h.createElement(Pn.Text,{variant:"suptitle"},ye))),h.createElement(Pn.Flex,{mt:2},h.createElement(rM,{onSubmit:n.handleSubmit},h.createElement(Pn.Box,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Email"})),h.createElement(ma.b,{placeholder:ZP.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.email))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Full name"})),h.createElement(ma.b,{placeholder:ZP.placeholders.name,name:"name",value:n.values.name,onChange:n.handleChange}),n.errors.name&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.name))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Preferred username"})),h.createElement(ma.b,{placeholder:ZP.placeholders.preferredUsername,name:"username",value:n.values.username,onChange:n.handleChange}),n.errors.username&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.username))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Password"})),h.createElement(ma.b,{placeholder:ZP.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.password))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Confirm password"})),h.createElement(ma.b,{placeholder:ZP.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.passwordConfirm))),h.createElement(Pn.Box,{mt:3,mb:3},h.createElement(ma.c,{alignItems:"center"},h.createElement(ma.a,{name:"terms",id:"remember",value:n.values.terms,onChange:n.handleChange}),h.createElement(Pn.Text,{mr:1},"I have read and agreed the"),h.createElement(Ht.c,{to:"/terms",target:"_blank"},"Terms and Conditions")),n.errors.terms&&h.createElement(Wi,null,h.createElement(Oi,{variant:"negative"},n.errors.terms))),h.createElement(Pn.Box,{mt:3},h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit"},h.createElement(Yn.Trans,{id:"Sign up"})))))))},YP=Sn(Pn.Box)(KP()),XP=Sn.div(JP()),eM=Sn(Pn.Box)(HP(),k.a.lessThan("medium")(VP())),nM=Sn.div(QP()),tM=Sn.div(WP()),rM=Sn.form(qP(),(function(e){return e.theme.colors.appInverse})),aM=Sn(Pn.Flex)($P(),(function(e){return e.green?"#546d4f":e.theme.colors.secondary})),oM={name:"",email:"",password:"",username:"",passwordConfirm:"",terms:!1},iM={id:"Sign Up"},cM=function(){fo(iM);var e=co(),n=e.signUp,t=e.signUpStatus,r=e.usernameAvailable,a=io.object({username:io.string().min(3).max(16).matches(ze).required().test("checkDuplUsername","username already exists",(function(e){return e&&r(e)})),email:io.string().max(50).required(),name:io.string().max(50).required(),password:io.string().min(6).max(50).required(),passwordConfirm:io.string().oneOf([io.ref("password"),null],"Passwords must match").required(),terms:io.boolean().oneOf([!0],"Must Accept Terms and Conditions")}),o=Object(Nt.a)({initialValues:oM,enableReinitialize:!0,validateOnChange:!1,validateOnBlur:!1,validationSchema:a,onSubmit:function(e){return n({email:e.email,name:e.name,password:e.password,preferredUsername:e.username,wantsEmailDigest:!1,wantsNotifications:!1})}}),i=Object(h.useMemo)((function(){var e,n;return t.called&&(null===(e=t.data)||void 0===e||null===(n=e.createUser)||void 0===n?void 0:n.user.name)?{formik:o,registeredUsername:t.data.createUser.user.name,registeredEmail:t.data.createUser.email}:{formik:o}}),[t,o]);return x.a.createElement(GP,i)},lM={exact:!0,path:"/signup",component:function(e){e.match;return x.a.createElement(Zw,{withoutHeader:!0},x.a.createElement(cM,null))}},uM={id:"Moodle LMS"},mM=function(e){if(fo(uM),e.badParams)return x.a.createElement("div",null,x.a.createElement("h2",null,"Bad Params"));var n=e.params,t=n.course,r=n.site,a=n.section;return x.a.createElement("div",null,x.a.createElement("h1",null,"Welcome from Moodle LMS !"),x.a.createElement("h2",null,"Site: ",r),t&&x.a.createElement("h3",null,"course: ",t),a&&x.a.createElement("h3",null,"section: ",a))},sM={exact:!0,path:"/lms/moodle/search",component:function(e){e.match;var n=Mv(),t=n.updateLMSPrefs,r=n.loading,a=Object(h.useRef)(function(){var e=new URLSearchParams(window.location.search),n=e.get("site");return n?{site:n,course:e.get("course")||void 0,section:e.get("section")||void 0}:null}()),o=Object(h.useRef)(!1),i=Object(h.useState)(),c=Object(l.a)(i,2),u=c[0],m=c[1];return Object(h.useEffect)((function(){var e=a.current;o.current||r||(e?t(e).then((function(){return m({params:e})})):m({badParams:!0}),o.current=!0)}),[t,r]),x.a.createElement(Hx,null,x.a.createElement(oy,null,u&&x.a.createElement(mM,u)))}},dM=t(774);function fM(){var e=Object(o.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return fM=function(){return e},e}function vM(){var e=Object(o.a)(["\n  .extra {\n    width: 100%;\n    margin-right: 0;\n    margin-left: 0;\n  }\n"]);return vM=function(){return e},e}function pM(){var e=Object(o.a)(["\n  margin: 0 auto;\n  max-width: 1020px;\n"]);return pM=function(){return e},e}function gM(){var e=Object(o.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return gM=function(){return e},e}function bM(){var e=Object(o.a)(["\n  ",";\n"]);return bM=function(){return e},e}var hM=function(e){var n=e.terms_users_text_data,t=e.terms_cookies_text_data,r=e.terms_indexing_text_data,a=e.terms_users_data,o=e.terms_privacy_enabled,i=e.privacy_url_text_data,c=e.terms_privacy_text_data,l=e.terms_cookies_data,u=e.terms_indexing_data;return h.createElement(EM,null,h.createElement(xM,null,h.createElement(Ia,null),h.createElement(Pn.Flex,{mt:2},h.createElement(yM,null,h.createElement(OM,{green:!0,mb:3,mt:3,p:3},h.createElement(Pn.Box,{mr:2},h.createElement(dM.a,{size:"20",color:"white"})),h.createElement(Pn.Text,{variant:"suptitle"}," ","Please read the following. By using this instance of MoodleNet you are consenting to these agreements.")),h.createElement(Jn,{className:"extra"},h.createElement(Pn.Box,{p:3},h.createElement(uu.a,null,a||n)),h.createElement(Pn.Box,{p:3},o?h.createElement(uu.a,null,i||c):null),h.createElement(Pn.Box,{p:3},h.createElement(uu.a,null,l||t)),h.createElement(Pn.Box,{p:3},h.createElement(uu.a,null,u||r)))))))},xM=Sn(Pn.Box)(bM(),k.a.lessThan("medium")(gM())),EM=Sn.div(pM()),yM=Sn(Pn.Box)(vM()),OM=Sn(Pn.Flex)(fM(),(function(e){return e.green?"#546d4f":e.theme.colors.primary})),jM=t(168),kM={id:"Terms and Conditions"},wM=function(){fo(kM);var e=x.a.useContext(Ea).i18n,n={data:e._(je)},t={data:e._(Me)},r={data:e._(ke)},a={data:e._(we)},o=Object(jM.a)(Ie,{useCache:!0,manual:!0}),i=Object(l.a)(o,2),c=i[0],u=i[1],m=Object(jM.a)(Fe,{useCache:!0,manual:!0}),s=Object(l.a)(m,2),d=s[0],f=s[1],v=Object(jM.a)(Te,{useCache:!0,manual:!0}),p=Object(l.a)(v,2),g=p[0],b=p[1],E=Object(jM.a)(Pe,{useCache:!0}),y=Object(l.a)(E,2),O=y[0],j=y[1];Object(h.useEffect)((function(){Ce&&(u(),f(),b()),Se&&j()}),[]);var k=Object(h.useMemo)((function(){return{terms_privacy_enabled:Se,terms_users_data:c.data,terms_users_text_data:n.data,privacy_url_text_data:O.data,terms_privacy_text_data:t.data,terms_cookies_data:d.data,terms_cookies_text_data:r.data,terms_indexing_data:g.data,terms_indexing_text_data:a.data}}),[O.data,d.data,r.data,g.data,a.data,t.data,c.data,n.data]);return x.a.createElement(hM,k)},CM={exact:!0,path:"/terms",component:function(){return x.a.createElement(Zw,{withoutHeader:!0},x.a.createElement(wM,null))}},IM=function(){return x.a.createElement(Fn.d,null,x.a.createElement(Fn.b,CO),x.a.createElement(Fn.b,Hk),x.a.createElement(Fn.b,iy),x.a.createElement(Fn.b,zP),x.a.createElement(Fn.b,dC),x.a.createElement(Fn.b,gC),x.a.createElement(Fn.b,JO),x.a.createElement(Fn.b,cI),x.a.createElement(Fn.b,sI),x.a.createElement(Fn.b,gI),x.a.createElement(Fn.b,Ax),x.a.createElement(Fn.b,CF),x.a.createElement(Fn.b,QC),x.a.createElement(Fn.b,YI),x.a.createElement(Fn.b,Gw),x.a.createElement(Fn.b,lM),x.a.createElement(Fn.b,SC),x.a.createElement(Fn.b,CM),x.a.createElement(Fn.b,sM),x.a.createElement(Fn.b,Jx),x.a.createElement(Fn.b,_I),x.a.createElement(Fn.b,{component:$b}))};function FM(){var e=Object(o.a)(["\n    top 50%;\n  "]);return FM=function(){return e},e}function TM(){var e=Object(o.a)(["\n    top 10px;\n  "]);return TM=function(){return e},e}function SM(){var e=Object(o.a)(["\n  ","\n  ","\n"]);return SM=function(){return e},e}var PM=function(){var e=h.useState(!0),n=Object(l.a)(e,2),t=n[0],r=n[1];return t?h.createElement(MM,null,h.createElement(Oi,{variant:"warning"},h.createElement("div",{style:{textAlign:"center"}},"This site is currently in active development. We are looking forward to reading your feedback and ideas in our"," ",h.createElement("a",{href:"https://github.com/reflow-project/zenpub-client/issues",target:"_blank",rel:"noopener noreferrer"},"Issues Tracker"),h.createElement("span",{style:{cursor:"pointer",position:"absolute",top:"10px",right:"10px"},onClick:function(){return r(!1)}},h.createElement(Ii.a,{size:16}))))):null},MM=Sn(Fg.a)(SM(),k.a.greaterThan("medium")(TM()),k.a.lessThan("medium")(FM())),_M=function(){return h.createElement(In,null,h.createElement(h.Fragment,null,h.createElement(PM,null),h.createElement(IM,null)))},LM=t(396),UM=t.n(LM),AM=t(265),RM=t.n(AM),BM=t(782),zM=function(e){return"?".concat(RM.a.stringify(e))},NM=Re&&Re.appId&&Re.apiKey&&UM()(Re.appId,Re.apiKey),DM=function(e){var n,t=e.children,r=Object(Fn.h)().push,a=Object(Fn.i)(),o=x.a.useRef(),i=x.a.useRef($M(a.pathname)),c=x.a.useState((n=a.search,RM.a.parse(n.slice(1)))),u=Object(l.a)(c,2),m=u[0],s=u[1];x.a.useEffect((function(){var e=setTimeout((function(){i.current&&!$M(a.pathname)?(o.current=void 0,i.current=!1,s(qM)):m.query?(o.current=o.current||($M(a.pathname)?void 0:a),i.current=!0,r(function(e){return"/search/".concat(zM(e))}(m))):$M(a.pathname)&&(o.current?r(o.current):r("/"),o.current=void 0)}),500);return function(){clearTimeout(e)}}),[m,a.pathname,a.hash,a.search,r]);var d=x.a.useCallback((function(e){var n,t;!("query"in e)||(null===e||void 0===e?void 0:e.query)==(null===m||void 0===m?void 0:m.query)&&(null===e||void 0===e||null===(n=e.refinementList)||void 0===n?void 0:n.index_type)==(null===m||void 0===m||null===(t=m.refinementList)||void 0===t?void 0:t.index_type)&&(null===e||void 0===e?void 0:e.page)==(null===m||void 0===m?void 0:m.page)||s(e)}),[m]);return NM&&Re?x.a.createElement(BM.a,{searchState:m,onSearchStateChange:d,searchClient:NM,refresh:!0,indexName:Re.indexName||"",createURL:zM},t):x.a.createElement(x.a.Fragment,null,t)},$M=function(e){return"/search/"===e},qM={query:""},WM=function(e){var n=e.children;return x.a.createElement(ya,null,x.a.createElement(so,null,x.a.createElement(Ht.a,null,x.a.createElement(DM,null,n))))},QM=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function VM(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");QM?(!function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):HM(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):HM(e)}))}}function HM(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function JM(){var e=Object(o.a)([" \n          width: 90vw !important;\n          margin: 0 auto; \n        "]);return JM=function(){return e},e}function KM(){var e=Object(o.a)(["\n      body, html {\n          border: 0;\n          margin: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n          font-family: "," !important;\n      }\n\n      * {\n        box-sizing: border-box;\n      }\n      input, textarea {\n        ::placeholder {\n          font-family: "," !important;\n        }\n      }\n      h1 {\n        font-size: 50px;\n      }\n      h2 {\n        font-size: 30px;\n      }\n      h3 {\n        font-size: 18px;\n      }\n      p {\n        font-size: 18px;\n      }\n\n      body {\n        background: ",";\n        .ais-SearchBox {\n          border-radius: 4px;\n          border: ","\n          height: 34px;\n          width: 380px;\n          background: ","\n          input {\n            border: none;\n            margin: 0 !important; \n            border-radius: 4px;\n            text-indent: 30px;\n            padding: 0;\n            height: 32px;\n            background: ",";\n          }\n        }\n        .ais-InstantSearch__root { \n          display: flex;\n        width: 100%;\n        }\n      }\n\n      .Toastify__toast--success{\n        background-color: ",";\n      }\n\n      .Toastify__toast-container--top-right{\n        top:60px !important;\n        ","; \n    }\n\n    input, textarea{\n      &:focus::placeholder{\n        color: transparent;\n      }\n    }\n\n    input:focus::-webkit-input-placeholder, textarea:focus::-webkit-input-placeholder { color:transparent; }\n    input:focus:-moz-placeholder, textarea:focus:-moz-placeholder { color:transparent; } /* FF 4-18 */\n    input:focus::-moz-placeholder, textarea:focus::-moz-placeholder { color:transparent; } /* FF 19+ */\n    input:focus:-ms-input-placeholder, textarea:focus:-ms-input-placeholder { color:transparent; } /* IE 10+ */\n  "]);return KM=function(){return e},e}function ZM(){return(ZM=Object(i.a)(a.a.mark((function e(){var n,t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(j.createGlobalStyle)(KM(),cn.primary,cn.primary,$e,on,$e,$e,Qe,k.a.lessThan("480px")(JM())),t=fa("local"),e.next=4,kn({localKVStore:t("APOLLO#"),appLinks:[b]});case 4:r=e.sent,o=function(){return h.createElement(E.a,{client:r.client},h.createElement(WM,null,h.createElement(n,null),h.createElement(m.b,{hideProgressBar:!0,transition:m.a,autoClose:3e3,newestOnTop:!0}),h.createElement(_M,null)))},O.a.render(h.createElement(o,null),document.getElementById("root")),VM();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){ZM.apply(this,arguments)}()}},[[403,2,3]]]);
//# sourceMappingURL=main.dfd776c3.chunk.js.map